"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[3703],{7382:(L,O,n)=>{n.d(O,{a:()=>A});var t=n(529),E=n(2529),h=n(9300),e=n(4004),_=n(4650),C=n(5060);let A=(()=>{class o extends E.b{constructor(i,s){super(i,s)}listAuditLogsResponse(i){let s=this.newParams(),a=new t.WM;null!=i.sort&&(s=s.set("sort",i.sort.toString())),null!=i.q&&(s=s.set("q",i.q.toString())),null!=i.pageSize&&(s=s.set("page_size",i.pageSize.toString())),null!=i.page&&(s=s.set("page",i.page.toString())),null!=i.XRequestId&&(a=a.set("X-Request-Id",i.XRequestId.toString()));let u=new t.aW("GET",this.rootUrl+"/audit-logs",null,{headers:a,params:s,responseType:"json"});return this.http.request(u).pipe((0,h.h)(m=>m instanceof t.Zn),(0,e.U)(m=>m))}listAuditLogs(i){return this.listAuditLogsResponse(i).pipe((0,e.U)(s=>s.body))}}return o.listAuditLogsPath="/audit-logs",o.\u0275fac=function(i){return new(i||o)(_.LFG(C.p),_.LFG(t.eN))},o.\u0275prov=_.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})()},3703:(L,O,n)=>{n.r(O),n.d(O,{LogModule:()=>x});var t=n(6296),E=n(8746),h=n(3526),e=n(4650),_=n(7382),C=n(2443),A=n(4006),o=n(9375),f=n(6895),i=n(8348),s=n(2466),a=n(3046);function g(c,T){if(1&c&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell"),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.qZA(),e.TgZ(7,"clr-dg-cell"),e._uU(8),e.qZA(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.ALo(11,"harborDatetime"),e.qZA()()),2&c){const r=T.$implicit;e.xp6(2),e.Oqu(r.username),e.xp6(2),e.Oqu(r.resource),e.xp6(2),e.Oqu(r.resource_type),e.xp6(2),e.Oqu(r.operation),e.xp6(2),e.Oqu(e.xi3(11,5,r.op_time,"short"))}}function u(c,T){if(1&c&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.ALo(3,"translate"),e.qZA()),2&c){const r=e.oxw(),l=e.MAs(53);e.xp6(1),e.xDo("",l.firstItem+1," - ",l.lastItem+1," ",e.lcZ(2,5,"AUDIT_LOG.OF")," ",r.totalCount," ",e.lcZ(3,7,"AUDIT_LOG.ITEMS"),"")}}const m=function(){return[15,25,50]};let v=(()=>{class c{constructor(r,l){this.logService=r,this.errorHandler=l,this.recentLogs=[],this.loading=!0,this.defaultFilter="username",this.pageSize=(0,h.tb)(h.V2.SYSTEM_RECENT_LOG_COMPONENT),this.currentPage=1,this.totalCount=0}get inProgress(){return this.loading}doFilter(r){null!=r&&(this.currentTerm=r.trim(),this.loading=!0,this.currentPage=1,this.totalCount=0,this.load())}refresh(){this.doFilter("")}openFilter(r){this.isOpenFilterTag=r}selectFilterKey(r){this.defaultFilter=r.target.value,this.doFilter(this.currentTerm)}load(r){r&&r.page&&(this.pageSize=r.page.size,(0,h.Pe)(h.V2.SYSTEM_RECENT_LOG_COMPONENT,this.pageSize));const l={page:this.currentPage,pageSize:this.pageSize};this.currentTerm&&""!==this.currentTerm&&(l.q=encodeURIComponent(`${this.defaultFilter}=~${this.currentTerm}`)),this.loading=!0,this.logService.listAuditLogsResponse(l).pipe((0,E.x)(()=>this.loading=!1)).subscribe(d=>{if(d.headers){let p=d.headers.get("x-total-count");p&&(this.totalCount=parseInt(p,0))}this.recentLogs=d.body},d=>{this.errorHandler.error(d)})}}return c.\u0275fac=function(r){return new(r||c)(e.Y36(_.a),e.Y36(C.q))},c.\u0275cmp=e.Xpm({type:c,selectors:[["hbr-log"]],decls:58,vars:60,consts:[["sub-header-title","",1,"custom-h2"],[1,"row","flex-items-xs-between","flex-items-xs-bottom"],[1,"action-head-pos"],[1,"select","filter-tag","clr-select-wrapper",3,"hidden"],["id","selectKey",3,"change"],["value","username"],["value","resource"],["value","resource_type"],["value","operation"],[3,"withDivider","filterPlaceholder","currentValue","filterEvt","openFlag"],[1,"refresh-btn",3,"click"],["shape","refresh","ng-disabled","inProgress",3,"hidden"],[1,"spinner","spinner-inline",3,"hidden"],[3,"clrDgLoading","clrDgRefresh"],[4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"]],template:function(r,l){1&r&&(e.TgZ(0,"div")(1,"h2",0),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",1),e._UZ(5,"div"),e.TgZ(6,"div",2)(7,"div",3)(8,"select",4),e.NdJ("change",function(p){return l.selectFilterKey(p)}),e.TgZ(9,"option",5),e._uU(10),e.ALo(11,"lowercase"),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",6),e._uU(14),e.ALo(15,"lowercase"),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"option",7),e._uU(18),e.ALo(19,"lowercase"),e.ALo(20,"translate"),e.qZA(),e.TgZ(21,"option",8),e._uU(22),e.ALo(23,"lowercase"),e.ALo(24,"translate"),e.qZA()()(),e.TgZ(25,"hbr-filter",9),e.NdJ("filterEvt",function(p){return l.doFilter(p)})("openFlag",function(p){return l.openFilter(p)}),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"span",10),e.NdJ("click",function(){return l.refresh()}),e._UZ(28,"clr-icon",11)(29,"span",12),e.qZA()()(),e.TgZ(30,"div")(31,"clr-datagrid",13),e.NdJ("clrDgRefresh",function(p){return l.load(p)}),e.TgZ(32,"clr-dg-column"),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"clr-dg-column"),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"clr-dg-column"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.TgZ(41,"clr-dg-column"),e._uU(42),e.ALo(43,"translate"),e.qZA(),e.TgZ(44,"clr-dg-column"),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"clr-dg-placeholder"),e._uU(48),e.ALo(49,"translate"),e.qZA(),e.YNc(50,g,12,8,"clr-dg-row",14),e.TgZ(51,"clr-dg-footer")(52,"clr-dg-pagination",15,16),e.NdJ("clrDgPageChange",function(p){return l.currentPage=p}),e.TgZ(54,"clr-dg-page-size",17),e._uU(55),e.ALo(56,"translate"),e.qZA(),e.YNc(57,u,4,9,"span",18),e.qZA()()()()()),2&r&&(e.xp6(2),e.hij(" ",e.lcZ(3,25,"SIDE_NAV.LOGS")," "),e.xp6(5),e.Q6J("hidden",!l.isOpenFilterTag),e.xp6(3),e.hij(" ",e.lcZ(11,27,e.lcZ(12,29,"AUDIT_LOG.USERNAME"))," "),e.xp6(4),e.hij(" ",e.lcZ(15,31,e.lcZ(16,33,"AUDIT_LOG.RESOURCE"))," "),e.xp6(4),e.hij(" ",e.lcZ(19,35,e.lcZ(20,37,"AUDIT_LOG.RESOURCE_TYPE"))," "),e.xp6(4),e.hij(" ",e.lcZ(23,39,e.lcZ(24,41,"AUDIT_LOG.OPERATION"))," "),e.xp6(3),e.s9C("filterPlaceholder",e.lcZ(26,43,"AUDIT_LOG.FILTER_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",l.currentTerm),e.xp6(3),e.Q6J("hidden",l.inProgress),e.xp6(1),e.Q6J("hidden",!l.inProgress),e.xp6(2),e.Q6J("clrDgLoading",l.loading),e.xp6(2),e.Oqu(e.lcZ(34,45,"AUDIT_LOG.USERNAME")),e.xp6(3),e.Oqu(e.lcZ(37,47,"AUDIT_LOG.RESOURCE")),e.xp6(3),e.Oqu(e.lcZ(40,49,"AUDIT_LOG.RESOURCE_TYPE")),e.xp6(3),e.Oqu(e.lcZ(43,51,"AUDIT_LOG.OPERATION")),e.xp6(3),e.Oqu(e.lcZ(46,53,"AUDIT_LOG.TIMESTAMP")),e.xp6(3),e.Oqu(e.lcZ(49,55,"AUDIT_LOG.NOT_FOUND")),e.xp6(2),e.Q6J("ngForOf",l.recentLogs),e.xp6(2),e.Q6J("clrDgPage",l.currentPage)("clrDgPageSize",l.pageSize)("clrDgTotalItems",l.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(59,m)),e.xp6(1),e.Oqu(e.lcZ(56,57,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",l.totalCount))},dependencies:[A.YN,A.Kr,o.C9t,o.m4W,o.Z4N,o.fv_,o.dRQ,o.Ltv,o.YYR,o.F7K,o.PDs,o.KHL,o.Gcc,o.jND,o.Nh1,o.dml,o.K8c,o.qvL,f.sg,f.O5,i.z,s.X$,f.i8,a.Z],styles:[".h2-log-override[_ngcontent-%COMP%]{margin-top:0!important}.action-head-pos[_ngcontent-%COMP%]{padding-right:18px;height:24px;display:flex;justify-content:flex-end}.refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.custom-lines-button[_ngcontent-%COMP%]{padding:0!important;min-width:25px!important}.lines-button-toggole[_ngcontent-%COMP%]{font-size:16px;text-decoration:underline}.log-select[_ngcontent-%COMP%]{width:130px;display:inline-block;top:1px}.item-divider[_ngcontent-%COMP%]{height:24px;display:inline-block;width:1px;background-color:#ccc;opacity:.55;margin-left:12px;top:8px;position:relative}.rightPos[_ngcontent-%COMP%]{position:absolute;z-index:100;right:35px;margin-top:4px}.filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}"]}),c})();var P=n(858);const Z=[{path:"",component:v}];let x=(()=>{class c{}return c.\u0275fac=function(r){return new(r||c)},c.\u0275mod=e.oAB({type:c}),c.\u0275inj=e.cJS({imports:[t.m,P.Bz.forChild(Z)]}),c})()},8348:(L,O,n)=>{n.d(O,{z:()=>f});var t=n(4650),E=n(7579),h=n(8372),e=n(4006),_=n(6895),C=n(9375);const A=["inputElement"];function o(i,s){1&i&&t._UZ(0,"span",4)}let f=(()=>{class i{constructor(a){this.cd=a,this.placeHolder="",this.filterTerms=new E.x,this.isExpanded=!1,this.filterEvt=new t.vpe,this.openFlag=new t.vpe,this.readonly=null,this.expandMode=!1,this.withDivider=!1}set filterPlaceholder(a){this.placeHolder=a}ngOnInit(){this.filterTerms.pipe((0,h.b)(500)).subscribe(a=>{this.filterEvt.emit(a)})}valueChange(){this.filterTerms.next(this.currentValue&&this.currentValue.trim())}inputFocus(){this.openFlag.emit(this.isExpanded)}onClick(){this.expandMode||(this.isExpanded=!this.isExpanded,this.isExpanded&&(this.cd.detectChanges(),this.inputElement.nativeElement.focus()),this.openFlag.emit(this.isExpanded))}get isShowSearchBox(){return this.expandMode||!this.expandMode&&this.isExpanded}}return i.\u0275fac=function(a){return new(a||i)(t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["hbr-filter"]],viewQuery:function(a,g){if(1&a&&t.Gf(A,5),2&a){let u;t.iGM(u=t.CRH())&&(g.inputElement=u.first)}},inputs:{readonly:"readonly",currentValue:"currentValue",filterPlaceholder:"filterPlaceholder",expandMode:"expandMode",withDivider:"withDivider",width:"width"},outputs:{filterEvt:"filterEvt",openFlag:"openFlag"},decls:5,vars:9,consts:[["shape","search","size","20",1,"search-btn",3,"click"],["type","text","autofocus","",1,"filter-input","clr-input",3,"hidden","placeholder","ngModel","keyup","focus","ngModelChange"],["inputElement",""],["class","filter-divider",4,"ngIf"],[1,"filter-divider"]],template:function(a,g){1&a&&(t.TgZ(0,"span")(1,"clr-icon",0),t.NdJ("click",function(){return g.onClick()}),t.qZA(),t.TgZ(2,"input",1,2),t.NdJ("keyup",function(){return g.valueChange()})("focus",function(){return g.inputFocus()})("ngModelChange",function(m){return g.currentValue=m}),t.qZA(),t.YNc(4,o,1,0,"span",3),t.qZA()),2&a&&(t.xp6(1),t.ekj("filter-icon",g.isShowSearchBox),t.xp6(1),t.Udp("width",g.width,"px"),t.s9C("placeholder",g.placeHolder),t.Q6J("hidden",!g.isShowSearchBox)("ngModel",g.currentValue),t.uIk("readOnly",g.readonly),t.xp6(2),t.Q6J("ngIf",g.withDivider))},dependencies:[e.Fj,e.JJ,e.On,_.O5,C.qvL],styles:[".filter-icon[_ngcontent-%COMP%]{position:relative;right:-20px}.filter-divider[_ngcontent-%COMP%]{display:inline-block;height:16px;width:1px;padding-top:12px;padding-bottom:12px;position:relative;top:9px;margin-right:6px;margin-left:6px}.search-btn[_ngcontent-%COMP%]{cursor:pointer}.search-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.filter-input[_ngcontent-%COMP%]{padding-left:24px}"]}),i})()}}]);