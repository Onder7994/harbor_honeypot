"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[7359],{1690:(P,Z,h)=>{h.d(Z,{U:()=>W});var g=h(529),C=h(2529),b=h(9300),e=h(4004),k=h(4650),E=h(5060);let W=(()=>{class m extends C.b{constructor(i,d){super(i,d)}ListWebhookPoliciesOfProjectResponse(i){let d=this.newParams(),c=new g.WM;null!=i.sort&&(d=d.set("sort",i.sort.toString())),null!=i.q&&(d=d.set("q",i.q.toString())),null!=i.pageSize&&(d=d.set("page_size",i.pageSize.toString())),null!=i.page&&(d=d.set("page",i.page.toString())),null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("GET",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/policies`,null,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}ListWebhookPoliciesOfProject(i){return this.ListWebhookPoliciesOfProjectResponse(i).pipe((0,e.U)(d=>d.body))}CreateWebhookPolicyOfProjectResponse(i){let d=this.newParams(),c=new g.WM,_=null;_=i.policy,null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("POST",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/policies`,_,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}CreateWebhookPolicyOfProject(i){return this.CreateWebhookPolicyOfProjectResponse(i).pipe((0,e.U)(d=>d.body))}GetWebhookPolicyOfProjectResponse(i){let d=this.newParams(),c=new g.WM;null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("GET",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/policies/${i.webhookPolicyId}`,null,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}GetWebhookPolicyOfProject(i){return this.GetWebhookPolicyOfProjectResponse(i).pipe((0,e.U)(d=>d.body))}UpdateWebhookPolicyOfProjectResponse(i){let d=this.newParams(),c=new g.WM,_=null;_=i.policy,null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("PUT",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/policies/${i.webhookPolicyId}`,_,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}UpdateWebhookPolicyOfProject(i){return this.UpdateWebhookPolicyOfProjectResponse(i).pipe((0,e.U)(d=>d.body))}DeleteWebhookPolicyOfProjectResponse(i){let d=this.newParams(),c=new g.WM;null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("DELETE",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/policies/${i.webhookPolicyId}`,null,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}DeleteWebhookPolicyOfProject(i){return this.DeleteWebhookPolicyOfProjectResponse(i).pipe((0,e.U)(d=>d.body))}LastTriggerResponse(i){let d=this.newParams(),c=new g.WM;null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("GET",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/lasttrigger`,null,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}LastTrigger(i){return this.LastTriggerResponse(i).pipe((0,e.U)(d=>d.body))}GetSupportedEventTypesResponse(i){let d=this.newParams(),c=new g.WM;null!=i.XRequestId&&(c=c.set("X-Request-Id",i.XRequestId.toString())),null!=i.XIsResourceName&&(c=c.set("X-Is-Resource-Name",i.XIsResourceName.toString()));let u=new g.aW("GET",this.rootUrl+`/projects/${i.projectNameOrId}/webhook/events`,null,{headers:c,params:d,responseType:"json"});return this.http.request(u).pipe((0,b.h)(p=>p instanceof g.Zn),(0,e.U)(p=>p))}GetSupportedEventTypes(i){return this.GetSupportedEventTypesResponse(i).pipe((0,e.U)(d=>d.body))}}return m.ListWebhookPoliciesOfProjectPath="/projects/{project_name_or_id}/webhook/policies",m.CreateWebhookPolicyOfProjectPath="/projects/{project_name_or_id}/webhook/policies",m.GetWebhookPolicyOfProjectPath="/projects/{project_name_or_id}/webhook/policies/{webhook_policy_id}",m.UpdateWebhookPolicyOfProjectPath="/projects/{project_name_or_id}/webhook/policies/{webhook_policy_id}",m.DeleteWebhookPolicyOfProjectPath="/projects/{project_name_or_id}/webhook/policies/{webhook_policy_id}",m.LastTriggerPath="/projects/{project_name_or_id}/webhook/lasttrigger",m.GetSupportedEventTypesPath="/projects/{project_name_or_id}/webhook/events",m.\u0275fac=function(i){return new(i||m)(k.LFG(E.p),k.LFG(g.eN))},m.\u0275prov=k.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()},7359:(P,Z,h)=>{h.r(Z),h.d(Z,{WebhookModule:()=>be});var g=h(858),C=h(6296),b=h(8746),e=h(4650),k=h(8372),E=h(1884),W=h(9300),m=h(3900),f=h(3526),i=h(2421),d=h(7579),c=h(1690);const _={REPLICATION:"Replication finished",PUSH_ARTIFACT:"Artifact pushed",PULL_ARTIFACT:"Artifact pulled",DELETE_ARTIFACT:"Artifact deleted",DOWNLOAD_CHART:"Chart downloaded",UPLOAD_CHART:"Chart uploaded",DELETE_CHART:"Chart deleted",QUOTA_EXCEED:"Quota exceed",QUOTA_WARNING:"Quota near threshold",SCANNING_FAILED:"Scanning failed",SCANNING_STOPPED:"Scanning stopped",SCANNING_COMPLETED:"Scanning finished",TAG_RETENTION:"Tag retention finished"};let u=(()=>{class n{constructor(){}eventTypeToText(t){return _[t]?_[t]:t}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275prov=e.Yz7({token:n,factory:n.\u0275fac}),n})();var p=h(4006),s=h(9375),T=h(6895),A=h(2466);const q=["webhookForm"];function M(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.NAME_EXISTS")))}function U(n,l){1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"WEBHOOK.NAME_REQUIRED")))}function R(n,l){if(1&n&&(e.TgZ(0,"clr-control-error",32),e.YNc(1,M,3,3,"span",33),e.YNc(2,U,3,3,"span",33),e.qZA()),2&n){const t=e.oxw(),o=e.MAs(12);e.xp6(1),e.Q6J("ngIf",!(o.errors&&o.errors.required&&(o.dirty||o.touched))&&t.isNameExisting),e.xp6(1),e.Q6J("ngIf",o.errors&&o.errors.required&&(o.dirty||o.touched))}}function S(n,l){if(1&n&&(e.TgZ(0,"option",34),e._uU(1),e.qZA()),2&n){const t=l.$implicit;e.s9C("value",t),e.xp6(1),e.hij(" ",t," ")}}function L(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",35)(1,"input",36),e.NdJ("change",function(){const a=e.CHM(t).$implicit,O=e.oxw();return e.KtG(O.setEventType(a))}),e.qZA(),e.TgZ(2,"label",37),e._uU(3),e.qZA()()}if(2&n){const t=l.$implicit,o=e.oxw();e.xp6(1),e.s9C("id",t),e.s9C("value",t),e.Q6J("checked",o.getEventType(t)),e.xp6(1),e.s9C("for",t),e.xp6(1),e.Oqu(o.eventTypeToText(t))}}function j(n,l){1&n&&(e.TgZ(0,"div",38),e._UZ(1,"clr-icon",11),e.TgZ(2,"span",39),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.EVENT_TYPE_REQUIRED")))}function D(n,l){1&n&&(e.TgZ(0,"clr-control-error",32),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.URL_IS_REQUIRED")," "))}function B(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",40),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"div",8)(6,"input",41),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.webhook.targets[0].auth_header=r)}),e.qZA()()()()}if(2&n){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,3,"WEBHOOK.AUTH_HEADER")),e.xp6(4),e.Q6J("disabled",t.checking)("ngModel",t.webhook.targets[0].auth_header)}}function H(n,l){1&n&&(e.TgZ(0,"clr-tooltip-content",42),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.VERIFY_REMOTE_CERT_TOOLTIP")," "))}function F(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",44),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onCancel())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",45),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.add())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.isValid||t.checkNameOnGoing||t.isNameExisting),e.xp6(1),e.hij(" ",e.lcZ(6,5,"BUTTON.ADD")," ")}}function K(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"div",43)(1,"button",46),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.onCancel())}),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"button",47),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.save())}),e._uU(5),e.ALo(6,"translate"),e.qZA()()}if(2&n){const t=e.oxw();e.xp6(2),e.hij(" ",e.lcZ(3,3,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("disabled",!t.isValid||!t.hasChange()||t.checkNameOnGoing||t.isNameExisting),e.xp6(1),e.hij(" ",e.lcZ(6,5,"BUTTON.SAVE")," ")}}let v=(()=>{class n{constructor(t,o){this.webhookService=t,this.projectWebhookService=o,this.closable=!0,this.checking=!1,this.submitting=!1,this.webhook={enabled:!0,event_types:[],targets:[{type:"http",address:"",skip_cert_verify:!0}]},this.close=new e.vpe,this.notify=new e.vpe,this.checkNameOnGoing=!1,this.isNameExisting=!1,this._nameSubject=new d.x}ngOnInit(){this.subscribeName()}ngOnDestroy(){this._nameSubscription&&(this._nameSubscription.unsubscribe(),this._nameSubscription=null)}reset(){this.isNameExisting=!1,this._nameSubject.next("")}subscribeName(){this._nameSubscription||(this._nameSubscription=this._nameSubject.pipe((0,k.b)(500),(0,E.x)(),(0,W.h)(t=>(!this.isModify||!this.originValue||this.originValue.name!==t)&&t.length>0),(0,m.w)(t=>(this.isNameExisting=!1,this.checkNameOnGoing=!0,this.webhookService.ListWebhookPoliciesOfProject({projectNameOrId:this.projectId.toString(),q:encodeURIComponent(`name=${t}`)}).pipe((0,b.x)(()=>this.checkNameOnGoing=!1))))).subscribe(t=>{t&&t.length>0&&(this.isNameExisting=!0)}))}inputName(){this._nameSubject.next(this.webhook.name)}onCancel(){this.reset(),this.close.emit(!1),this.currentForm.reset(),this.inlineAlert.close()}add(){this.submitting=!0,this.webhookService.CreateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),policy:this.webhook}).pipe((0,b.x)(()=>this.submitting=!1)).subscribe(t=>{this.reset(),this.notify.emit(),this.inlineAlert.close()},t=>{this.inlineAlert.showInlineError(t)})}save(){this.submitting=!0,this.webhookService.UpdateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:this.webhook.id,policy:this.webhook}).pipe((0,b.x)(()=>this.submitting=!1)).subscribe(t=>{this.reset(),this.inlineAlert.close(),this.notify.emit()},t=>{this.inlineAlert.showInlineError(t)})}setCertValue(t){this.webhook.targets[0].skip_cert_verify=!t}get isValid(){return this.currentForm&&this.currentForm.valid&&!this.submitting&&!this.checking&&this.hasEventType()}hasChange(){return!(0,f.jy)(this.originValue,this.webhook)}setEventType(t){-1===this.webhook.event_types.indexOf(t)?this.webhook.event_types.push(t):this.webhook.event_types.splice(this.webhook.event_types.findIndex(o=>o===t),1)}getEventType(t){return t&&-1!==this.webhook.event_types.indexOf(t)}hasEventType(){return this.metadata&&this.metadata.event_type&&this.metadata.event_type.length>0&&this.webhook.event_types&&this.webhook.event_types.length>0}eventTypeToText(t){return this.projectWebhookService.eventTypeToText(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(c.U),e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["add-webhook-form"]],viewQuery:function(t,o){if(1&t&&(e.Gf(q,7),e.Gf(i.l,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.currentForm=r.first),e.iGM(r=e.CRH())&&(o.inlineAlert=r.first)}},inputs:{projectId:"projectId",isOpen:"isOpen",metadata:"metadata"},outputs:{close:"close",notify:"notify"},decls:57,vars:44,consts:[[1,"align-center"],[1,"modal-title"],[1,"clr-form","clr-form-horizontal"],["webhookForm","ngForm"],[1,"form-block","webhook-section"],[1,"clr-form-control"],["for","edit_endpoint_url",1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["autocomplete","off","type","text","id","name","size","30","name","notify-type","required","",1,"clr-input",3,"disabled","ngModel","input","ngModelChange"],["name","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],["class","tooltip-content",4,"ngIf"],["for","edit_endpoint_url",1,"clr-control-label"],["autocomplete","off","type","text","id","description","name","description",1,"clr-textarea","width-238",3,"disabled","ngModel","ngModelChange"],[1,"required"],["clrSelect","","name","notifyType","id","notify_type",1,"width-238",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[1,"clr-control-label","required"],[1,"clr-control-container","clr-control-inline"],["class","clr-checkbox-wrapper width-8rem",4,"ngFor","ngForOf"],["class","clr-subtext-wrapper",4,"ngIf"],["autocomplete","off","type","text","id","edit_endpoint_url","size","30","name","edit_endpoint_url","required","",1,"clr-input",3,"disabled","ngModel","placeholder","ngModelChange"],["enpointURL","ngModel"],["class","clr-form-control",4,"ngIf"],["for","verify_remote_cert",1,"clr-control-label"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-right","clrSize","lg",4,"clrIfOpen"],[1,"clr-control-container","padding-top-3"],["type","checkbox","clrCheckbox","","name","verify_remote_cert","id","verify_remote_cert",3,"disabled","ngModel","ngModelChange"],["class","mt-1 bottom-btn",4,"ngIf"],[1,"tooltip-content"],[4,"ngIf"],[3,"value"],[1,"clr-checkbox-wrapper","width-8rem"],["type","checkbox","name","eventTypes",1,"clr-checkbox",3,"id","value","checked","change"],[1,"clr-control-label",3,"for"],[1,"clr-subtext-wrapper"],[1,"clr-subtext"],["for","auth_header",1,"clr-control-label"],["autocomplete","off","type","text","id","auth_header","size","30","name","auth_header",1,"clr-input",3,"disabled","ngModel","ngModelChange"],["clrPosition","top-right","clrSize","lg"],[1,"mt-1","bottom-btn"],["type","button","id","add-webhook-cancel",1,"btn","btn-outline",3,"click"],["type","button","id","new-webhook-continue",1,"btn","btn-primary",3,"disabled","click"],["type","button","id","edit-webhook-cancel",1,"btn","btn-outline",3,"click"],["type","button","id","edit-webhook-save",1,"btn","btn-primary",3,"disabled","click"]],template:function(t,o){if(1&t&&(e.TgZ(0,"div",0),e._UZ(1,"inline-alert",1),e.TgZ(2,"form",2,3)(4,"section",4)(5,"div",5)(6,"label",6),e._uU(7),e.ALo(8,"translate"),e.qZA(),e.TgZ(9,"div",7)(10,"div",8)(11,"input",9,10),e.NdJ("input",function(){return o.inputName()})("ngModelChange",function(a){return o.webhook.name=a}),e.qZA(),e._UZ(13,"clr-icon",11)(14,"span",12),e.qZA(),e.YNc(15,R,3,2,"clr-control-error",13),e.qZA()(),e.TgZ(16,"div",5)(17,"label",14),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"div",7)(21,"textarea",15),e.NdJ("ngModelChange",function(a){return o.webhook.description=a}),e.qZA()()(),e.TgZ(22,"clr-select-container")(23,"label",16),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"select",17),e.NdJ("ngModelChange",function(a){return o.webhook.targets[0].type=a}),e.YNc(27,S,2,2,"option",18),e.qZA()(),e.TgZ(28,"div",5)(29,"label",19),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"div",20),e.YNc(33,L,4,5,"div",21),e.YNc(34,j,5,3,"div",22),e.qZA()(),e.TgZ(35,"div",5)(36,"label",6),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"div",7)(40,"div",8)(41,"input",23,24),e.NdJ("ngModelChange",function(a){return o.webhook.targets[0].address=a}),e.qZA(),e._UZ(43,"clr-icon",11),e.qZA(),e.YNc(44,D,3,3,"clr-control-error",13),e.qZA()(),e.YNc(45,B,7,5,"div",25),e.TgZ(46,"div",5)(47,"label",26),e._uU(48),e.ALo(49,"translate"),e.TgZ(50,"clr-tooltip"),e._UZ(51,"clr-icon",27),e.YNc(52,H,3,3,"clr-tooltip-content",28),e.qZA()(),e.TgZ(53,"div",29)(54,"input",30),e.NdJ("ngModelChange",function(a){return o.setCertValue(a)}),e.qZA()()()()(),e.YNc(55,F,7,7,"div",31),e.YNc(56,K,7,7,"div",31),e.qZA()),2&t){const r=e.MAs(12),a=e.MAs(42);e.xp6(7),e.Oqu(e.lcZ(8,32,"WEBHOOK.NAME")),e.xp6(2),e.ekj("clr-error",r.errors&&r.errors.required&&(r.dirty||r.touched)||o.isNameExisting),e.xp6(2),e.Q6J("disabled",o.checking)("ngModel",o.webhook.name),e.xp6(3),e.Q6J("hidden",!o.checkNameOnGoing),e.xp6(1),e.Q6J("ngIf",r.errors&&r.errors.required&&(r.dirty||r.touched)||o.isNameExisting),e.xp6(3),e.Oqu(e.lcZ(19,34,"WEBHOOK.DESCRIPTION")),e.xp6(3),e.Q6J("disabled",o.checking)("ngModel",o.webhook.description),e.xp6(3),e.Oqu(e.lcZ(25,36,"WEBHOOK.NOTIFY_TYPE")),e.xp6(2),e.Q6J("ngModel",o.webhook.targets[0].type)("disabled",o.checking),e.xp6(1),e.Q6J("ngForOf",null==o.metadata?null:o.metadata.notify_type),e.xp6(3),e.Oqu(e.lcZ(31,38,"WEBHOOK.EVENT_TYPE")),e.xp6(2),e.ekj("clr-error",!o.hasEventType()),e.xp6(1),e.Q6J("ngForOf",null==o.metadata?null:o.metadata.event_type),e.xp6(1),e.Q6J("ngIf",!o.hasEventType()),e.xp6(3),e.Oqu(e.lcZ(38,40,"WEBHOOK.ENDPOINT_URL")),e.xp6(2),e.ekj("clr-error",a.errors&&a.errors.required&&(a.dirty||a.touched)),e.xp6(2),e.Q6J("disabled",o.checking)("ngModel",o.webhook.targets[0].address)("placeholder","http"===o.webhook.targets[0].type?"http(s)://192.168.1.1":""),e.xp6(3),e.Q6J("ngIf",a.errors&&a.errors.required&&(a.dirty||a.touched)),e.xp6(1),e.Q6J("ngIf","http"===(null==o.webhook||null==o.webhook.targets[0]?null:o.webhook.targets[0].type)),e.xp6(3),e.hij(" ",e.lcZ(49,42,"WEBHOOK.VERIFY_REMOTE_CERT")," "),e.xp6(6),e.Q6J("disabled",o.checking)("ngModel",!(null!=o.webhook&&null!=o.webhook.targets[0]&&o.webhook.targets[0].skip_cert_verify)),e.xp6(1),e.Q6J("ngIf",!o.isModify),e.xp6(1),e.Q6J("ngIf",o.isModify)}},dependencies:[p._Y,p.YN,p.Kr,p.Fj,p.Wl,p.EJ,p.JJ,p.JL,p.Q7,p.On,p.F,s.qvL,s.nqY,s.MgK,s.VqA,s.KKC,s.otW,s.dTv,s.Jmj,s.bMv,s.zDF,T.sg,T.O5,i.l,A.X$],styles:[".icon-tooltip[_ngcontent-%COMP%]{margin-top:4px}.padding-top-3[_ngcontent-%COMP%]{padding-top:3px}.bottom-btn[_ngcontent-%COMP%]{text-align:right}.width-238[_ngcontent-%COMP%]{width:238px}.width-8rem[_ngcontent-%COMP%]{width:8rem}.clr-control-label[_ngcontent-%COMP%]{width:10rem!important}"]}),n})();function J(n,l){1&n&&(e.TgZ(0,"h3",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.EDIT_WEBHOOK")," "))}function Q(n,l){1&n&&(e.TgZ(0,"h3",4),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"WEBHOOK.ADD_WEBHOOK")," "))}let y=(()=>{class n{constructor(){this.isOpen=!1,this.closable=!1,this.staticBackdrop=!0,this.notify=new e.vpe}openAddWebhookModal(){this.isOpen=!0}onCancel(){this.isOpen=!1}notifySuccess(){this.isOpen=!1,this.notify.emit()}closeModal(){this.isOpen=!1}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275cmp=e.Xpm({type:n,selectors:[["add-webhook"]],viewQuery:function(t,o){if(1&t&&e.Gf(v,5),2&t){let r;e.iGM(r=e.CRH())&&(o.addWebhookFormComponent=r.first)}},inputs:{projectId:"projectId",metadata:"metadata"},outputs:{notify:"notify"},decls:8,vars:11,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],["class","modal-title",4,"ngIf"],[1,"modal-body"],[3,"metadata","projectId","isOpen","close","notify"],[1,"modal-title"]],template:function(t,o){1&t&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(a){return o.isOpen=a}),e.YNc(1,J,3,3,"h3",1),e.YNc(2,Q,3,3,"h3",1),e.TgZ(3,"div",2)(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"add-webhook-form",3),e.NdJ("close",function(){return o.closeModal()})("notify",function(){return o.notifySuccess()}),e.qZA()()()),2&t&&(e.Q6J("clrModalOpen",o.isOpen)("clrModalStaticBackdrop",o.staticBackdrop)("clrModalClosable",o.closable),e.xp6(1),e.Q6J("ngIf",o.isEdit),e.xp6(1),e.Q6J("ngIf",!o.isEdit),e.xp6(3),e.Oqu(e.lcZ(6,9,"WEBHOOK.EDIT_WEBHOOK_DESC")),e.xp6(2),e.Q6J("metadata",o.metadata)("projectId",o.projectId)("isOpen",o.isOpen))},dependencies:[s.qAN,s.VLi,T.O5,v,A.X$],styles:["[_nghost-%COMP%]  .modal-dialog{width:30rem}"]}),n})();var x=h(4128),w=h(268),I=h(8726),Y=h(9151),G=h(4241),N=h(3046);function X(n,l){1&n&&(e.TgZ(0,"div",5),e._UZ(1,"clr-icon",6),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED")))}function z(n,l){1&n&&(e.TgZ(0,"div",5),e._UZ(1,"clr-icon",7),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED")))}function $(n,l){if(1&n&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell"),e.YNc(4,X,5,3,"div",4),e.YNc(5,z,5,3,"div",4),e.qZA(),e.TgZ(6,"clr-dg-cell"),e._uU(7),e.ALo(8,"harborDatetime"),e.qZA()()),2&n){const t=l.$implicit,o=e.oxw();e.xp6(2),e.Oqu(o.eventTypeToText(t.event_type)),e.xp6(2),e.Q6J("ngIf",null==t?null:t.enabled),e.xp6(1),e.Q6J("ngIf",!(null!=t&&t.enabled)),e.xp6(2),e.Oqu(e.xi3(8,4,t.last_trigger_time,"short"))}}function V(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){const t=e.oxw();e.xp6(1),e.AsE("1 - ",t.lastTriggers.length," ",e.lcZ(2,2,"WEBHOOK.OF")," ")}}let ee=(()=>{class n{constructor(t){this.webhookService=t,this.lastTriggers=[]}ngOnChanges(t){t&&t.inputLastTriggers&&(this.lastTriggers=[],this.inputLastTriggers.forEach(o=>{this.webhookName===o.policy_name&&this.lastTriggers.push(o)}))}eventTypeToText(t){return this.webhookService.eventTypeToText(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(u))},n.\u0275cmp=e.Xpm({type:n,selectors:[["last-trigger"]],inputs:{inputLastTriggers:"inputLastTriggers",webhookName:"webhookName"},features:[e.TTD],decls:22,vars:23,consts:[[3,"clrDgField"],[4,"clrDgItems","clrDgItemsOf"],[4,"ngIf"],[3,"clrDgPageSize"],["class","icon-wrap",4,"ngIf"],[1,"icon-wrap"],["shape","check-circle","size","20",1,"is-success","enabled-icon"],["shape","exclamation-triangle","size","20",1,"is-warning"]],template:function(t,o){1&t&&(e.TgZ(0,"h4"),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"clr-datagrid")(4,"clr-dg-column",0),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"clr-dg-column"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"clr-dg-column"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.YNc(13,$,9,7,"clr-dg-row",1),e.TgZ(14,"clr-dg-placeholder"),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"clr-dg-footer"),e.YNc(18,V,3,4,"span",2),e._uU(19),e.ALo(20,"translate"),e._UZ(21,"clr-dg-pagination",3),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,11,"WEBHOOK.LAST_TRIGGER")),e.xp6(3),e.Q6J("clrDgField","event_type"),e.xp6(1),e.Oqu(e.lcZ(6,13,"WEBHOOK.TYPE")),e.xp6(3),e.Oqu(e.lcZ(9,15,"WEBHOOK.STATUS")),e.xp6(3),e.Oqu(e.lcZ(12,17,"WEBHOOK.LAST_TRIGGERED")),e.xp6(2),e.Q6J("clrDgItemsOf",o.lastTriggers),e.xp6(2),e.hij(" ",e.lcZ(16,19,"WEBHOOK.NO_TRIGGER")," "),e.xp6(3),e.Q6J("ngIf",o.lastTriggers.length),e.xp6(1),e.AsE(" ",o.lastTriggers.length," ",e.lcZ(20,21,"WEBHOOK.ITEMS")," "),e.xp6(2),e.Q6J("clrDgPageSize",10))},dependencies:[s.C9t,s.m4W,s.f6,s.Z4N,s.fv_,s.dRQ,s.Ltv,s.F7K,s.PDs,s.KHL,s.Gcc,s.jND,s.Nh1,s.dml,s.K8c,s.qvL,T.O5,A.X$,N.Z]}),n})();const te=["confirmationDialogComponent"];function oe(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"clr-icon",35),e.TgZ(2,"span",36),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED_BUTTON")))}function ne(n,l){1&n&&(e.TgZ(0,"span"),e._UZ(1,"clr-icon",37),e.TgZ(2,"span",36),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED_BUTTON")))}function ie(n,l){if(1&n){const t=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"button",27),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.switchWebhookStatus())}),e.TgZ(2,"span",28),e.YNc(3,oe,5,3,"span",23),e.YNc(4,ne,5,3,"span",23),e.qZA()(),e.TgZ(5,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.editWebhook())}),e._UZ(6,"clr-icon",30),e.TgZ(7,"span",31),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e._UZ(10,"div",32),e.TgZ(11,"button",29),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.deleteWebhook())}),e._UZ(12,"clr-icon",33),e.TgZ(13,"span",34),e._uU(14),e.ALo(15,"translate"),e.qZA()()()}if(2&n){const t=e.oxw();e.xp6(1),e.Q6J("disabled",!(t.selectedRow&&1===t.selectedRow.length&&t.hasUpdatePermission)),e.xp6(2),e.Q6J("ngIf",t.selectedRow[0]&&!t.selectedRow[0].enabled),e.xp6(1),e.Q6J("ngIf",!(t.selectedRow[0]&&!t.selectedRow[0].enabled)),e.xp6(1),e.Q6J("disabled",!(t.selectedRow&&1===t.selectedRow.length&&t.hasUpdatePermission)),e.xp6(3),e.Oqu(e.lcZ(9,7,"BUTTON.EDIT")),e.xp6(3),e.Q6J("disabled",!(t.selectedRow&&t.selectedRow.length>=1&&t.hasUpdatePermission)),e.xp6(3),e.Oqu(e.lcZ(15,9,"BUTTON.DELETE"))}}function re(n,l){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"clr-icon",45),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED")))}function se(n,l){1&n&&(e.TgZ(0,"div",44),e._UZ(1,"clr-icon",46),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&n&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED")))}function le(n,l){if(1&n&&(e.TgZ(0,"span",54),e._uU(1),e.qZA()),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.xp6(1),e.Oqu(o.eventTypeToText(null==t?null:t.event_types[0]))}}function ce(n,l){if(1&n&&(e.TgZ(0,"div",48)(1,"span",57),e._uU(2),e.qZA()()),2&n){const t=l.$implicit,o=e.oxw(4);e.xp6(2),e.Oqu(o.eventTypeToText(t))}}function ae(n,l){if(1&n&&(e.TgZ(0,"clr-signpost-content",55)(1,"div"),e.YNc(2,ce,3,1,"div",56),e.qZA()()),2&n){const t=e.oxw(2).$implicit;e.Q6J("clrPosition","top-middle"),e.xp6(2),e.Q6J("ngForOf",null==t?null:t.event_types)}}function de(n,l){if(1&n&&(e.TgZ(0,"div",47)(1,"div",48),e.YNc(2,le,2,1,"span",49),e.qZA(),e.TgZ(3,"div",50)(4,"div",51)(5,"clr-signpost")(6,"button",52),e._uU(7," ... "),e.qZA(),e.YNc(8,ae,3,2,"clr-signpost-content",53),e.qZA()()()()),2&n){const t=e.oxw().$implicit;e.xp6(2),e.Q6J("ngIf",null==t?null:t.event_types[0]),e.xp6(1),e.Q6J("hidden",(null==t||null==t.event_types?null:t.event_types.length)<=1)}}function pe(n,l){if(1&n&&e._UZ(0,"last-trigger",59),2&n){const t=e.oxw(2).$implicit,o=e.oxw();e.Q6J("webhookName",t.name)("inputLastTriggers",o.lastTriggers)}}function he(n,l){1&n&&(e.TgZ(0,"clr-dg-row-detail"),e.YNc(1,pe,1,2,"last-trigger",58),e.qZA())}function ge(n,l){if(1&n&&(e.TgZ(0,"clr-dg-row",38)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",39),e.YNc(4,re,5,3,"div",40),e.YNc(5,se,5,3,"div",40),e.qZA(),e.TgZ(6,"clr-dg-cell"),e._uU(7),e.qZA(),e.TgZ(8,"clr-dg-cell"),e._uU(9),e.qZA(),e.TgZ(10,"clr-dg-cell",41),e.YNc(11,de,9,2,"div",42),e.qZA(),e.TgZ(12,"clr-dg-cell"),e._uU(13),e.ALo(14,"harborDatetime"),e.qZA(),e.TgZ(15,"clr-dg-cell"),e._uU(16),e.qZA(),e.YNc(17,he,2,0,"clr-dg-row-detail",43),e.qZA()),2&n){const t=l.$implicit;e.Q6J("clrDgItem",t),e.xp6(2),e.Oqu(t.name),e.xp6(1),e.Q6J("ngSwitch",t.enabled),e.xp6(1),e.Q6J("ngSwitchCase",!0),e.xp6(1),e.Q6J("ngSwitchCase",!1),e.xp6(2),e.Oqu(null==t?null:t.targets[0].type),e.xp6(2),e.Oqu(null==t?null:t.targets[0].address),e.xp6(2),e.Q6J("ngIf",null==t||null==t.event_types?null:t.event_types.length),e.xp6(2),e.Oqu(e.xi3(14,10,t.creation_time,"short")),e.xp6(3),e.Oqu(t.description)}}function _e(n,l){if(1&n&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&n){e.oxw();const t=e.MAs(49);e.xp6(1),e.lnq("",t.firstItem+1," - ",t.lastItem+1," ",e.lcZ(2,3,"WEBHOOK.OF"),"")}}const ue=function(){return[15,25,50]},me=[{path:"",component:(()=>{class n{constructor(t,o,r,a,O,fe){this.route=t,this.translate=o,this.webhookService=r,this.projectWebhookService=a,this.messageHandlerService=O,this.userPermissionService=fe,this.lastTriggers=[],this.selectedRow=[],this.webhookList=[],this.loadingMetadata=!0,this.loadingWebhookList=!0,this.loadingTriggers=!1,this.hasCreatPermission=!1,this.hasUpdatePermission=!1,this.page=1,this.pageSize=(0,f.tb)(f.V2.WEBHOOK_COMPONENT),this.total=0}ngOnInit(){this.projectId=+this.route.snapshot.parent.parent.params.id;let t=this.route.snapshot.parent.parent.data;t&&(this.projectName=t.projectResolver.name),this.getData(),this.getPermissions()}getPermissions(){const t=[];t.push(this.userPermissionService.getPermission(this.projectId,w._W.WEBHOOK.KEY,w._W.WEBHOOK.VALUE.CREATE)),t.push(this.userPermissionService.getPermission(this.projectId,w._W.WEBHOOK.KEY,w._W.WEBHOOK.VALUE.UPDATE)),(0,x.D)(...t).subscribe(o=>{[this.hasCreatPermission,this.hasUpdatePermission]=o},o=>{this.messageHandlerService.error(o)})}refresh(){this.page=1,this.total=0,this.selectedRow=[],this.getWebhooks(this.state),this.getData()}getData(){this.getMetadata(),this.getLastTriggers(),this.selectedRow=[]}getMetadata(){this.loadingMetadata=!0,this.webhookService.GetSupportedEventTypes({projectNameOrId:this.projectId.toString()}).pipe((0,b.x)(()=>this.loadingMetadata=!1)).subscribe(t=>{this.metadata=t,this.metadata&&this.metadata.event_type&&this.metadata.event_type.sort((o,r)=>this.eventTypeToText(o)===this.eventTypeToText(r)?0:this.eventTypeToText(o)>this.eventTypeToText(r)?1:-1)},t=>{this.messageHandlerService.handleError(t)})}getLastTriggers(){this.loadingTriggers=!0,this.webhookService.LastTrigger({projectNameOrId:this.projectId.toString()}).pipe((0,b.x)(()=>this.loadingTriggers=!1)).subscribe(t=>{this.lastTriggers=t},t=>{this.messageHandlerService.handleError(t)})}getWebhooks(t){let o,r;t&&(this.state=t),t&&t.page&&(this.pageSize=t.page.size,(0,f.Pe)(f.V2.WEBHOOK_COMPONENT,this.pageSize)),t&&t.filters&&t.filters.length&&(o=encodeURIComponent(`${t.filters[0].property}=~${t.filters[0].value}`)),r=t&&t.sort&&t.sort.by?(0,f.td)(t):"-creation_time",this.loadingWebhookList=!0,this.webhookService.ListWebhookPoliciesOfProjectResponse({projectNameOrId:this.projectId.toString(),page:this.page,pageSize:this.pageSize,sort:r,q:o}).pipe((0,b.x)(()=>this.loadingWebhookList=!1)).subscribe(a=>{if(a.headers){let O=a.headers.get("X-Total-Count");O&&(this.total=parseInt(O,0))}this.webhookList=a.body||[]},a=>{this.messageHandlerService.handleError(a)})}switchWebhookStatus(){let t="";this.translate.get(this.selectedRow[0].enabled?"WEBHOOK.DISABLED_WEBHOOK_SUMMARY":"WEBHOOK.ENABLED_WEBHOOK_SUMMARY",{name:this.selectedRow[0].name}).subscribe(o=>{t=o;let r=new I.c(this.selectedRow[0].enabled?"WEBHOOK.DISABLED_WEBHOOK_TITLE":"WEBHOOK.ENABLED_WEBHOOK_TITLE",t,"",{},26,this.selectedRow[0].enabled?5:4);this.confirmationDialogComponent.open(r)})}confirmSwitch(t){if(t&&26===t.source&&1===t.state)if("{}"===JSON.stringify(t.data))this.webhookService.UpdateWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:this.selectedRow[0].id,policy:Object.assign({},this.selectedRow[0],{enabled:!this.selectedRow[0].enabled})}).subscribe(o=>{this.refresh()},o=>{this.messageHandlerService.handleError(o)});else{const o=[];t.data.forEach(r=>{o.push(this.webhookService.DeleteWebhookPolicyOfProject({projectNameOrId:this.projectId.toString(),webhookPolicyId:r.id}))}),(0,x.D)(...o).subscribe(r=>{this.refresh()},r=>{this.messageHandlerService.handleError(r)})}}editWebhook(){this.metadata&&(this.addWebhookComponent.isOpen=!0,this.addWebhookComponent.isEdit=!0,this.addWebhookComponent.addWebhookFormComponent.isModify=!0,this.addWebhookComponent.addWebhookFormComponent.webhook=(0,f.d9)(this.selectedRow[0]),this.addWebhookComponent.addWebhookFormComponent.originValue=(0,f.d9)(this.selectedRow[0]),this.addWebhookComponent.addWebhookFormComponent.webhook.event_types=(0,f.d9)(this.selectedRow[0].event_types))}openAddWebhookModal(){this.addWebhookComponent.openAddWebhookModal()}newWebhook(){this.metadata&&(this.addWebhookComponent.isOpen=!0,this.addWebhookComponent.isEdit=!1,this.addWebhookComponent.addWebhookFormComponent.isModify=!1,this.addWebhookComponent.addWebhookFormComponent.currentForm.reset({notifyType:this.metadata.notify_type[0]}),this.addWebhookComponent.addWebhookFormComponent.webhook={enabled:!0,event_types:[],targets:[{type:"http",address:"",skip_cert_verify:!0}]},this.addWebhookComponent.addWebhookFormComponent.webhook.event_types=(0,f.d9)(this.metadata.event_type))}success(){this.refresh()}deleteWebhook(){const t=[];this.selectedRow.forEach(a=>{t.push(a.name)});let o="";this.translate.get("WEBHOOK.DELETE_WEBHOOK_SUMMARY",{names:t.join(",")}).subscribe(a=>o=a);const r=new I.c("SCANNER.CONFIRM_DELETION",o,t.join(","),this.selectedRow,26,2);this.confirmationDialogComponent.open(r)}eventTypeToText(t){return this.projectWebhookService.eventTypeToText(t)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(g.gz),e.Y36(A.sK),e.Y36(c.U),e.Y36(u),e.Y36(Y.d),e.Y36(w.Hx))},n.\u0275cmp=e.Xpm({type:n,selectors:[["ng-component"]],viewQuery:function(t,o){if(1&t&&(e.Gf(y,5),e.Gf(v,5),e.Gf(te,5)),2&t){let r;e.iGM(r=e.CRH())&&(o.addWebhookComponent=r.first),e.iGM(r=e.CRH())&&(o.addWebhookFormComponent=r.first),e.iGM(r=e.CRH())&&(o.confirmationDialogComponent=r.first)}},decls:59,vars:57,consts:[[1,"row"],[1,"mt-1"],[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],[1,"clr-row"],[1,"clr-col-7"],["id","new-webhook","type","button",1,"btn","btn-secondary",3,"disabled","clrLoading","click"],["shape","plus","size","16"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["id","action-webhook"],["shape","caret down",1,"clr-icon"],[4,"clrIfOpen"],[1,"clr-col-5"],[1,"action-head-pos"],[1,"refresh-btn"],["shape","refresh",3,"hidden","click"],[3,"clrDgField"],[1,"width-120"],[1,"min-width-340"],[3,"clrDgSortBy"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPageSize","clrDgPage","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"metadata","projectId","notify"],[3,"confirmAction"],["confirmationDialogComponent",""],["clrDropdownItem","",3,"disabled","click"],["id","toggle-webhook"],["clrDropdownItem","",1,"btn","btn-secondary",3,"disabled","click"],["size","16","shape","pencil",1,"margin-top-0"],["id","edit-webhook",1,"margin-left-10"],[1,"dropdown-divider"],["size","16","shape","times",1,"margin-top-0"],["id","delete-webhook",1,"margin-left-10"],["size","16","shape","success-standard",1,"margin-top-2"],[1,"margin-left-10"],["size","16","shape","ban",1,"margin-top-2"],[3,"clrDgItem"],[3,"ngSwitch"],["class","icon-wrap",4,"ngSwitchCase"],[1,"event-types"],["class","cell",4,"ngIf"],[4,"clrIfExpanded"],[1,"icon-wrap"],["shape","check-circle","size","20",1,"is-success","enabled-icon"],["shape","exclamation-triangle","size","20",1,"is-warning"],[1,"cell"],[1,"bar-state"],["class","label-flex",4,"ngIf"],[1,"signpost-item",3,"hidden"],[1,"trigger-item"],["clrSignpostTrigger","",1,"btn","btn-link","ellipsis-btn","font-size-20"],[3,"clrPosition",4,"clrIfOpen"],[1,"label-flex"],[3,"clrPosition"],["class","bar-state",4,"ngFor","ngForOf"],[1,"label","not-scan"],["class","w-100",3,"webhookName","inputLastTriggers",4,"clrIfExpanded"],[1,"w-100",3,"webhookName","inputLastTriggers"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0)(1,"h4",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"clr-datagrid",2),e.NdJ("clrDgRefresh",function(a){return o.getWebhooks(a)})("clrDgSelectedChange",function(a){return o.selectedRow=a}),e.TgZ(5,"clr-dg-action-bar")(6,"div",3)(7,"div",4)(8,"button",5),e.NdJ("click",function(){return o.newWebhook()}),e._UZ(9,"clr-icon",6),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"clr-dropdown",7)(13,"span",8),e._uU(14),e.ALo(15,"translate"),e._UZ(16,"clr-icon",9),e.qZA(),e.YNc(17,ie,16,11,"clr-dropdown-menu",10),e.qZA()(),e.TgZ(18,"div",11)(19,"div",12)(20,"span",13)(21,"clr-icon",14),e.NdJ("click",function(){return o.refresh()}),e.qZA()()()()()(),e.TgZ(22,"clr-dg-column",15),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"clr-dg-column",16),e._uU(26),e.ALo(27,"translate"),e.qZA(),e.TgZ(28,"clr-dg-column"),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"clr-dg-column",17),e._uU(32),e.ALo(33,"translate"),e.qZA(),e.TgZ(34,"clr-dg-column"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"clr-dg-column",18),e._uU(38),e.ALo(39,"translate"),e.qZA(),e.TgZ(40,"clr-dg-column"),e._uU(41),e.ALo(42,"translate"),e.qZA(),e.TgZ(43,"clr-dg-placeholder"),e._uU(44),e.ALo(45,"translate"),e.qZA(),e.YNc(46,ge,18,13,"clr-dg-row",19),e.TgZ(47,"clr-dg-footer")(48,"clr-dg-pagination",20,21),e.NdJ("clrDgPageChange",function(a){return o.page=a}),e.TgZ(50,"clr-dg-page-size",22),e._uU(51),e.ALo(52,"translate"),e.qZA(),e.YNc(53,_e,3,5,"span",23),e._uU(54),e.ALo(55,"translate"),e.qZA()()()(),e.TgZ(56,"add-webhook",24),e.NdJ("notify",function(){return o.success()}),e.qZA(),e.TgZ(57,"confirmation-dialog",25,26),e.NdJ("confirmAction",function(a){return o.confirmSwitch(a)}),e.qZA()),2&t&&(e.xp6(2),e.Oqu(e.lcZ(3,30,"WEBHOOK.WEBHOOKS")),e.xp6(2),e.Q6J("clrDgLoading",o.loadingWebhookList)("clrDgSelected",o.selectedRow),e.xp6(4),e.Q6J("disabled",o.loadingMetadata||!o.hasCreatPermission)("clrLoading",o.loadingMetadata),e.xp6(2),e.hij(" ",e.lcZ(11,32,"WEBHOOK.NEW_WEBHOOK")," "),e.xp6(2),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.hij("",e.lcZ(15,34,"MEMBER.ACTION")," "),e.xp6(7),e.Q6J("hidden",o.loadingWebhookList||o.loadingMetadata),e.xp6(1),e.Q6J("clrDgField","name"),e.xp6(1),e.Oqu(e.lcZ(24,36,"WEBHOOK.NAME")),e.xp6(3),e.Oqu(e.lcZ(27,38,"WEBHOOK.ENABLED")),e.xp6(3),e.Oqu(e.lcZ(30,40,"WEBHOOK.NOTIFY_TYPE")),e.xp6(3),e.Oqu(e.lcZ(33,42,"WEBHOOK.TARGET")),e.xp6(3),e.Oqu(e.lcZ(36,44,"WEBHOOK.EVENT_TYPES")),e.xp6(2),e.Q6J("clrDgSortBy","creation_time"),e.xp6(1),e.Oqu(e.lcZ(39,46,"WEBHOOK.CREATED")),e.xp6(3),e.Oqu(e.lcZ(42,48,"WEBHOOK.DESCRIPTION")),e.xp6(3),e.hij(" ",e.lcZ(45,50,"WEBHOOK.NO_WEBHOOK")," "),e.xp6(2),e.Q6J("ngForOf",o.webhookList),e.xp6(2),e.Q6J("clrDgPageSize",o.pageSize)("clrDgPage",o.page)("clrDgTotalItems",o.total),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(56,ue)),e.xp6(1),e.Oqu(e.lcZ(52,52,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",o.total),e.xp6(1),e.AsE(" ",o.total," ",e.lcZ(55,54,"WEBHOOK.ITEMS")," "),e.xp6(2),e.Q6J("metadata",o.metadata)("projectId",o.projectId))},dependencies:[s.C9t,s.Gwl,s.m4W,s.Z4N,s.O7r,s.Nz$,s.fv_,s.dRQ,s.Ltv,s.YYR,s.F7K,s.PDs,s.KHL,s.Gcc,s.jND,s.Nh1,s.dml,s.K8c,s.qvL,s.cCV,s.nqY,s.DbV,s.MPb,s.f_W,s.zwp,s.ZUS,s.lU3,s.EuU,s.hQ,s.QH5,T.sg,T.O5,T.RF,T.n9,G.z,ee,y,A.X$,N.Z],styles:[".label-top[_ngcontent-%COMP%]{top:12px}.icon-wrap[_ngcontent-%COMP%]{height:14px}.webhook-form-wrap[_ngcontent-%COMP%]{width:19rem;margin:0}.create-text[_ngcontent-%COMP%]{margin:0;width:19rem}.create-text-title[_ngcontent-%COMP%]{margin-top:1rem}.endpoint-label[_ngcontent-%COMP%]{font-weight:700}.disabled-btn[_ngcontent-%COMP%]{color:#e12200}.disabled-btn[_ngcontent-%COMP%]:hover{color:#c92100}.enabled-icon[_ngcontent-%COMP%]{margin:-2px 5px 0 0}.center[_ngcontent-%COMP%]{justify-content:center;align-items:center}.cell[_ngcontent-%COMP%]{display:flex;align-items:center;width:100%;height:100%}.font-size-20[_ngcontent-%COMP%]{font-size:20px}.action-head-pos[_ngcontent-%COMP%]{padding-right:18px;height:100%;display:flex;justify-content:flex-end;align-items:center}.min-width-340[_ngcontent-%COMP%]{min-width:340px!important}.margin-left-10[_ngcontent-%COMP%]{margin-left:10px}.event-types[_ngcontent-%COMP%]{padding-right:14px}.bar-state[_ngcontent-%COMP%]{width:100%}.label-flex[_ngcontent-%COMP%]{width:100%;letter-spacing:0;display:block;white-space:nowrap;text-overflow:ellipsis;overflow:hidden;border:1px solid;border-radius:9px;padding:0 7px 0 10px;text-align:center}.ellipsis-btn[_ngcontent-%COMP%]{min-width:20px;letter-spacing:0;margin:0;margin-top:-.4rem}.width-120[_ngcontent-%COMP%]{width:120px}"]}),n})()}];let be=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({providers:[u],imports:[g.Bz.forChild(me),C.m]}),n})()}}]);