"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[5787],{6078:(N,E,a)=>{a.d(E,{f:()=>t});var n=a(529),x=a(2529),v=a(9300),_=a(4004),S=a(4650),O=a(5060);let t=(()=>{class g extends x.b{constructor(s,l){super(s,l)}exportScanDataResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.criteria,null!=s.XScanDataType&&(p=p.set("X-Scan-Data-Type",s.XScanDataType.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("POST",this.rootUrl+"/export/cve",m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}exportScanData(s){return this.exportScanDataResponse(s).pipe((0,_.U)(l=>l.body))}getScanDataExportExecutionResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+`/export/cve/execution/${s.executionId}`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getScanDataExportExecution(s){return this.getScanDataExportExecutionResponse(s).pipe((0,_.U)(l=>l.body))}getScanDataExportExecutionListResponse(s){let l=this.newParams(),p=new n.WM;null!=s&&(p=p.set("X-Request-Id",s.toString()));let C=new n.aW("GET",this.rootUrl+"/export/cve/executions",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getScanDataExportExecutionList(s){return this.getScanDataExportExecutionListResponse(s).pipe((0,_.U)(l=>l.body))}downloadScanDataResponse(s){let l=this.newParams(),p=new n.WM;null!=s.format&&(l=l.set("format",s.format.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+`/export/cve/download/${s.executionId}`,null,{headers:p,params:l,responseType:"blob"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}downloadScanData(s){return this.downloadScanDataResponse(s).pipe((0,_.U)(l=>l.body))}}return g.exportScanDataPath="/export/cve",g.getScanDataExportExecutionPath="/export/cve/execution/{execution_id}",g.getScanDataExportExecutionListPath="/export/cve/executions",g.downloadScanDataPath="/export/cve/download/{execution_id}",g.\u0275fac=function(s){return new(s||g)(S.LFG(O.p),S.LFG(n.eN))},g.\u0275prov=S.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},7894:(N,E,a)=>{a.d(E,{L:()=>t});var n=a(529),x=a(2529),v=a(9300),_=a(4004),S=a(4650),O=a(5060);let t=(()=>{class g extends x.b{constructor(s,l){super(s,l)}listScannersResponse(s){let l=this.newParams(),p=new n.WM;null!=s.sort&&(l=l.set("sort",s.sort.toString())),null!=s.q&&(l=l.set("q",s.q.toString())),null!=s.pageSize&&(l=l.set("page_size",s.pageSize.toString())),null!=s.page&&(l=l.set("page",s.page.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+"/scanners",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}listScanners(s){return this.listScannersResponse(s).pipe((0,_.U)(l=>l.body))}createScannerResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.registration,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("POST",this.rootUrl+"/scanners",m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}createScanner(s){return this.createScannerResponse(s).pipe((0,_.U)(l=>l.body))}pingScannerResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.settings,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("POST",this.rootUrl+"/scanners/ping",m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}pingScanner(s){return this.pingScannerResponse(s).pipe((0,_.U)(l=>l.body))}getScannerResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+`/scanners/${s.registrationId}`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getScanner(s){return this.getScannerResponse(s).pipe((0,_.U)(l=>l.body))}updateScannerResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.registration,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PUT",this.rootUrl+`/scanners/${s.registrationId}`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}updateScanner(s){return this.updateScannerResponse(s).pipe((0,_.U)(l=>l.body))}deleteScannerResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("DELETE",this.rootUrl+`/scanners/${s.registrationId}`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}deleteScanner(s){return this.deleteScannerResponse(s).pipe((0,_.U)(l=>l.body))}setScannerAsDefaultResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.payload,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PATCH",this.rootUrl+`/scanners/${s.registrationId}`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}setScannerAsDefault(s){return this.setScannerAsDefaultResponse(s).pipe((0,_.U)(l=>l.body))}getScannerMetadataResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+`/scanners/${s.registrationId}/metadata`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getScannerMetadata(s){return this.getScannerMetadataResponse(s).pipe((0,_.U)(l=>l.body))}}return g.listScannersPath="/scanners",g.createScannerPath="/scanners",g.pingScannerPath="/scanners/ping",g.getScannerPath="/scanners/{registration_id}",g.updateScannerPath="/scanners/{registration_id}",g.deleteScannerPath="/scanners/{registration_id}",g.setScannerAsDefaultPath="/scanners/{registration_id}",g.getScannerMetadataPath="/scanners/{registration_id}/metadata",g.\u0275fac=function(s){return new(s||g)(S.LFG(O.p),S.LFG(n.eN))},g.\u0275prov=S.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},3168:(N,E,a)=>{a.d(E,{K:()=>t});var n=a(529),x=a(2529),v=a(9300),_=a(4004),S=a(4650),O=a(5060);let t=(()=>{class g extends x.b{constructor(s,l){super(s,l)}listUsersResponse(s){let l=this.newParams(),p=new n.WM;null!=s.sort&&(l=l.set("sort",s.sort.toString())),null!=s.q&&(l=l.set("q",s.q.toString())),null!=s.pageSize&&(l=l.set("page_size",s.pageSize.toString())),null!=s.page&&(l=l.set("page",s.page.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+"/users",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}listUsers(s){return this.listUsersResponse(s).pipe((0,_.U)(l=>l.body))}createUserResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.userReq,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("POST",this.rootUrl+"/users",m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}createUser(s){return this.createUserResponse(s).pipe((0,_.U)(l=>l.body))}getCurrentUserInfoResponse(s){let l=this.newParams(),p=new n.WM;null!=s&&(p=p.set("X-Request-Id",s.toString()));let C=new n.aW("GET",this.rootUrl+"/users/current",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getCurrentUserInfo(s){return this.getCurrentUserInfoResponse(s).pipe((0,_.U)(l=>l.body))}searchUsersResponse(s){let l=this.newParams(),p=new n.WM;null!=s.username&&(l=l.set("username",s.username.toString())),null!=s.pageSize&&(l=l.set("page_size",s.pageSize.toString())),null!=s.page&&(l=l.set("page",s.page.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+"/users/search",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}searchUsers(s){return this.searchUsersResponse(s).pipe((0,_.U)(l=>l.body))}getUserResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+`/users/${s.userId}`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getUser(s){return this.getUserResponse(s).pipe((0,_.U)(l=>l.body))}updateUserProfileResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.profile,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PUT",this.rootUrl+`/users/${s.userId}`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}updateUserProfile(s){return this.updateUserProfileResponse(s).pipe((0,_.U)(l=>l.body))}deleteUserResponse(s){let l=this.newParams(),p=new n.WM;null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("DELETE",this.rootUrl+`/users/${s.userId}`,null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}deleteUser(s){return this.deleteUserResponse(s).pipe((0,_.U)(l=>l.body))}setUserSysAdminResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.sysadminFlag,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PUT",this.rootUrl+`/users/${s.userId}/sysadmin`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}setUserSysAdmin(s){return this.setUserSysAdminResponse(s).pipe((0,_.U)(l=>l.body))}updateUserPasswordResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.password,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PUT",this.rootUrl+`/users/${s.userId}/password`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}updateUserPassword(s){return this.updateUserPasswordResponse(s).pipe((0,_.U)(l=>l.body))}getCurrentUserPermissionsResponse(s){let l=this.newParams(),p=new n.WM;null!=s.scope&&(l=l.set("scope",s.scope.toString())),null!=s.relative&&(l=l.set("relative",s.relative.toString())),null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("GET",this.rootUrl+"/users/current/permissions",null,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}getCurrentUserPermissions(s){return this.getCurrentUserPermissionsResponse(s).pipe((0,_.U)(l=>l.body))}setCliSecretResponse(s){let l=this.newParams(),p=new n.WM,m=null;m=s.secret,null!=s.XRequestId&&(p=p.set("X-Request-Id",s.XRequestId.toString()));let C=new n.aW("PUT",this.rootUrl+`/users/${s.userId}/cli_secret`,m,{headers:p,params:l,responseType:"json"});return this.http.request(C).pipe((0,v.h)(d=>d instanceof n.Zn),(0,_.U)(d=>d))}setCliSecret(s){return this.setCliSecretResponse(s).pipe((0,_.U)(l=>l.body))}}return g.listUsersPath="/users",g.createUserPath="/users",g.getCurrentUserInfoPath="/users/current",g.searchUsersPath="/users/search",g.getUserPath="/users/{user_id}",g.updateUserProfilePath="/users/{user_id}",g.deleteUserPath="/users/{user_id}",g.setUserSysAdminPath="/users/{user_id}/sysadmin",g.updateUserPasswordPath="/users/{user_id}/password",g.getCurrentUserPermissionsPath="/users/current/permissions",g.setCliSecretPath="/users/{user_id}/cli_secret",g.\u0275fac=function(s){return new(s||g)(S.LFG(O.p),S.LFG(n.eN))},g.\u0275prov=S.Yz7({token:g,factory:g.\u0275fac,providedIn:"root"}),g})()},5787:(N,E,a)=>{a.r(E),a.d(E,{BaseModule:()=>qe});var n=a(6296),x=a(858),v=a(4128),_=a(7782),S=a(5832),O=a(2421),t=a(4650),g=a(529),M=a(4004),s=a(262),l=a(2843),p=a(3526);const m=p.S$+"/users/:user_id/password";let b=(()=>{class i{constructor(e){this.http=e}changePassword(e,o){if(!o||""===o.new_password.trim()||""===o.old_password.trim())return(0,l._)("Invalid data");let r=m.replace(":user_id",e+"");return this.http.put(r,JSON.stringify(o),p.T0).pipe((0,M.U)(()=>null),(0,s.K)(c=>(0,l._)(c)))}sendResetPasswordMail(e){return e?this.http.get("/c/sendEmail?email="+e,p.EX).pipe((0,M.U)(r=>r),(0,s.K)(r=>(0,l._)(r))):(0,l._)("Invalid email")}resetPassword(e,o){if(!e||!o)return(0,l._)("Invalid reset uuid or password");let r=(new g.LE).set("reset_uuid",e).set("password",o);return this.http.post("/c/reset",r.toString(),p.FI).pipe((0,M.U)(c=>c),(0,s.K)(c=>(0,l._)(c)))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(g.eN))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var Z=a(1992),f=a(9151),A=a(4006),h=a(9375),L=a(6895),y=a(2466);const st=["changepwdForm"];function at(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showOldPwd=!r.showOldPwd)}),t.qZA()}}function lt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showOldPwd=!r.showOldPwd)}),t.qZA()}}function ct(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",28),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.CURRENT_PWD")))}function pt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showNewPwd=!r.showNewPwd)}),t.qZA()}}function dt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showNewPwd=!r.showNewPwd)}),t.qZA()}}function ut(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",29),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.PASSWORD")))}function _t(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",26),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showReNewPwd=!r.showReNewPwd)}),t.qZA()}}function ht(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",27),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showReNewPwd=!r.showReNewPwd)}),t.qZA()}}function gt(i,u){1&i&&(t.TgZ(0,"clr-control-error")(1,"span",30),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"TOOLTIP.CONFIRM_PWD")))}let B=(()=>{class i{constructor(e,o,r){this.passwordService=e,this.session=o,this.msgHandler=r,this.showOldPwd=!1,this.showNewPwd=!1,this.showReNewPwd=!1,this.opened=!1,this.oldPwd="",this.newPwd="",this.reNewPwd="",this.error=null,this.formValueChanged=!1,this.onCalling=!1,this.validationStateMap={newPassword:!0,reNewPassword:!0}}get isValid(){return!(!this.pwdForm||!this.pwdForm.form.get("newPassword"))&&this.pwdForm.valid&&this.pwdForm.form.get("newPassword").value===this.pwdForm.form.get("reNewPassword").value&&null===this.error}get valueChanged(){return this.formValueChanged}get showProgress(){return this.onCalling}getValidationState(e){return this.validationStateMap[e]}handleValidation(e,o){if(o){let r=this.pwdForm.controls[e];if(r&&(this.validationStateMap[e]=r.valid,r.valid&&("reNewPassword"===e||"newPassword"===e))){let T=this.pwdForm.controls["reNewPassword"===e?"newPassword":"reNewPassword"];T&&T.valid&&(this.validationStateMap.reNewPassword=r.value===T.value)}}else this.validationStateMap[e]=!0}ngAfterViewChecked(){this.pwdFormRef!==this.pwdForm&&(this.pwdFormRef=this.pwdForm,this.pwdFormRef&&this.pwdFormRef.valueChanges.subscribe(e=>{this.formValueChanged=!0,this.error=null,this.inlineAlert.close()}))}open(){this.formValueChanged=!1,this.onCalling=!1,this.error=null,this.validationStateMap={newPassword:!0,reNewPassword:!0},this.pwdForm.reset(),this.inlineAlert.close(),this.opened=!0}close(){this.formValueChanged?(0,S.Oc)(this.pwdForm)?this.opened=!1:this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):this.opened=!1}confirmCancel(e){this.opened=!1}doOk(){if(this.onCalling||!this.isValid)return;let e=this.session.getCurrentUser();!e||(this.onCalling=!0,this.passwordService.changePassword(e.user_id,{new_password:this.pwdForm.value.newPassword,old_password:this.pwdForm.value.oldPassword}).subscribe(()=>{this.onCalling=!1,this.opened=!1,this.msgHandler.showSuccess("CHANGE_PWD.SAVE_SUCCESS")},o=>{if(this.onCalling=!1,this.error=o,this.msgHandler.isAppLevel(o))this.opened=!1,this.msgHandler.handleError(o);else{let r=""+o.error;r&&r.includes("old_password_is_not_correct")?this.inlineAlert.showInlineError("INCONRRECT_OLD_PWD"):this.inlineAlert.showInlineError(o)}}))}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(b),t.Y36(Z.m),t.Y36(f.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["password-setting"]],viewQuery:function(e,o){if(1&e&&(t.Gf(st,7),t.Gf(O.l,7)),2&e){let r;t.iGM(r=t.CRH())&&(o.pwdForm=r.first),t.iGM(r=t.CRH())&&(o.inlineAlert=r.first)}},decls:52,vars:44,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","body-format"],[3,"confirmEvt"],[1,"clr-form","clr-form-horizontal"],["changepwdForm","ngForm"],[1,"clr-form-control"],["for","oldPassword",1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["id","oldPassword","required","","name","oldPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["oldPassInput","ngModel"],["shape","eye","class","pw-eye",3,"click",4,"ngIf"],["shape","eye-hide","class","pw-eye",3,"click",4,"ngIf"],["shape","exclamation-circle",1,"clr-validate-icon"],[4,"ngIf"],["for","newPassword",1,"clr-control-label","required"],["id","newPassword","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","newPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange","input","blur"],["newPassInput","ngModel"],["for","reNewPassword",1,"clr-control-label","required"],["id","reNewPassword","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","reNewPassword","size","40",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange","input","blur"],["reNewPassInput","ngModel"],[1,"modal-footer"],[1,"spinner","spinner-inline","loading-top",3,"hidden"],["type","button","id","cancel-btn",1,"btn","btn-outline",3,"click"],["type","button","id","ok-btn",1,"btn","btn-primary",3,"disabled","click"],["shape","eye",1,"pw-eye",3,"click"],["shape","eye-hide",1,"pw-eye",3,"click"],["id","oldPassword-error"],["id","newPassword-error"],["id","reNewPassword-error"]],template:function(e,o){if(1&e&&(t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(c){return o.opened=c}),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"inline-alert",3),t.NdJ("confirmEvt",function(c){return o.confirmCancel(c)}),t.qZA(),t.TgZ(6,"form",4,5)(8,"div",6)(9,"label",7),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",8)(13,"div",9)(14,"input",10,11),t.NdJ("ngModelChange",function(c){return o.oldPwd=c}),t.qZA(),t.YNc(16,at,1,0,"clr-icon",12),t.YNc(17,lt,1,0,"clr-icon",13),t._UZ(18,"clr-icon",14),t.qZA(),t.YNc(19,ct,4,3,"clr-control-error",15),t.qZA()(),t.TgZ(20,"div",6)(21,"label",16),t._uU(22),t.ALo(23,"translate"),t.qZA(),t.TgZ(24,"div",8)(25,"div",9)(26,"input",17,18),t.NdJ("ngModelChange",function(c){return o.newPwd=c})("input",function(){return o.handleValidation("newPassword",!1)})("blur",function(){return o.handleValidation("newPassword",!0)}),t.qZA(),t.YNc(28,pt,1,0,"clr-icon",12),t.YNc(29,dt,1,0,"clr-icon",13),t._UZ(30,"clr-icon",14),t.qZA(),t.YNc(31,ut,4,3,"clr-control-error",15),t.qZA()(),t.TgZ(32,"div",6)(33,"label",19),t._uU(34),t.ALo(35,"translate"),t.qZA(),t.TgZ(36,"div",8)(37,"div",9)(38,"input",20,21),t.NdJ("ngModelChange",function(c){return o.reNewPwd=c})("input",function(){return o.handleValidation("reNewPassword",!1)})("blur",function(){return o.handleValidation("reNewPassword",!0)}),t.qZA(),t.YNc(40,_t,1,0,"clr-icon",12),t.YNc(41,ht,1,0,"clr-icon",13),t._UZ(42,"clr-icon",14),t.qZA(),t.YNc(43,gt,4,3,"clr-control-error",15),t.qZA()()()(),t.TgZ(44,"div",22),t._UZ(45,"span",23),t.TgZ(46,"button",24),t.NdJ("click",function(){return o.close()}),t._uU(47),t.ALo(48,"translate"),t.qZA(),t.TgZ(49,"button",25),t.NdJ("click",function(){return o.doOk()}),t._uU(50),t.ALo(51,"translate"),t.qZA()()()),2&e){const r=t.MAs(15);t.Q6J("clrModalOpen",o.opened)("clrModalStaticBackdrop",!0)("clrModalClosable",!1),t.xp6(2),t.Oqu(t.lcZ(3,32,"CHANGE_PWD.TITLE")),t.xp6(8),t.Oqu(t.lcZ(11,34,"CHANGE_PWD.CURRENT_PWD")),t.xp6(2),t.ekj("clr-error",r.invalid&&(r.dirty||r.touched)),t.xp6(2),t.Q6J("type",o.showOldPwd?"text":"password")("ngModel",o.oldPwd),t.xp6(2),t.Q6J("ngIf",!o.showOldPwd),t.xp6(1),t.Q6J("ngIf",o.showOldPwd),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched)),t.xp6(3),t.Oqu(t.lcZ(23,36,"CHANGE_PWD.NEW_PWD")),t.xp6(2),t.ekj("clr-error",!o.getValidationState("newPassword")),t.xp6(2),t.Q6J("type",o.showNewPwd?"text":"password")("ngModel",o.newPwd),t.xp6(2),t.Q6J("ngIf",!o.showNewPwd),t.xp6(1),t.Q6J("ngIf",o.showNewPwd),t.xp6(2),t.Q6J("ngIf",!o.getValidationState("newPassword")),t.xp6(3),t.Oqu(t.lcZ(35,38,"CHANGE_PWD.CONFIRM_PWD")),t.xp6(2),t.ekj("clr-error",!o.getValidationState("reNewPassword")),t.xp6(2),t.Q6J("type",o.showReNewPwd?"text":"password")("ngModel",o.reNewPwd),t.xp6(2),t.Q6J("ngIf",!o.showReNewPwd),t.xp6(1),t.Q6J("ngIf",o.showReNewPwd),t.xp6(2),t.Q6J("ngIf",!o.getValidationState("reNewPassword")),t.xp6(2),t.Q6J("hidden",!1===o.showProgress),t.xp6(2),t.hij(" ",t.lcZ(48,40,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!o.isValid||o.showProgress),t.xp6(1),t.hij(" ",t.lcZ(51,42,"BUTTON.OK")," ")}},dependencies:[A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.c5,A.On,A.F,h.qvL,h.qAN,h.VLi,h.MgK,h.VqA,L.O5,O.l,y.X$],styles:[".reset-modal-title-override[_ngcontent-%COMP%]{font-size:14px!important}.form-group-override[_ngcontent-%COMP%]{padding-left:130px!important}.password-body[_ngcontent-%COMP%]{min-height:130px}.pw-eye[_ngcontent-%COMP%]{margin-left:-24px;margin-right:8px;cursor:pointer}.pwd-input[_ngcontent-%COMP%]{padding-right:26px}.clr-control-label[_ngcontent-%COMP%]{width:8.6rem!important}",".form-group-override[_ngcontent-%COMP%]{padding-left:170px!important}.form-group-label-override[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.sub-label-for-input[_ngcontent-%COMP%]{position:absolute;top:26px;font-size:10px;font-weight:400;line-height:12px;left:170px}.body-format[_ngcontent-%COMP%]{overflow-y:hidden}.loading-top[_ngcontent-%COMP%]{top:8px}"]}),i})();var Q=a(7809),H=a(8274),I=a(6742),mt=a(9739);class Y{constructor(){this.confirm_secret="",this.input_secret=""}}var ft=a(8726),V=a(5412),Ct=a(3168),Tt=a(1201),vt=a(4241),At=a(7632);const St=["confirmationDialog"],Mt=["accountSettingsFrom"],Ot=["resetSecretFrom"],bt=["accountSettingInlineAlert"],xt=["resetSecretInlineAlert"],Et=["copyInput"];function Pt(i,u){1&i&&(t.TgZ(0,"clr-tooltip-content",49)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"PROFILE.ADMIN_RENAME_TIP"),""))}function Zt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",45)(1,"button",46),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.onRename())}),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"clr-tooltip"),t._UZ(5,"clr-icon",47),t.YNc(6,Pt,4,3,"clr-tooltip-content",48),t.qZA()()}if(2&i){const e=t.oxw();t.xp6(1),t.Q6J("disabled",e.RenameOnGoing),t.xp6(1),t.hij(" ",t.lcZ(3,2,"PROFILE.ADMIN_RENAME_BUTTON")," ")}}function It(i,u){if(1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.hij(" ",t.lcZ(2,1,e.emailTooltip)," ")}}function wt(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.FULL_NAME")," "))}function Nt(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.COMMENT")," "))}function Ut(i,u){1&i&&(t.TgZ(0,"clr-tooltip-content",61)(1,"span"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"PROFILE.CLI_PASSWORD_TIP"),""))}function Rt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",62),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.generateCli(r.account.user_id))}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PROFILE.ADMIN_CLI_SECRET_BUTTON")," "))}function Lt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",63),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.openSecretDetail())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"PROFILE.ADMIN_CLI_SECRET_RESET_BUTTON")," "))}function yt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",64),t.NdJ("click",function(){t.CHM(e);const r=t.oxw(2);return t.KtG(r.showGenerateCliFn())}),t._uU(1," \xb7\xb7\xb7 "),t.qZA()}}function Dt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",50)(1,"label",51),t._uU(2),t.ALo(3,"translate"),t.TgZ(4,"clr-tooltip"),t._UZ(5,"clr-icon",52),t.YNc(6,Ut,4,3,"clr-tooltip-content",53),t.qZA()(),t._UZ(7,"input",54),t.YNc(8,Rt,3,3,"button",55),t.YNc(9,Lt,3,3,"button",56),t.TgZ(10,"div",57)(11,"hbr-copy-input",58,59),t.NdJ("onCopySuccess",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.onSuccess(r))})("onCopyError",function(r){t.CHM(e);const c=t.oxw();return t.KtG(c.onError(r))}),t.qZA()(),t.YNc(13,yt,2,0,"div",60),t.qZA()}if(2&i){const e=t.oxw();t.xp6(2),t.hij("",t.lcZ(3,6,"PROFILE.CLI_PASSWORD")," "),t.xp6(5),t.Q6J("ngModel","account.oidc_user_meta.secret"),t.xp6(1),t.Q6J("ngIf",e.showGenerateCli),t.xp6(1),t.Q6J("ngIf",e.showGenerateCli),t.xp6(2),t.Q6J("defaultValue",e.account.oidc_user_meta.secret),t.xp6(2),t.Q6J("ngIf",!e.showGenerateCli)}}function Jt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",65),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showInputSecret=!r.showInputSecret)}),t.qZA()}}function Gt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",66),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showInputSecret=!r.showInputSecret)}),t.qZA()}}function Ft(i,u){1&i&&(t.TgZ(0,"clr-control-error"),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"TOOLTIP.NEW_SECRET")," "))}function qt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",65),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showConfirmSecret=!r.showConfirmSecret)}),t.qZA()}}function kt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",66),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.showConfirmSecret=!r.showConfirmSecret)}),t.qZA()}}let K=(()=>{class i{constructor(e,o,r,c,T){this.session=e,this.msgHandler=o,this.router=r,this.searchTrigger=c,this.userService=T,this.opened=!1,this.staticBackdrop=!0,this.error=null,this.emailTooltip="TOOLTIP.EMAIL",this.mailAlreadyChecked={},this.isOnCalling=!1,this.formValueChanged=!1,this.checkOnGoing=!1,this.RenameOnGoing=!1,this.originAdminName="admin",this.newAdminName="admin@harbor.local",this.renameConfirmation=!1,this.showSecretDetail=!1,this.resetForms=new Y,this.showGenerateCli=!1,this.showInputSecret=!1,this.showConfirmSecret=!1,this.validationStateMap={account_settings_email:!0,account_settings_full_name:!0}}ngOnInit(){this.refreshAccount()}refreshAccount(){this.account=Object.assign({},this.session.getCurrentUser()),this.originalStaticData=Object.assign({},this.session.getCurrentUser())}ngAfterViewChecked(){this.accountFormRef!==this.accountForm&&(this.accountFormRef=this.accountForm,this.accountFormRef&&this.accountFormRef.valueChanges.subscribe(e=>{this.error&&(this.error=null),this.formValueChanged=!0,this.account.username===this.originAdminName&&this.inlineAlert.close()}))}getValidationState(e){return this.validationStateMap[e]}handleValidation(e,o){if(o){let r=this.accountForm.controls[e];if(r&&(this.validationStateMap[e]=r.valid,r.valid&&"account_settings_email"===e&&this.formValueChanged&&this.account.email!==this.originalStaticData.email)){if(this.mailAlreadyChecked[this.account.email])return this.validationStateMap[e]=!this.mailAlreadyChecked[this.account.email].result,void(this.validationStateMap[e]||(this.emailTooltip="TOOLTIP.EMAIL_EXISTING"));this.checkOnGoing=!0,this.session.checkUserExisting("email",this.account.email).subscribe(c=>{this.checkOnGoing=!1,this.validationStateMap[e]=!c,c&&(this.emailTooltip="TOOLTIP.EMAIL_EXISTING"),this.mailAlreadyChecked[this.account.email]={result:c}},c=>{this.checkOnGoing=!1,this.validationStateMap[e]=!1})}}else this.validationStateMap[e]=!0,this.emailTooltip="TOOLTIP.EMAIL"}isUserDataChange(){if(!this.originalStaticData||!this.account)return!1;for(let e in this.originalStaticData)if(this.originalStaticData[e]!==this.account[e])return!0;return!1}get isValid(){return this.accountForm&&this.accountForm.valid&&null===this.error&&this.validationStateMap.account_settings_email}get showProgress(){return this.isOnCalling}get checkProgress(){return this.checkOnGoing}get canRename(){return this.account&&this.account.has_admin_role&&"admin"===this.originalStaticData.username&&1===this.account.user_id}onRename(){this.account.username=this.newAdminName,this.RenameOnGoing=!0}confirmRename(){this.canRename&&this.session.updateAccountSettings(this.account).subscribe(()=>{this.session.renameAdmin(this.account).subscribe(()=>{this.msgHandler.showSuccess("PROFILE.RENAME_SUCCESS"),this.opened=!1,this.logOut()},e=>{this.msgHandler.handleError(e)})},e=>{this.isOnCalling=!1,this.error=e,this.msgHandler.isAppLevel(e)?(this.opened=!1,this.msgHandler.handleError(e)):this.inlineAlert.showInlineError(e)})}logOut(){this.router.navigate([I.ZB.EMBEDDED_SIGN_IN],{queryParams:{signout:!0}}),this.searchTrigger.closeSearch(!0)}open(){this.originalStaticData=Object.assign({},this.session.getCurrentUser()),this.account=Object.assign({},this.session.getCurrentUser()),this.formValueChanged=!1,this.inlineAlert.close(),this.mailAlreadyChecked={},this.validationStateMap={account_settings_email:!0,account_settings_full_name:!0},this.showGenerateCli=!1,this.opened=!0}close(){this.formValueChanged&&this.isUserDataChange()?this.RenameOnGoing?(this.RenameOnGoing=!1,this.opened=!1):this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):this.opened=!1}submit(){if(this.isValid&&!this.isOnCalling&&this.session.getCurrentUser()){if(this.RenameOnGoing&&!this.renameConfirmation)return this.renameConfirmation=!0,void this.inlineAlert.showInlineWarning({message:"PROFILE.RENAME_CONFIRM_INFO"});this.isOnCalling=!0,this.RenameOnGoing&&this.renameConfirmation?this.confirmRename():this.session.updateAccountSettings(this.account).subscribe(()=>{this.isOnCalling=!1,this.opened=!1,this.msgHandler.showSuccess("PROFILE.SAVE_SUCCESS"),this.session.retrieveUser().subscribe(()=>{this.refreshAccount()})},o=>{this.isOnCalling=!1,this.error=o,this.msgHandler.isAppLevel(o)?(this.opened=!1,this.msgHandler.handleError(o)):this.inlineAlert.showInlineError(o)})}}confirmNo(e){this.RenameOnGoing&&(this.RenameOnGoing=!1),this.renameConfirmation&&(this.renameConfirmation=!1)}confirmYes(e){this.RenameOnGoing&&(this.RenameOnGoing=!1),this.renameConfirmation&&(this.renameConfirmation=!1),this.inlineAlert.close(),this.opened=!1}onSuccess(e){this.inlineAlert.showInlineSuccess({message:"PROFILE.COPY_SUCCESS"})}onError(e){this.inlineAlert.showInlineError({message:"PROFILE.COPY_ERROR"})}generateCli(e){let o=new ft.c("PROFILE.CONFIRM_TITLE_CLI_GENERATE","PROFILE.CONFIRM_BODY_CLI_GENERATE","",e,7,0);this.confirmationDialogComponent.open(o)}showGenerateCliFn(){this.showGenerateCli=!this.showGenerateCli}confirmGenerate(){this.resetCliSecret(null)}resetCliSecret(e){this.userService.setCliSecret({userId:this.account.user_id,secret:e?{secret:e}:{}}).subscribe({next:o=>{e?this.account.oidc_user_meta.secret=e:this.userService.getCurrentUserInfo().subscribe(r=>{this.account.oidc_user_meta.secret=r?.oidc_user_meta?.secret}),this.closeReset(),this.inlineAlert.showInlineSuccess({message:"PROFILE.GENERATE_SUCCESS"})},error:o=>{this.resetSecretInlineAlert.showInlineError({message:"PROFILE.GENERATE_ERROR"})}})}disableChangeCliSecret(){return this.resetSecretFrom.invalid||this.resetSecretFrom.value.input_secret!==this.resetSecretFrom.value.confirm_secret}closeReset(){this.showSecretDetail=!1,this.showGenerateCliFn(),this.resetSecretFrom.resetForm(new Y)}openSecretDetail(){this.showSecretDetail=!0,this.resetSecretInlineAlert.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.m),t.Y36(f.d),t.Y36(x.F0),t.Y36(V.V),t.Y36(Ct.K))},i.\u0275cmp=t.Xpm({type:i,selectors:[["account-settings-modal"]],viewQuery:function(e,o){if(1&e&&(t.Gf(St,5),t.Gf(Mt,7),t.Gf(Ot,7),t.Gf(bt,5),t.Gf(xt,5),t.Gf(Et,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.confirmationDialogComponent=r.first),t.iGM(r=t.CRH())&&(o.accountForm=r.first),t.iGM(r=t.CRH())&&(o.resetSecretFrom=r.first),t.iGM(r=t.CRH())&&(o.inlineAlert=r.first),t.iGM(r=t.CRH())&&(o.resetSecretInlineAlert=r.first),t.iGM(r=t.CRH())&&(o.copyInput=r.first)}},decls:89,vars:72,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","body-format"],[3,"confirmEvt","closeEvt"],["accountSettingInlineAlert",""],[1,"clr-form","clr-form-horizontal"],["accountSettingsFrom","ngForm"],[1,"clr-form-control"],["for","account_settings_username","aria-haspopup","true",1,"clr-control-label"],[1,"clr-control-container","display-flex"],["type","text","name","account_settings_username","disabled","","id","account_settings_username","size","30",1,"clr-input",3,"ngModel","ngModelChange"],["class","rename-tool",4,"ngIf"],["for","account_settings_email",1,"required","clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["name","account_settings_email","type","text","required","","email","","id","account_settings_email","size","30",1,"clr-input",3,"ngModel","ngModelChange","input","blur"],["eamilInput","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],[4,"ngIf"],["clrInput","","type","text","name","account_settings_full_name","maxLengthExt","30","id","account_settings_full_name","size","30",3,"ngModel","required","ngModelChange","input","blur"],["fullNameInput","ngModel"],["clrInput","","type","text","maxlength","30","size","30","name","account_settings_comments","id","account_settings_comments",3,"ngModel","ngModelChange"],["commentInput","ngModel"],["class","clr-form-control cli-secret",4,"ngIf"],[1,"modal-footer"],[1,"spinner","spinner-inline","loading-top",3,"hidden"],["type","button","id","cancel-btn",1,"btn","btn-outline",3,"click"],["type","button","id","submit-btn",1,"btn","btn-primary",3,"disabled","click"],[3,"clrModalOpen","clrModalSize","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-body","upload-secret"],["resetSecretInlineAlert",""],[1,"clr-form","reset-cli-form","clr-form-horizontal"],["resetSecretFrom","ngForm"],["for","input-secret",1,"clr-control-label"],["id","new-token","type","password","maxlength","30","size","30","required","","pattern","^(?=.*\\d)(?=.*[a-z])(?=.*[A-Z])(?!.*\\s).{8,128}$","name","input_secret","id","input-secret",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["inputSecret","ngModel"],["shape","eye","class","pw-eye",3,"click",4,"ngIf"],["shape","eye-hide","class","pw-eye",3,"click",4,"ngIf"],["for","confirm-secret",1,"clr-control-label"],["type","password","maxlength","30","size","30","name","confirm_secret","id","confirm-secret",1,"clr-input","pwd-input",3,"type","ngModel","ngModelChange"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"disabled","click"],[3,"confirmAction"],["confirmationDialog",""],[1,"rename-tool"],["id","rename-btn",1,"btn","btn-outline",3,"disabled","click"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","bottom-left","clrSize","md",4,"clrIfOpen"],["clrPosition","bottom-left","clrSize","md"],[1,"clr-form-control","cli-secret"],[1,"clr-control-label"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrPosition","top-right","clrSize","md",4,"clrIfOpen"],["id","cli_password","type","password","name","cli_password","disabled","","size","33",1,"clr-input","input-cli",3,"ngModel"],["id","generate-cli-btn","class","btn btn-outline btn-padding-less",3,"click",4,"ngIf"],["id","reset-cli-btn","class","btn btn-outline btn-padding-less",3,"click",4,"ngIf"],[1,"rename-tool","reset-cli"],["iconMode","true",3,"defaultValue","onCopySuccess","onCopyError"],["copyInput",""],["id","hidden-generate-cli","class","hidden-generate-cli",3,"click",4,"ngIf"],["clrPosition","top-right","clrSize","md"],["id","generate-cli-btn",1,"btn","btn-outline","btn-padding-less",3,"click"],["id","reset-cli-btn",1,"btn","btn-outline","btn-padding-less",3,"click"],["id","hidden-generate-cli",1,"hidden-generate-cli",3,"click"],["shape","eye",1,"pw-eye",3,"click"],["shape","eye-hide",1,"pw-eye",3,"click"]],template:function(e,o){if(1&e){const r=t.EpF();t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(T){return o.opened=T}),t.TgZ(1,"h3",1),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",2)(5,"inline-alert",3,4),t.NdJ("confirmEvt",function(T){return o.confirmYes(T)})("closeEvt",function(T){return o.confirmNo(T)}),t.qZA(),t.TgZ(7,"form",5,6)(9,"div",7)(10,"label",8),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.TgZ(13,"div",9)(14,"input",10),t.NdJ("ngModelChange",function(T){return o.account.username=T}),t.qZA(),t.YNc(15,Zt,7,4,"div",11),t.qZA()(),t.TgZ(16,"div",7)(17,"label",12),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",13)(21,"div",14)(22,"input",15,16),t.NdJ("ngModelChange",function(T){return o.account.email=T})("input",function(){return o.handleValidation("account_settings_email",!1)})("blur",function(){return o.handleValidation("account_settings_email",!0)}),t.qZA(),t._UZ(24,"clr-icon",17)(25,"span",18),t.qZA(),t.YNc(26,It,3,3,"clr-control-error",19),t.qZA()(),t.TgZ(27,"clr-input-container")(28,"label"),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.TgZ(31,"input",20,21),t.NdJ("ngModelChange",function(T){return o.account.realname=T})("input",function(){return o.handleValidation("account_settings_full_name",!1)})("blur",function(){return o.handleValidation("account_settings_full_name",!0)}),t.qZA(),t.YNc(33,wt,3,3,"clr-control-error",19),t.qZA(),t.TgZ(34,"clr-input-container")(35,"label"),t._uU(36),t.ALo(37,"translate"),t.qZA(),t.TgZ(38,"input",22,23),t.NdJ("ngModelChange",function(T){return o.account.comment=T}),t.qZA(),t.YNc(40,Nt,3,3,"clr-control-error",19),t.qZA(),t.YNc(41,Dt,14,8,"div",24),t.qZA()(),t.TgZ(42,"div",25),t._UZ(43,"span",26),t.TgZ(44,"button",27),t.NdJ("click",function(){return o.close()}),t._uU(45),t.ALo(46,"translate"),t.qZA(),t.TgZ(47,"button",28),t.NdJ("click",function(){return o.submit()}),t._uU(48),t.ALo(49,"translate"),t.qZA()()(),t.TgZ(50,"clr-modal",29),t.NdJ("clrModalOpenChange",function(T){return o.showSecretDetail=T}),t.TgZ(51,"h3",1),t._uU(52),t.ALo(53,"translate"),t.qZA(),t.TgZ(54,"div",30),t._UZ(55,"inline-alert",1,31),t.TgZ(57,"form",32,33)(59,"div",7)(60,"label",34),t._uU(61),t.ALo(62,"translate"),t.qZA(),t.TgZ(63,"div",13)(64,"div",14)(65,"input",35,36),t.NdJ("ngModelChange",function(T){return o.resetForms.input_secret=T}),t.qZA(),t.YNc(67,Jt,1,0,"clr-icon",37),t.YNc(68,Gt,1,0,"clr-icon",38),t._UZ(69,"clr-icon",17),t.qZA(),t.YNc(70,Ft,3,3,"clr-control-error",19),t.qZA()(),t.TgZ(71,"div",7)(72,"label",39),t._uU(73),t.ALo(74,"translate"),t.qZA(),t.TgZ(75,"div",13)(76,"div",14)(77,"input",40),t.NdJ("ngModelChange",function(T){return o.resetForms.confirm_secret=T}),t.qZA(),t.YNc(78,qt,1,0,"clr-icon",37),t.YNc(79,kt,1,0,"clr-icon",38),t.qZA()()()()(),t.TgZ(80,"div",25)(81,"button",41),t.NdJ("click",function(){return o.closeReset()}),t._uU(82),t.ALo(83,"translate"),t.qZA(),t.TgZ(84,"button",42),t.NdJ("click",function(){t.CHM(r);const T=t.MAs(58);return t.KtG(o.resetCliSecret(T.value.input_secret))}),t._uU(85),t.ALo(86,"translate"),t.qZA()()(),t.TgZ(87,"confirmation-dialog",43,44),t.NdJ("confirmAction",function(){return o.confirmGenerate()}),t.qZA()}if(2&e){const r=t.MAs(39),c=t.MAs(66);t.Q6J("clrModalOpen",o.opened)("clrModalStaticBackdrop",o.staticBackdrop)("clrModalClosable",!1),t.xp6(2),t.Oqu(t.lcZ(3,48,"PROFILE.TITLE")),t.xp6(9),t.Oqu(t.lcZ(12,50,"PROFILE.USER_NAME")),t.xp6(3),t.Q6J("ngModel",o.account.username),t.xp6(1),t.Q6J("ngIf",o.canRename),t.xp6(3),t.Oqu(t.lcZ(19,52,"PROFILE.EMAIL")),t.xp6(2),t.ekj("clr-error",!o.getValidationState("account_settings_email")),t.xp6(2),t.Q6J("ngModel",o.account.email),t.xp6(3),t.Q6J("hidden",!o.checkProgress),t.xp6(1),t.Q6J("ngIf",!o.getValidationState("account_settings_email")),t.xp6(2),t.ekj("required",!o.account.oidc_user_meta),t.xp6(1),t.Oqu(t.lcZ(30,54,"PROFILE.FULL_NAME")),t.xp6(2),t.Q6J("ngModel",o.account.realname)("required",!o.account.oidc_user_meta),t.xp6(2),t.Q6J("ngIf",!o.getValidationState("account_settings_full_name")),t.xp6(3),t.Oqu(t.lcZ(37,56,"PROFILE.COMMENT")),t.xp6(2),t.Q6J("ngModel",o.account.comment),t.xp6(2),t.Q6J("ngIf",r.invalid&&(r.dirty||r.touched)),t.xp6(1),t.Q6J("ngIf",o.account.oidc_user_meta),t.xp6(2),t.Q6J("hidden",!1===o.showProgress),t.xp6(2),t.hij(" ",t.lcZ(46,58,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",!o.isValid||o.showProgress||!o.isUserDataChange()),t.xp6(1),t.hij(" ",t.lcZ(49,60,"BUTTON.OK")," "),t.xp6(2),t.Q6J("clrModalOpen",o.showSecretDetail)("clrModalSize","sm")("clrModalStaticBackdrop",o.staticBackdrop)("clrModalClosable",!1),t.xp6(2),t.hij(" ",t.lcZ(53,62,"PROFILE.ADMIN_CLI_SECRET_RESET_BUTTON")," "),t.xp6(9),t.Oqu(t.lcZ(62,64,"SYSTEM_ROBOT.CONFIRM_SECRET")),t.xp6(2),t.ekj("clr-error",(c.dirty||c.touched)&&c.invalid),t.xp6(2),t.Q6J("type",o.showInputSecret?"text":"password")("ngModel",o.resetForms.input_secret),t.xp6(2),t.Q6J("ngIf",!o.showInputSecret),t.xp6(1),t.Q6J("ngIf",o.showInputSecret),t.xp6(2),t.Q6J("ngIf",(c.dirty||c.touched)&&c.invalid),t.xp6(3),t.Oqu(t.lcZ(74,66,"PROFILE.CONFIRM_SECRET")),t.xp6(4),t.Q6J("type",o.showConfirmSecret?"text":"password")("ngModel",o.resetForms.confirm_secret),t.xp6(1),t.Q6J("ngIf",!o.showConfirmSecret),t.xp6(1),t.Q6J("ngIf",o.showConfirmSecret),t.xp6(3),t.hij(" ",t.lcZ(83,68,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("disabled",o.disableChangeCliSecret()),t.xp6(1),t.hij(" ",t.lcZ(86,70,"BUTTON.CONFIRM")," ")}},dependencies:[A._Y,A.Fj,A.JJ,A.JL,A.Q7,A.nD,A.c5,A.on,A.On,A.F,h.qvL,h.qAN,h.VLi,h.nqY,h.MgK,h.VqA,h.xRP,h.G55,h.Jmj,h.bMv,h.zDF,L.O5,Tt.GA,O.l,vt.z,At.s,y.X$],styles:["clr-modal[_ngcontent-%COMP%]     div.modal-dialog{width:unset}clr-modal[_ngcontent-%COMP%]   .rename-tool[_ngcontent-%COMP%]{position:relative;bottom:9px}clr-modal[_ngcontent-%COMP%]   .rename-tool[_ngcontent-%COMP%]   .btn[_ngcontent-%COMP%]{margin-right:6px;margin-left:5px;padding-left:3px;padding-right:3px}clr-modal[_ngcontent-%COMP%]   .label-inner-text[_ngcontent-%COMP%]{margin:0}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]{align-items:center}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]   .reset-cli[_ngcontent-%COMP%]{height:30px}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]   .btn-padding-less[_ngcontent-%COMP%]{padding-left:5px;padding-right:5px;margin-left:5px}clr-modal[_ngcontent-%COMP%]   .cli-secret[_ngcontent-%COMP%]   .input-cli[_ngcontent-%COMP%]{width:9.5rem}clr-modal[_ngcontent-%COMP%]   .hidden-generate-cli[_ngcontent-%COMP%]{font-size:30px;color:gray;margin-left:.5rem;cursor:pointer;line-height:30px}.reset-cli-form[_ngcontent-%COMP%]{width:19.5rem}.display-flex[_ngcontent-%COMP%], .set-btns[_ngcontent-%COMP%]{display:flex}[_nghost-%COMP%]  .upload-secret{width:24.5rem}.pwd-input[_ngcontent-%COMP%]{padding-right:26px}.pw-eye[_ngcontent-%COMP%]{margin-left:-20px;margin-right:8px;cursor:pointer}",".form-group-override[_ngcontent-%COMP%]{padding-left:170px!important}.form-group-label-override[_ngcontent-%COMP%]{font-size:14px;font-weight:400}.sub-label-for-input[_ngcontent-%COMP%]{position:absolute;top:26px;font-size:10px;font-weight:400;line-height:12px;left:170px}.body-format[_ngcontent-%COMP%]{overflow-y:hidden}.loading-top[_ngcontent-%COMP%]{top:8px}"]}),i})();var J=a(38),jt=a(7121),W=a(8025),Bt=a(7894),Qt=a(8140),Ht=a(2123),Yt=a(9039),w=a(312),z=a(3819),D=a(7340);const Vt=(0,D.X$)("SlideInOutAnimation",[(0,D.SB)("in",(0,D.oB)({right:0})),(0,D.SB)("out",(0,D.oB)({right:"-325px"})),(0,D.eR)("in <=> out",[(0,D.jt)("0.5s ease-in-out")])]);var Kt=a(3046),Wt=a(6078);function zt(i,u){if(1&i&&(t.TgZ(0,"span",13),t._uU(1),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(e.getNewMessageCountStr())}}function Xt(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"clr-icon",31),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.download(r))}),t.qZA()}}function $t(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(19),c=t.oxw(2);return t.KtG(c.toggleTitle(r))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.YNc(12,Xt,1,0,"clr-icon",26),t.qZA()(),t.TgZ(13,"span",27),t._uU(14),t.qZA(),t.TgZ(15,"span",28),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"span",29,30),t._uU(20),t.qZA()()()}if(2&i){const e=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(1),t.Q6J("hidden","interrupt"!==e.state),t.xp6(5),t.Oqu(t.lcZ(11,9,e.name)),t.xp6(2),t.Q6J("ngIf","success"===e.state&&(null==e||null==e.data?null:e.data.hasFile)),t.xp6(2),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(17,11,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function te(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(16),c=t.oxw(2);return t.KtG(c.toggleTitle(r))}),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.TgZ(10,"span",27),t._uU(11),t.qZA(),t.TgZ(12,"span",28),t._uU(13),t.ALo(14,"translate"),t.qZA(),t.TgZ(15,"span",29,30),t._uU(17),t.qZA()()()}if(2&i){const e=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(1),t.Q6J("hidden","interrupt"!==e.state),t.xp6(3),t.Oqu(t.lcZ(9,8,e.name)),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(14,10,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function ee(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",14),t.YNc(1,$t,21,13,"div",15),t.YNc(2,te,18,12,"div",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.exportJobs),t.xp6(1),t.Q6J("ngForOf",e.resultLists)}}function ne(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(18),c=t.oxw(3);return t.KtG(c.toggleTitle(r))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"span",27),t._uU(13),t.qZA(),t.TgZ(14,"span",28),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",29,30),t._uU(19),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(1),t.Q6J("hidden","interrupt"!==e.state),t.xp6(5),t.Oqu(t.lcZ(11,8,e.name)),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(16,10,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function oe(i,u){if(1&i&&(t.ynx(0),t.YNc(1,ne,20,12,"div",34),t.BQk()),2&i){const e=u.$implicit;t.xp6(1),t.Q6J("ngIf","progressing"===e.state)}}function ie(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20),t.qZA(),t.TgZ(5,"div",22)(6,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(15),c=t.oxw(2);return t.KtG(c.toggleTitle(r))}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",27),t._uU(10),t.qZA(),t.TgZ(11,"span",28),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",29,30),t._uU(16),t.qZA()()()}if(2&i){const e=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(3),t.Oqu(t.lcZ(8,7,e.name)),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(13,9,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function re(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",32),t.YNc(1,oe,2,1,"ng-container",33),t.YNc(2,ie,17,11,"div",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.exportJobs),t.xp6(1),t.Q6J("ngForOf",e.runningLists)}}function se(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20)(5,"clr-icon",21),t.qZA(),t.TgZ(6,"div",22)(7,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(18),c=t.oxw(3);return t.KtG(c.toggleTitle(r))}),t.TgZ(8,"span",24)(9,"span",25),t._uU(10),t.ALo(11,"translate"),t.qZA()()(),t.TgZ(12,"span",27),t._uU(13),t.qZA(),t.TgZ(14,"span",28),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.TgZ(17,"span",29,30),t._uU(19),t.qZA()()()}if(2&i){const e=t.oxw().$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(1),t.Q6J("hidden","interrupt"!==e.state),t.xp6(5),t.Oqu(t.lcZ(11,8,e.name)),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(16,10,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function ae(i,u){if(1&i&&(t.ynx(0),t.YNc(1,se,20,12,"div",34),t.BQk()),2&i){const e=u.$implicit;t.xp6(1),t.Q6J("ngIf","failure"===e.state)}}function le(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"i",18)(3,"clr-icon",19)(4,"clr-icon",20),t.qZA(),t.TgZ(5,"div",22)(6,"label",23),t.NdJ("click",function(){t.CHM(e);const r=t.MAs(15),c=t.oxw(2);return t.KtG(c.toggleTitle(r))}),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span",27),t._uU(10),t.qZA(),t.TgZ(11,"span",28),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"span",29,30),t._uU(16),t.qZA()()()}if(2&i){const e=u.$implicit;t.xp6(2),t.Q6J("hidden","progressing"!==e.state),t.xp6(1),t.Q6J("hidden","success"!==e.state),t.xp6(1),t.Q6J("hidden","failure"!==e.state),t.xp6(3),t.Oqu(t.lcZ(8,7,e.name)),t.xp6(3),t.Oqu(e.data.name),t.xp6(2),t.Oqu(t.lcZ(13,9,e.timeDiff)),t.xp6(4),t.Oqu(e.data.errorInf)}}function ce(i,u){if(1&i&&(t.TgZ(0,"clr-tab-content",35),t.YNc(1,ae,2,1,"ng-container",33),t.YNc(2,le,17,11,"div",15),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.exportJobs),t.xp6(1),t.Q6J("ngForOf",e.failLists)}}const X="operation",G=500,$="csv_file_";let _e=(()=>{class i{constructor(e,o,r,c,T,P){this.session=e,this.operationService=o,this.translate=r,this.scanDataExportService=c,this.event=T,this.msgHandler=P,this.fileNamePrefix=$,this.resultLists=[],this.exportJobs=[],this.animationState="out",this._newMessageCount=0,this.refreshExportJobSub||(this.refreshExportJobSub=this.event.subscribe(J.n.REFRESH_EXPORT_JOBS,()=>{"out"===this.animationState&&(this._newMessageCount+=1),this.refreshExportJobs()})),this.batchInfoSubscription||(this.batchInfoSubscription=o.operationInfo$.subscribe(R=>{"out"===this.animationState&&(this._newMessageCount+=1),R&&(this.resultLists.length>=G&&this.resultLists.splice(499,this.resultLists.length+1-G),this.resultLists.unshift(R))}))}beforeUnloadHander(e){this.session.getCurrentUser()&&localStorage.setItem(`${X}-${this.session.getCurrentUser().user_id}`,JSON.stringify({updated:(new Date).getTime(),data:this.resultLists,newMessageCount:this._newMessageCount}))}getNewMessageCountStr(){return this._newMessageCount?this._newMessageCount>G?G+"+":this._newMessageCount.toString():""}resetNewMessageCount(){this._newMessageCount=0}mouseover(){this._timeoutInterval&&(clearInterval(this._timeoutInterval),this._timeoutInterval=null)}mouseleave(){this._timeoutInterval||(this._timeoutInterval=setTimeout(()=>{this.animationState="out"},5e3))}get runningLists(){let e=[];return this.resultLists.forEach(o=>{"progressing"===o.state&&e.push(o)}),e}get failLists(){let e=[];return this.resultLists.forEach(o=>{"failure"===o.state&&e.push(o)}),e}init(){if(this.session.getCurrentUser()){this.refreshExportJobs();const e=localStorage.getItem(`${X}-${this.session.getCurrentUser().user_id}`);if(e){const o=JSON.parse(e);o&&(o.newMessageCount&&(this._newMessageCount=o.newMessageCount),o.data&&o.data.length&&(o.data=o.data.filter(r=>(new Date).getTime()-r.timeStamp<2592e6),o.data.forEach(r=>{r.state===z.yb.progressing&&(r.state=z.yb.interrupt,r.data.errorInf="operation been interrupted")}),this.resultLists=o.data))}}}ngOnInit(){this.init()}ngOnDestroy(){this.batchInfoSubscription&&(this.batchInfoSubscription.unsubscribe(),this.batchInfoSubscription=null),this._timeoutInterval&&(clearInterval(this._timeoutInterval),this._timeoutInterval=null),this.timeout&&(clearTimeout(this.timeout),this.timeout=null),this.refreshExportJobSub&&(this.refreshExportJobSub.unsubscribe(),this.refreshExportJobSub=null)}toggleTitle(e){e.style.display="block"===e.style.display?"none":"block"}slideOut(){this.animationState="out"===this.animationState?"in":"out","in"===this.animationState&&(this.resetNewMessageCount(),this.TabEvent())}openSlide(){this.animationState="in",this.resetNewMessageCount()}TabEvent(){let e,o,r,c;(0,v.D)([this.translate.get("OPERATION.SECOND_AGO"),this.translate.get("OPERATION.MINUTE_AGO"),this.translate.get("OPERATION.HOUR_AGO"),this.translate.get("OPERATION.DAY_AGO")]).subscribe(T=>{[e,o,r,c]=T}),this.resultLists.forEach(T=>{const P=(new Date).getTime()-+T.timeStamp;T.timeDiff=this.calculateTime(P,e,o,r,c)})}calculateTime(e,o,r,c,T){const P=Math.floor(e/1e3/60);return P>0&&P<60?Math.floor(P)+r:P>=60&&Math.floor(P/60)<24?Math.floor(P/60)+c:Math.floor(P/60)>=24?Math.floor(P/60/24)+T:o}refreshExportJobs(){this.session.getCurrentUser()&&this.scanDataExportService.getScanDataExportExecutionList().subscribe(e=>{if(e?.items){this.exportJobs=[];let o=!1;e.items.forEach(r=>{const c={name:"CVE_EXPORT.EXPORT_TITLE",state:this.MapStatus(r.status),data:{hasFile:r.file_present,name:`${$}${(new Kt.Z).transform(r.start_time,"yyyyMMddHHmmss")}`,id:r.id,errorInf:r.status_text?r.status_text:null},timeStamp:new Date(r.start_time).getTime(),timeDiff:"OPERATION.SECOND_AGO"};this.exportJobs.push(c),this.isRunningState(r.status)&&(o=!0)}),this.refreshTimestampForExportJob(),o&&(this.timeout=setTimeout(()=>{this.refreshExportJobs()},7e3))}})}isRunningState(e){return!!e&&(e===w.TX.RUNNING||e===w.TX.PENDING||e===w.TX.SCHEDULED)}MapStatus(e){if(e){if(this.isRunningState(e))return w.he.PROGRESSING;if(e===w.TX.STOPPED)return w.he.INTERRUPT;if(e===w.TX.SUCCESS)return w.he.SUCCESS;if(e===w.TX.ERROR)return w.he.FAILURE}return w.he.FAILURE}download(e){e?.data?.id&&e?.data?.name&&this.scanDataExportService.downloadScanData({executionId:+e.data.id}).subscribe(o=>{(0,w.yg)(o,e.data.name),this.refreshExportJobs()},o=>{this.msgHandler.error(o)})}refreshTimestampForExportJob(){let e,o,r,c;(0,v.D)([this.translate.get("OPERATION.SECOND_AGO"),this.translate.get("OPERATION.MINUTE_AGO"),this.translate.get("OPERATION.HOUR_AGO"),this.translate.get("OPERATION.DAY_AGO")]).subscribe(T=>{[e,o,r,c]=T}),this.exportJobs?.length&&this.exportJobs.forEach(T=>{const P=(new Date).getTime()-+T.timeStamp;T.timeDiff=this.calculateTime(P,e,o,r,c)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(Z.m),t.Y36(w.f9),t.Y36(y.sK),t.Y36(Wt.f),t.Y36(J.P),t.Y36(f.d))},i.\u0275cmp=t.Xpm({type:i,selectors:[["hbr-operation-model"]],hostBindings:function(e,o){1&e&&t.NdJ("beforeunload",function(c){return o.beforeUnloadHander(c)},!1,t.Jf7)},decls:28,vars:18,consts:[[1,"operDiv",3,"mouseover","mouseleave"],[1,"position-relative","w-100","h-100"],[1,"toolBar",3,"click"],["class","badge badge-danger margin-left-5",4,"ngIf"],[1,"side-form"],["shape","refresh",1,"freshIcon",3,"click"],[1,"custom-h2","event-text"],[1,"tab-top"],["clrTabLink","","id","link1",3,"click"],["id","contentAll",4,"clrIfActive"],["clrTabLink","",3,"click"],["id","contentRun",4,"clrIfActive"],["id","contentFailed",4,"clrIfActive"],[1,"badge","badge-danger","margin-left-5"],["id","contentAll"],["class","eventInfo",4,"ngFor","ngForOf"],[1,"eventInfo"],[1,"iconsArea"],[1,"spinner","spinner-inline","spinner-pos",3,"hidden"],["size","18","shape","success-standard",1,"color-green",3,"hidden"],["size","18","shape","error-standard",1,"color-red",3,"hidden"],["size","18","shape","unlink",1,"color-orange",3,"hidden"],[1,"infoArea"],[1,"eventName",3,"click"],[1,"flex"],[1,"job-name"],["class","btn btn-link","size","16","shape","download",3,"click",4,"ngIf"],[1,"eventTarget"],[1,"eventTime"],[1,"eventErrorInf"],["spanErrorInfo",""],["size","16","shape","download",1,"btn","btn-link",3,"click"],["id","contentRun"],[4,"ngFor","ngForOf"],["class","eventInfo",4,"ngIf"],["id","contentFailed"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0),t.NdJ("mouseover",function(){return o.mouseover()})("mouseleave",function(){return o.mouseleave()}),t.TgZ(1,"div",1)(2,"a",2),t.NdJ("click",function(){return o.slideOut()}),t._uU(3),t.ALo(4,"translate"),t.YNc(5,zt,2,1,"span",3),t.qZA(),t.TgZ(6,"div",4)(7,"clr-icon",5),t.NdJ("click",function(){return o.TabEvent()}),t.qZA(),t.TgZ(8,"h3",6),t._uU(9),t.ALo(10,"translate"),t.qZA(),t.TgZ(11,"div",7)(12,"clr-tabs")(13,"clr-tab")(14,"button",8),t.NdJ("click",function(){return o.TabEvent()}),t._uU(15),t.ALo(16,"translate"),t.qZA(),t.YNc(17,ee,3,2,"clr-tab-content",9),t.qZA(),t.TgZ(18,"clr-tab")(19,"button",10),t.NdJ("click",function(){return o.TabEvent()}),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,re,3,2,"clr-tab-content",11),t.qZA(),t.TgZ(23,"clr-tab")(24,"button",10),t.NdJ("click",function(){return o.TabEvent()}),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.YNc(27,ce,3,2,"clr-tab-content",12),t.qZA()()()()()()),2&e&&(t.Q6J("@SlideInOutAnimation",o.animationState),t.xp6(3),t.Oqu(t.lcZ(4,8,"OPERATION.EVENT_LOG")),t.xp6(2),t.Q6J("ngIf",o.getNewMessageCountStr()),t.xp6(4),t.hij(" ",t.lcZ(10,10,"OPERATION.LOCAL_EVENT")," "),t.xp6(6),t.hij(" ",t.lcZ(16,12,"OPERATION.ALL")," "),t.xp6(2),t.Q6J("clrIfActive",!0),t.xp6(3),t.hij(" ",t.lcZ(21,14,"OPERATION.RUNNING")," "),t.xp6(5),t.hij(" ",t.lcZ(26,16,"OPERATION.FAILED")," "))},dependencies:[L.sg,L.O5,h.qvL,h.tam,h.MgK,h.UkA,h.S4y,h.gKI,h.Iq$,h.dl,h.Qs7,y.X$],styles:[".side-form[_ngcontent-%COMP%]{position:absolute;width:325px;height:100%;left:28px;padding-top:20px;border-left:1px solid #e0e0e0}.eventInfo[_ngcontent-%COMP%]{display:flex;justify-content:flex-start;align-content:flex-start;padding:8px 5px 8px 10px;border-bottom:1px solid #ccc}.iconsArea[_ngcontent-%COMP%]{flex-shrink:1}.infoArea[_ngcontent-%COMP%]{margin-left:10px;width:270px}.eventName[_ngcontent-%COMP%]{display:block;margin-bottom:-5px;font-size:16px}.eventErrorInf[_ngcontent-%COMP%]{display:block;font-size:12px;color:red;line-height:.6rem}.eventTarget[_ngcontent-%COMP%]{display:inline-flex;width:160px;font-size:12px;flex-shrink:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.eventTime[_ngcontent-%COMP%]{float:right;font-size:12px}[_nghost-%COMP%]  .nav{padding-left:38px}.operDiv[_ngcontent-%COMP%]{position:fixed;top:60px;z-index:600;width:350px;bottom:0}.toolBar[_ngcontent-%COMP%]{position:absolute;transform-origin:top right;border-top:1px solid #ccc;transform:translate(-100%) rotate(-90deg);margin-top:10px;padding:0 10px;height:25px;line-height:25px;letter-spacing:1.2px;font-weight:500;box-shadow:-2px -1px 3px #bebbbb;cursor:pointer;text-align:left;text-decoration:none}.freshIcon[_ngcontent-%COMP%]{float:right;margin-right:20px;margin-top:-10px;cursor:pointer}[_nghost-%COMP%]  #contentAll{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}[_nghost-%COMP%]  #contentFailed{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}[_nghost-%COMP%]  #contentRun{position:absolute;top:115px;bottom:0;width:100%;overflow-y:auto}.event-text[_ngcontent-%COMP%]{margin-left:34px}.color-red[_ngcontent-%COMP%]{color:red}.color-green[_ngcontent-%COMP%]{color:green}.color-orange[_ngcontent-%COMP%]{color:orange}.tab-top[_ngcontent-%COMP%]{margin-top:10px}.margin-left-5[_ngcontent-%COMP%]{margin-left:5px}.flex[_ngcontent-%COMP%]{display:flex;align-items:center}"],data:{animation:[Vt]}}),i})();var tt=a(8489),he=a(5681);function ge(i,u){1&i&&(t.TgZ(0,"div",7),t._UZ(1,"clr-icon",8),t.qZA())}function me(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.CONFIRM")," "))}function fe(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.NO")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.YES")," "))}function Ce(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",12),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("hidden",e.isDelete),t.xp6(1),t.hij(" ",t.lcZ(2,4,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("hidden",e.isDelete),t.xp6(1),t.hij(" ",t.lcZ(5,6,"BUTTON.DELETE")," ")}}function Te(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",10),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,1,"BUTTON.CLOSE")," "))}function ve(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",13),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.ENABLE")," "))}function Ae(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",9),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",14),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.confirm())}),t._uU(4),t.ALo(5,"translate"),t.qZA()}2&i&&(t.xp6(1),t.hij(" ",t.lcZ(2,2,"BUTTON.CANCEL")," "),t.xp6(3),t.hij(" ",t.lcZ(5,4,"BUTTON.DISABLE")," "))}function Se(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"button",11),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(1),t.ALo(2,"translate"),t.qZA(),t.TgZ(3,"button",15),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"button",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.cancel())}),t._uU(7),t.ALo(8,"translate"),t.qZA()}if(2&i){const e=t.oxw();t.Q6J("hidden",e.isDelete),t.xp6(1),t.hij(" ",t.lcZ(2,7,"BUTTON.CANCEL")," "),t.xp6(2),t.Q6J("hidden",e.isDelete),t.xp6(1),t.hij(" ",t.lcZ(5,9,"BUTTON.SWITCH")," "),t.xp6(2),t.Q6J("disabled","true")("hidden",!e.isDelete),t.xp6(1),t.hij(" ",t.lcZ(8,11,"BUTTON.CLOSE")," ")}}let Me=(()=>{class i{constructor(e,o){this.confirmationService=e,this.translate=o,this.opened=!1,this.dialogTitle="",this.dialogContent="",this.isDelete=!1,this.annouceSubscription=e.confirmationAnnouced$.subscribe(r=>{this.dialogTitle=r.title,this.dialogContent=r.message,this.message=r,this.translate.get(this.dialogTitle).subscribe(c=>this.dialogTitle=c),this.translate.get(this.dialogContent,{param:r.param}).subscribe(c=>this.dialogContent=c),this.buttons=r.buttons,this.open()})}ngOnDestroy(){this.annouceSubscription&&this.annouceSubscription.unsubscribe()}open(e){e&&(this.dialogTitle=e.title,this.message=e,this.translate.get(this.dialogTitle).subscribe(o=>this.dialogTitle=o),this.translate.get(e.message,{param:e.param}).subscribe(o=>{this.dialogContent=o}),this.buttons=e.buttons),this.opened=!0}close(){this.opened=!1}cancel(){this.message?(this.confirmationService.cancel(new tt.y(2,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.isDelete=!1,this.close()):this.close()}confirm(){this.message?(this.confirmationService.confirm(new tt.y(1,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.close()):this.close()}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(he.O),t.Y36(y.sK))},i.\u0275cmp=t.Xpm({type:i,selectors:[["global-confirmation-dialog"]],decls:15,vars:14,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title","confirmation-title"],[1,"modal-body"],["class","confirmation-icon-inline",4,"ngIf"],[1,"confirmation-content"],[1,"modal-footer",3,"ngSwitch"],[3,"ngSwitchCase"],[1,"confirmation-icon-inline"],["shape","warning","size","64",1,"is-warning"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"hidden","click"],["type","button",1,"btn","btn-danger",3,"hidden","click"],["type","button","id","dialog-action-enable",1,"btn","btn-primary",3,"click"],["type","button","id","dialog-action-disable",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"hidden"],["type","button",1,"btn","btn-primary",3,"disabled","hidden","click"]],template:function(e,o){1&e&&(t.TgZ(0,"clr-modal",0),t.NdJ("clrModalOpenChange",function(c){return o.opened=c}),t.TgZ(1,"h3",1),t._uU(2),t.qZA(),t.TgZ(3,"div",2),t.YNc(4,ge,2,0,"div",3),t.TgZ(5,"div",4),t._uU(6),t.qZA()(),t.TgZ(7,"div",5),t.YNc(8,me,6,6,"ng-template",6),t.YNc(9,fe,6,6,"ng-template",6),t.YNc(10,Ce,6,8,"ng-template",6),t.YNc(11,Te,3,3,"ng-template",6),t.YNc(12,ve,6,6,"ng-template",6),t.YNc(13,Ae,6,6,"ng-template",6),t.YNc(14,Se,9,13,"ng-template",6),t.qZA()()),2&e&&(t.Q6J("clrModalOpen",o.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!0),t.xp6(2),t.Oqu(o.dialogTitle),t.xp6(2),t.Q6J("ngIf",2!==o.buttons),t.xp6(2),t.Oqu(o.dialogContent),t.xp6(1),t.Q6J("ngSwitch",o.buttons),t.xp6(1),t.Q6J("ngSwitchCase",0),t.xp6(1),t.Q6J("ngSwitchCase",1),t.xp6(1),t.Q6J("ngSwitchCase",2),t.xp6(1),t.Q6J("ngSwitchCase",3),t.xp6(1),t.Q6J("ngSwitchCase",4),t.xp6(1),t.Q6J("ngSwitchCase",5),t.xp6(1),t.Q6J("ngSwitchCase",6))},dependencies:[h.qvL,h.qAN,h.VLi,L.O5,L.RF,L.n9,y.X$],styles:[".confirmation-icon-inline[_ngcontent-%COMP%]{display:inline-block}.confirmation-title[_ngcontent-%COMP%]{line-height:24px;font-size:22px;margin-top:0}.confirmation-content[_ngcontent-%COMP%]{font-size:14px;line-height:24px;display:inline-block;vertical-align:middle;width:80%;white-space:pre-wrap;word-break:break-all}.batchInfoUl[_ngcontent-%COMP%]{padding:20px;list-style-type:none}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:24px;border-bottom:1px solid #e8e8e8}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-right:20px;width:240px;display:inline-block;color:#666;text-overflow:ellipsis;overflow:hidden;vertical-align:middle}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:220px;display:inline-block;color:#666}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;line-height:1.2em;font-size:.8em;color:#999}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),i})();const Oe=["scrollDiv"];function be(i,u){if(1&i){const e=t.EpF();t.TgZ(0,"div",8),t._UZ(1,"div",9),t.TgZ(2,"div",10),t._UZ(3,"clr-icon",11),t.TgZ(4,"span",12),t._uU(5),t.ALo(6,"translate"),t.TgZ(7,"a",13),t._uU(8),t.ALo(9,"translate"),t.qZA()()(),t.TgZ(10,"div",14)(11,"a",15),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"clr-icon",16),t.NdJ("click",function(){t.CHM(e);const r=t.oxw();return t.KtG(r.closeInfo())}),t.qZA()()()}if(2&i){const e=t.oxw();t.xp6(5),t.hij("",t.lcZ(6,4,"SCANNER.HELP_INFO_1")," "),t.xp6(2),t.s9C("href",e.scannerDocUrl,t.LSH),t.xp6(1),t.Oqu(t.lcZ(9,6,"SCANNER.HELP_INFO_2")),t.xp6(4),t.Oqu(t.lcZ(13,8,"SCANNER.ALL_SCANNERS"))}}function xe(i,u){1&i&&(t.TgZ(0,"a",51),t._UZ(1,"clr-icon",32),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"SIDE_NAV.SYSTEM_MGMT.GROUP")," "))}function Ee(i,u){1&i&&(t.TgZ(0,"a",52),t._UZ(1,"clr-icon",53),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"CONFIG.LABEL")," "))}function Pe(i,u){1&i&&(t.TgZ(0,"a",54),t._UZ(1,"clr-icon",55),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"CLEARANCES.CLEARANCES")," "))}function Ze(i,u){1&i&&(t.TgZ(0,"a",56),t._UZ(1,"clr-icon",57),t._uU(2),t.ALo(3,"translate"),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,1,"JOB_SERVICE_DASHBOARD.JOB_SERVICE_DASHBOARD")," "))}function Ie(i,u){if(1&i&&(t.TgZ(0,"clr-vertical-nav-group-children")(1,"a",31),t._UZ(2,"clr-icon",32),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"a",33),t._UZ(6,"clr-icon",34),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.YNc(9,xe,4,3,"a",35),t.TgZ(10,"a",36),t._UZ(11,"clr-icon",37),t._uU(12),t.ALo(13,"translate"),t.qZA(),t.TgZ(14,"a",38),t._UZ(15,"clr-icon",39),t._uU(16),t.ALo(17,"translate"),t.qZA(),t.TgZ(18,"a",40),t._UZ(19,"clr-icon",41),t._uU(20),t.ALo(21,"translate"),t.qZA(),t.YNc(22,Ee,4,3,"a",42),t.TgZ(23,"a",43),t._UZ(24,"clr-icon",44),t._uU(25),t.ALo(26,"translate"),t.qZA(),t.TgZ(27,"a",45),t._UZ(28,"clr-icon",46),t._uU(29),t.ALo(30,"translate"),t.qZA(),t.YNc(31,Pe,4,3,"a",47),t.YNc(32,Ze,4,3,"a",48),t.TgZ(33,"a",49),t._UZ(34,"clr-icon",50),t._uU(35),t.ALo(36,"translate"),t.qZA()()),2&i){const e=t.oxw(3);t.xp6(3),t.hij(" ",t.lcZ(4,12,"SIDE_NAV.SYSTEM_MGMT.USER")," "),t.xp6(4),t.hij(" ",t.lcZ(8,14,"SYSTEM_ROBOT.ROBOT_ACCOUNT_NAV")," "),t.xp6(2),t.Q6J("ngIf",!e.isDBAuth()),t.xp6(3),t.hij(" ",t.lcZ(13,16,"SIDE_NAV.SYSTEM_MGMT.REGISTRY")," "),t.xp6(4),t.hij(" ",t.lcZ(17,18,"SIDE_NAV.SYSTEM_MGMT.REPLICATION")," "),t.xp6(4),t.hij(" ",t.lcZ(21,20,"SIDE_NAV.DISTRIBUTIONS.NAME")," "),t.xp6(2),t.Q6J("ngIf",!e.withAdmiral),t.xp6(3),t.hij(" ",t.lcZ(26,22,"CONFIG.PROJECT_QUOTAS")," "),t.xp6(4),t.hij(" ",t.lcZ(30,24,"SIDE_NAV.SYSTEM_MGMT.INTERROGATION_SERVICES")," "),t.xp6(2),t.Q6J("ngIf",e.hasAdminRole),t.xp6(1),t.Q6J("ngIf",e.hasAdminRole),t.xp6(3),t.hij(" ",t.lcZ(36,26,"SIDE_NAV.SYSTEM_MGMT.CONFIG")," ")}}function we(i,u){1&i&&(t.TgZ(0,"clr-vertical-nav-group",27),t._UZ(1,"clr-icon",28),t._uU(2),t.ALo(3,"translate"),t._UZ(4,"a",29),t.YNc(5,Ie,37,28,"clr-vertical-nav-group-children",30),t.qZA()),2&i&&(t.xp6(2),t.hij(" ",t.lcZ(3,2,"SIDE_NAV.SYSTEM_MGMT.NAME")," "),t.xp6(3),t.Q6J("clrIfExpanded",!0))}function Ne(i,u){1&i&&t._UZ(0,"clr-icon",61)}function Ue(i,u){1&i&&t._UZ(0,"clr-icon",62)}function Re(i,u){if(1&i){const e=t.EpF();t.ynx(0),t.TgZ(1,"a",58),t.NdJ("click",function(){t.CHM(e);const r=t.oxw().$implicit,c=t.oxw(2);return t.KtG(c.themeChanged(r))}),t.YNc(2,Ne,1,0,"clr-icon",59),t.YNc(3,Ue,1,0,"clr-icon",60),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.BQk()}if(2&i){const e=t.oxw().$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("ngIf","DARK"===o.styleMode),t.xp6(1),t.Q6J("ngIf","LIGHT"===o.styleMode),t.xp6(1),t.hij(" ",t.lcZ(5,3,e.text)," ")}}function Le(i,u){if(1&i&&(t.ynx(0),t.YNc(1,Re,6,5,"ng-container",7),t.BQk()),2&i){const e=u.$implicit,o=t.oxw(2);t.xp6(1),t.Q6J("ngIf",e.showStyle===o.styleMode)}}function ye(i,u){if(1&i&&(t.TgZ(0,"clr-vertical-nav",17)(1,"div")(2,"a",18),t._UZ(3,"clr-icon",19),t._uU(4),t.ALo(5,"translate"),t.qZA(),t.TgZ(6,"a",20),t._UZ(7,"clr-icon",21),t._uU(8),t.ALo(9,"translate"),t.qZA(),t.YNc(10,we,6,4,"clr-vertical-nav-group",22),t.qZA(),t.TgZ(11,"div",23),t.YNc(12,Le,2,1,"ng-container",24),t.TgZ(13,"a",25),t._UZ(14,"clr-icon",26),t._uU(15),t.ALo(16,"translate"),t.qZA()()()),2&i){const e=t.oxw();t.Q6J("clrVerticalNavCollapsible",!0),t.xp6(4),t.hij(" ",t.lcZ(5,6,"SIDE_NAV.PROJECTS")," "),t.xp6(4),t.hij(" ",t.lcZ(9,8,"SIDE_NAV.LOGS")," "),t.xp6(2),t.Q6J("ngIf",e.isSystemAdmin),t.xp6(2),t.Q6J("ngForOf",e.themeArray),t.xp6(3),t.hij(" ",t.lcZ(16,10,"SIDE_NAV.HARBOR_API_MANAGEMENT")," ")}}function De(i,u){1&i&&t._UZ(0,"hbr-operation-model")}const et="hasShowScannerInfo",ot="styleModeLocal";let Je=(()=>{class i{constructor(e,o,r,c,T,P,R,F,ke){this.route=e,this.router=o,this.session=r,this.searchTrigger=c,this.appConfigService=T,this.scannerService=P,this.theme=R,this.event=F,this.cd=ke,this.isSearchResultsOpened=!1,this.showScannerInfo=!1,this.scannerDocUrl=jt.f,this.themeArray=(0,p.d9)(mt.tI),this.styleMode=this.themeArray[0].showStyle}ngOnInit(){this.scrollToPositionSub||(this.scrollToPositionSub=this.event.subscribe(J.n.SCROLL_TO_POSITION,e=>{this.scrollDiv&&this.scrollDiv.nativeElement&&(this.cd.detectChanges(),this.scrollDiv.nativeElement.scrollTop=e)})),this.searchSub=this.searchTrigger.searchTriggerChan$.subscribe(e=>{e&&""!==e.trim()&&(this.isSearchResultsOpened=!0)}),this.searchCloseSub=this.searchTrigger.searchCloseChan$.subscribe(e=>{this.isSearchResultsOpened=!1}),localStorage&&"yes"===localStorage.getItem(et)||this.isSystemAdmin&&this.getDefaultScanner(),localStorage&&(this.styleMode=localStorage.getItem(ot))}isDBAuth(){return!this.appConfigService?.configurations?.auth_mode||this.appConfigService.configurations.auth_mode===I.Au.DB_AUTH}publishScrollEvent(){this.scrollDiv&&this.scrollDiv.nativeElement&&this.event.publish(J.n.SCROLL,{url:this.router.url,scrollTop:this.scrollDiv.nativeElement.scrollTop})}closeInfo(){localStorage&&localStorage.setItem(et,"yes"),this.showScannerInfo=!1}getDefaultScanner(){this.scannerService.listScannersResponse({pageSize:p.L8,page:1}).subscribe(e=>{if(e.headers){const o=e.headers.get("X-Total-Count"),r=parseInt(o,0);let c=e.body||[];if(r<=p.L8)c&&c.length&&(this.showScannerInfo=c.some(T=>T.is_default));else{const T=Math.ceil(r/p.L8),P=[];for(let R=2;R<=T;R++)P.push(this.scannerService.listScanners({page:R,pageSize:p.L8}));(0,v.D)(P).subscribe(R=>{R&&R.length&&(R.forEach(F=>{c=c.concat(F)}),this.showScannerInfo=c.some(F=>F.is_default))})}}})}ngOnDestroy(){this.searchSub&&this.searchSub.unsubscribe(),this.searchCloseSub&&this.searchCloseSub.unsubscribe(),this.scrollToPositionSub&&(this.scrollToPositionSub.unsubscribe(),this.scrollToPositionSub=null)}get shouldOverrideContent(){return this.router.routerState.snapshot.url.toString().startsWith(I.ZB.EMBEDDED_SIGN_IN)}get showSearch(){return this.isSearchResultsOpened}get isSystemAdmin(){let e=this.session.getCurrentUser();return null!=e&&e.has_admin_role}get isUserExisting(){return null!=this.session.getCurrentUser()}get hasAdminRole(){return this.session.getCurrentUser()&&this.session.getCurrentUser().has_admin_role}get withAdmiral(){return this.appConfigService.getConfig().with_admiral}openModal(e){switch(e.modalName){case _.D.USER_PROFILE:this.accountSettingsModal.open();break;case _.D.CHANGE_PWD:this.pwdSetting.open();break;case _.D.ABOUT:this.aboutDialog.open()}}themeChanged(e){this.styleMode=e.mode,this.theme.loadStyle(e.toggleFileName),localStorage&&localStorage.setItem(ot,this.styleMode)}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(x.gz),t.Y36(x.F0),t.Y36(Z.m),t.Y36(V.V),t.Y36(W._),t.Y36(Bt.L),t.Y36(Qt.f),t.Y36(J.P),t.Y36(t.sBO))},i.\u0275cmp=t.Xpm({type:i,selectors:[["harbor-shell"]],viewQuery:function(e,o){if(1&e&&(t.Gf(K,5),t.Gf(B,5),t.Gf(Q.S,5),t.Gf(H.f,5),t.Gf(Oe,5)),2&e){let r;t.iGM(r=t.CRH())&&(o.accountSettingsModal=r.first),t.iGM(r=t.CRH())&&(o.pwdSetting=r.first),t.iGM(r=t.CRH())&&(o.navigator=r.first),t.iGM(r=t.CRH())&&(o.aboutDialog=r.first),t.iGM(r=t.CRH())&&(o.scrollDiv=r.first)}},decls:16,vars:11,consts:[["class","clr-row scanner-info",4,"ngIf"],[3,"isAppLevel"],[3,"showAccountSettingsModal","showDialogModalAction"],[1,"content-container"],[1,"content-area",3,"scroll"],["scrollDiv",""],[3,"clrVerticalNavCollapsible",4,"ngIf"],[4,"ngIf"],[1,"clr-row","scanner-info"],[1,"clr-col-2"],[1,"clr-col","text-center"],["shape","info-standard","size","20"],[1,"ml-05"],["rel","noopener noreferrer","target","_blank",3,"href"],[1,"clr-col-2","right"],["href","#","routerLink","/harbor/interrogation-services/scanners",1,"all-scanners"],["shape","times","size","24",1,"close-icon",3,"click"],[3,"clrVerticalNavCollapsible"],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/projects"],["shape","organization","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/logs"],["shape","list","clrVerticalNavIcon",""],["routerLinkActive","active",4,"ngIf"],[1,"mb-1"],[4,"ngFor","ngForOf"],["rel","noopener noreferrer","clrVerticalNavLink","","routerLinkActive","active","target","_blank","routerLink","/devcenter-api-2.0"],["shape","network-globe","clrVerticalNavIcon",""],["routerLinkActive","active"],["shape","administrator","clrVerticalNavIcon",""],["routerLink","#","hidden","","aria-hidden","true"],[4,"clrIfExpanded"],["clrVerticalNavLink","","routerLink","/harbor/users","routerLinkActive","active"],["shape","users","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/robot-accounts","routerLinkActive","active"],["shape","robot-head","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/groups","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLink","/harbor/registries","routerLinkActive","active"],["shape","block","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/replications","routerLinkActive","active"],["shape","cloud-traffic","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/distribution/instances","routerLinkActive","active"],["shape","share","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/labels","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLink","/harbor/project-quotas","routerLinkActive","active"],["shape","resource-pool","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/interrogation-services","routerLinkActive","active"],["shape","shield","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/clearing-job","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLink","/harbor/job-service-dashboard","routerLinkActive","active",4,"ngIf"],["clrVerticalNavLink","","routerLinkActive","active","routerLink","/harbor/configs"],["shape","cog","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/groups","routerLinkActive","active"],["clrVerticalNavLink","","routerLink","/harbor/labels","routerLinkActive","active"],["shape","tag","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/clearing-job","routerLinkActive","active"],["shape","trash","clrVerticalNavIcon",""],["clrVerticalNavLink","","routerLink","/harbor/job-service-dashboard","routerLinkActive","active"],["shape","dashboard","clrVerticalNavIcon",""],["clrVerticalNavLink","",1,"pointer",3,"click"],["clrVerticalNavIcon","","size","20","shape","sun","class","is-solid",4,"ngIf"],["clrVerticalNavIcon","","size","20","shape","moon","class","is-solid",4,"ngIf"],["clrVerticalNavIcon","","size","20","shape","sun",1,"is-solid"],["clrVerticalNavIcon","","size","20","shape","moon",1,"is-solid"]],template:function(e,o){1&e&&(t.TgZ(0,"clr-main-container"),t.YNc(1,be,15,10,"div",0),t._UZ(2,"global-message",1),t.TgZ(3,"navigator",2),t.NdJ("showAccountSettingsModal",function(c){return o.openModal(c)})("showDialogModalAction",function(c){return o.openModal(c)}),t.qZA(),t.TgZ(4,"div",3)(5,"div",4,5),t.NdJ("scroll",function(){return o.publishScrollEvent()}),t._UZ(7,"global-message",1)(8,"search-result")(9,"router-outlet"),t.qZA(),t.YNc(10,ye,17,12,"clr-vertical-nav",6),t.YNc(11,De,1,0,"hbr-operation-model",7),t.qZA()(),t._UZ(12,"account-settings-modal")(13,"password-setting")(14,"global-confirmation-dialog")(15,"about-dialog")),2&e&&(t.xp6(1),t.Q6J("ngIf",o.showScannerInfo&&o.isSystemAdmin),t.xp6(1),t.Q6J("isAppLevel",!0),t.xp6(3),t.ekj("container-override",o.showSearch)("content-area-override",!o.shouldOverrideContent)("start-content-padding",o.shouldOverrideContent),t.xp6(2),t.Q6J("isAppLevel",!1),t.xp6(3),t.Q6J("ngIf",o.isUserExisting),t.xp6(1),t.Q6J("ngIf",o.isUserExisting))},dependencies:[h.Nz$,h.qvL,h.DbV,h.QoI,h.zuD,h.fzC,h.zYX,h.A0B,h.d6G,h.ogR,L.sg,L.O5,Ht.q,Q.S,Yt.B,H.f,_e,x.lC,x.yS,x.Od,B,K,Me,y.X$],styles:[".side-nav-override[_ngcontent-%COMP%]{box-shadow:6px 0 #ccc}.container-override[_ngcontent-%COMP%]{position:relative!important}.content-container[_ngcontent-%COMP%]{position:relative}.start-content-padding[_ngcontent-%COMP%]{padding:0!important;background-color:#fff;overflow-y:hidden!important}.content-area-override[_ngcontent-%COMP%]{padding-left:36px!important;padding-bottom:36px!important;padding-right:21px!important}.nav-link-override[_ngcontent-%COMP%]{width:126px!important}clr-vertical-nav[_ngcontent-%COMP%]     .nav-content{display:flex;justify-content:space-between}.font-size-13[_ngcontent-%COMP%]{font-size:13px}.scanner-info[_ngcontent-%COMP%]{margin-right:0;margin-left:0;background-color:#0079b8;min-height:2rem;color:#fff;align-items:center;font-size:.5rem}.scanner-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;-webkit-text-decoration:#bababa underline;text-decoration:#bababa underline;font-weight:600}.scanner-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .scanner-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:visited, .scanner-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:link{color:#fff}.all-scanners[_ngcontent-%COMP%]{margin-right:1.5rem}.close-icon[_ngcontent-%COMP%]{margin-right:1rem}.ml-05[_ngcontent-%COMP%]{margin-left:.5rem}.right[_ngcontent-%COMP%]{text-align:right}.pointer[_ngcontent-%COMP%]{cursor:pointer}"]}),i})();var Ge=a(9751);let U=(()=>{class i{constructor(e,o,r){this.authService=e,this.router=o,this.appConfigService=r}canActivate(e,o){return new Ge.y(r=>{let c=this.authService.getCurrentUser();if(c)return c.has_admin_role?r.next(!0):(this.router.navigate([I.ZB.HARBOR_DEFAULT]),r.next(!1));this.authService.retrieveUser().subscribe(()=>(c=this.authService.getCurrentUser(),c.has_admin_role?r.next(!0):(this.router.navigate([I.ZB.HARBOR_DEFAULT]),r.next(!1))),T=>o.url===I.ZB.HARBOR_ROOT||o.url.startsWith(I.ZB.EMBEDDED_SIGN_IN)?r.next(!0):(this.router.navigate([I.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:o.url}}),r.next(!1)))})}canActivateChild(e,o){return this.canActivate(e,o)}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Z.m),t.LFG(x.F0),t.LFG(W._))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var it=a(9646),q=a(7863),rt=a(268);let k=(()=>{class i{constructor(e,o,r){this.sessionService=e,this.projectService=o,this.router=r}canActivate(e,o){const r=e.params.id;return this.sessionService.setProjectMembers([]),null!==this.sessionService.getCurrentUser()?this.hasProjectPerm(o.url,r,e):this.sessionService.retrieveUser().pipe(()=>this.hasProjectPerm(o.url,r,e),(0,s.K)(T=>(this.router.navigate([I.ZB.HARBOR_DEFAULT]),(0,it.of)(!1))))}canActivateChild(e,o){return this.canActivate(e,o)}hasProjectPerm(e,o,r){return this.projectService.getProject(o).pipe((0,M.U)(()=>!0),(0,s.K)(c=>(401===c.status&&r.queryParams[q.jv]!==q.gT?(this.sessionService.clear(),this.router.navigate([I.ZB.EMBEDDED_SIGN_IN],{queryParams:{redirect_url:(0,p.ub)(this.router.url,q.jv)}})):this.router.navigate([I.ZB.HARBOR_DEFAULT]),(0,it.of)(!1))))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Z.m),t.LFG(rt.Y4),t.LFG(x.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),j=(()=>{class i{constructor(e,o,r){this.sessionService=e,this.projectService=o,this.router=r}resolve(e,o){let r=e.params.id;return r||(r=e.queryParams.project_id),this.projectService.getProject(r).pipe((0,M.U)(c=>{if(c){let T=this.sessionService.getCurrentUser();return T&&(T.has_admin_role?(c.has_project_admin_role=!0,c.is_member=!0,c.role_name="MEMBER.SYS_ADMIN"):(c.has_project_admin_role=c.current_user_role_id===I.G7.PROJECT_ADMIN,c.is_member=c.current_user_role_id>0,c.role_name=I.Hp[c.current_user_role_id])),c}return this.router.navigate(["/harbor","projects"]),null},(0,s.K)(c=>(this.router.navigate(["/harbor","projects"]),null))))}}return i.\u0275fac=function(e){return new(e||i)(t.LFG(Z.m),t.LFG(rt.Y4),t.LFG(x.F0))},i.\u0275prov=t.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();const Fe=[{path:"",component:Je,children:[{path:"",redirectTo:"projects",pathMatch:"full"},{path:"projects",loadChildren:()=>Promise.all([a.e(5266),a.e(8592),a.e(6669)]).then(a.bind(a,6669)).then(i=>i.ProjectsModule)},{path:"logs",loadChildren:()=>a.e(3703).then(a.bind(a,3703)).then(i=>i.LogModule)},{path:"users",canActivate:[U],loadChildren:()=>Promise.all([a.e(9254),a.e(1659)]).then(a.bind(a,1659)).then(i=>i.UserModule)},{path:"robot-accounts",canActivate:[U],loadChildren:()=>Promise.all([a.e(5266),a.e(2161),a.e(8592),a.e(771)]).then(a.bind(a,771)).then(i=>i.SystemRobotAccountsModule)},{path:"groups",canActivate:[U],loadChildren:()=>a.e(3866).then(a.bind(a,3866)).then(i=>i.GroupModule)},{path:"registries",canActivate:[U],loadChildren:()=>a.e(7200).then(a.bind(a,7200)).then(i=>i.EndpointModule)},{path:"replications",canActivate:[U],loadChildren:()=>Promise.all([a.e(5266),a.e(298),a.e(9285),a.e(1907),a.e(3645),a.e(4810),a.e(9716),a.e(8592),a.e(6056)]).then(a.bind(a,6056)).then(i=>i.ReplicationModule)},{path:"distribution",canActivate:[U],loadChildren:()=>Promise.all([a.e(298),a.e(9391)]).then(a.bind(a,9391)).then(i=>i.DistributionModule)},{path:"interrogation-services",canActivate:[U],loadChildren:()=>Promise.all([a.e(668),a.e(8592),a.e(8324)]).then(a.bind(a,8324)).then(i=>i.InterrogationServicesModule)},{path:"labels",canActivate:[U],loadChildren:()=>Promise.all([a.e(6567),a.e(8407)]).then(a.bind(a,8407)).then(i=>i.LabelsModule)},{path:"project-quotas",canActivate:[U],loadChildren:()=>Promise.all([a.e(5266),a.e(8592),a.e(5674)]).then(a.bind(a,5674)).then(i=>i.ProjectQuotasModule)},{path:"clearing-job",canActivate:[U],loadChildren:()=>Promise.all([a.e(668),a.e(3645),a.e(8592),a.e(3015)]).then(a.bind(a,3015)).then(i=>i.ClearingJobModule)},{path:"job-service-dashboard",canActivate:[U],loadChildren:()=>Promise.all([a.e(5266),a.e(298),a.e(9285),a.e(1907),a.e(3645),a.e(4810),a.e(9716),a.e(8592),a.e(7872)]).then(a.bind(a,7872)).then(i=>i.JobServiceDashboardModule)},{path:"configs",canActivate:[U],loadChildren:()=>Promise.all([a.e(8592),a.e(5562)]).then(a.bind(a,5562)).then(i=>i.ConfigurationModule)},{path:"projects/:id",loadChildren:()=>Promise.all([a.e(5266),a.e(3410)]).then(a.bind(a,3821)).then(i=>i.ProjectModule),canActivate:[k],resolve:{projectResolver:j}},{path:"projects/:id/repositories",loadChildren:()=>Promise.all([a.e(5266),a.e(9285),a.e(1089)]).then(a.bind(a,1089)).then(i=>i.ArtifactModule),canActivate:[k],resolve:{projectResolver:j}},{path:"projects/:id/helm-charts",canActivate:[k],resolve:{projectResolver:j},loadChildren:()=>a.e(6426).then(a.bind(a,6426)).then(i=>i.HelmChartListModule)}]}];let qe=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[n.m,x.Bz.forChild(Fe)]}),i})()},5681:(N,E,a)=>{a.d(E,{O:()=>v});var n=a(7579),x=a(4650);let v=(()=>{class _{constructor(){this.confirmationAnnoucedSource=new n.x,this.confirmationConfirmSource=new n.x,this.confirmationAnnouced$=this.confirmationAnnoucedSource.asObservable(),this.confirmationConfirm$=this.confirmationConfirmSource.asObservable()}confirm(O){this.confirmationConfirmSource.next(O)}cancel(O){this.confirm(O)}openComfirmDialog(O){this.confirmationAnnoucedSource.next(O)}}return _.\u0275fac=function(O){return new(O||_)},_.\u0275prov=x.Yz7({token:_,factory:_.\u0275fac,providedIn:"root"}),_})()},8726:(N,E,a)=>{a.d(E,{c:()=>n});class n{constructor(v,_,S,O,t,g){this.data={},this.targetId=0,this.title=v,this.message=_,this.data=O,this.targetId=t,this.param=S,this.buttons=g||0}}},8489:(N,E,a)=>{a.d(E,{y:()=>n});class n{constructor(v,_,S){this.state=0,this.data={},this.source=0,this.state=v,this.data=_,this.source=S}}},7121:(N,E,a)=>{a.d(E,{f:()=>n});const n="https://goharbor.io/blog/harbor-1.10-release/#vulnerability-scanning-with-pluggable-scanners"},38:(N,E,a)=>{a.d(E,{P:()=>v,n:()=>_});var n=a(727),x=a(4650);let v=(()=>{class S{constructor(){this._channels=[]}subscribe(t,g){return this._channels[t]||(this._channels[t]=[]),this._channels[t].push(g),new n.w0(()=>{this.unsubscribe(t,g)})}unsubscribe(t,g=null){let M=this._channels[t];if(!M)return;if(!g)return void delete this._channels[t];let s=M.indexOf(g);s<0||(M.splice(s,1),M.length||delete this._channels[t])}publish(t,g){const M=this._channels[t];!M||M.forEach(s=>{s(g)})}}return S.\u0275fac=function(t){return new(t||S)},S.\u0275prov=x.Yz7({token:S,factory:S.\u0275fac,providedIn:"root"}),S})();var _=(()=>{return(S=_||(_={})).SCROLL="scroll",S.SCROLL_TO_POSITION="scrollToPosition",S.REFRESH_PROJECT_INFO="refreshProjectInfo",S.START_SCAN_ARTIFACT="startScanArtifact",S.STOP_SCAN_ARTIFACT="stopScanArtifact",S.UPDATE_VULNERABILITY_INFO="UpdateVulnerabilityInfo",S.REFRESH_EXPORT_JOBS="refreshExportJobs",_;var S})()},4241:(N,E,a)=>{a.d(E,{z:()=>d});var n=a(4650),v=(a(6742),a(8489)),_=a(2466),S=a(6895),O=a(9375);function t(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",9),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}2&b&&(n.xp6(1),n.hij(" ",n.lcZ(2,2,"BUTTON.CANCEL")," "),n.xp6(3),n.hij(" ",n.lcZ(5,4,"BUTTON.CONFIRM")," "))}function g(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",9),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}2&b&&(n.xp6(1),n.hij(" ",n.lcZ(2,2,"BUTTON.NO")," "),n.xp6(3),n.hij(" ",n.lcZ(5,4,"BUTTON.YES")," "))}function M(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",11),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&b){const f=n.oxw();n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(2,4,"BUTTON.CANCEL")," "),n.xp6(2),n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(5,6,"BUTTON.DELETE")," ")}}function s(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",9),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA()}2&b&&(n.xp6(1),n.hij(" ",n.lcZ(2,1,"BUTTON.CLOSE")," "))}function l(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",12),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}2&b&&(n.xp6(1),n.hij(" ",n.lcZ(2,2,"BUTTON.CANCEL")," "),n.xp6(3),n.hij(" ",n.lcZ(5,4,"BUTTON.ENABLE")," "))}function p(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",8),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",13),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}2&b&&(n.xp6(1),n.hij(" ",n.lcZ(2,2,"BUTTON.CANCEL")," "),n.xp6(3),n.hij(" ",n.lcZ(5,4,"BUTTON.DISABLE")," "))}function m(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",14),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&b){const f=n.oxw();n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(2,4,"BUTTON.CANCEL")," "),n.xp6(2),n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(5,6,"BUTTON.REPLICATE")," ")}}function C(b,Z){if(1&b){const f=n.EpF();n.TgZ(0,"button",10),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.cancel())}),n._uU(1),n.ALo(2,"translate"),n.qZA(),n.TgZ(3,"button",14),n.NdJ("click",function(){n.CHM(f);const h=n.oxw();return n.KtG(h.confirm())}),n._uU(4),n.ALo(5,"translate"),n.qZA()}if(2&b){const f=n.oxw();n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(2,4,"BUTTON.CANCEL")," "),n.xp6(2),n.Q6J("hidden",f.isDelete),n.xp6(1),n.hij(" ",n.lcZ(5,6,"BUTTON.STOP")," ")}}let d=(()=>{class b{constructor(f){this.translate=f,this.opened=!1,this.dialogTitle="",this.dialogContent="",this.confirmAction=new n.vpe,this.cancelAction=new n.vpe,this.isDelete=!1}open(f){this.dialogTitle=f.title,this.message=f,this.translate.get(this.dialogTitle).subscribe(A=>this.dialogTitle=A),this.translate.get(f.message,{param:f.param}).subscribe(A=>{this.dialogContent=A}),this.buttons=f.buttons,this.opened=!0}colorChange(f){return f.loading||f.errorState?!f.loading&&f.errorState?"red":"#666":"green"}toggleErrorTitle(f){f.style.display="none"===f.style.display?"block":"none"}close(){this.opened=!1}cancel(){this.message?(this.cancelAction.emit(new v.y(2,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0)),this.isDelete=!1,this.close()):this.close()}confirm(){if(!this.message)return void this.close();let h=new v.y(1,this.message.data?this.message.data:{},this.message.targetId?this.message.targetId:0);this.confirmAction.emit(h),this.close()}}return b.\u0275fac=function(f){return new(f||b)(n.Y36(_.sK))},b.\u0275cmp=n.Xpm({type:b,selectors:[["confirmation-dialog"]],outputs:{confirmAction:"confirmAction",cancelAction:"cancelAction"},decls:17,vars:14,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title","confirmation-title"],[1,"modal-body"],[1,"confirmation-icon-inline"],["shape","warning","size","64",1,"is-warning"],[1,"confirmation-content"],[1,"modal-footer",3,"ngSwitch"],[3,"ngSwitchCase"],["type","button",1,"btn","btn-outline",3,"click"],["type","button",1,"btn","btn-primary",3,"click"],["type","button",1,"btn","btn-outline",3,"hidden","click"],["type","button",1,"btn","btn-danger",3,"hidden","click"],["type","button","id","dialog-action-enable",1,"btn","btn-primary",3,"click"],["type","button","id","dialog-action-disable",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-primary",3,"hidden","click"]],template:function(f,A){1&f&&(n.TgZ(0,"clr-modal",0),n.NdJ("clrModalOpenChange",function(L){return A.opened=L}),n.TgZ(1,"h3",1),n._uU(2),n.qZA(),n.TgZ(3,"div",2)(4,"div",3),n._UZ(5,"clr-icon",4),n.qZA(),n.TgZ(6,"div",5),n._uU(7),n.qZA()(),n.TgZ(8,"div",6),n.YNc(9,t,6,6,"ng-template",7),n.YNc(10,g,6,6,"ng-template",7),n.YNc(11,M,6,8,"ng-template",7),n.YNc(12,s,3,3,"ng-template",7),n.YNc(13,l,6,6,"ng-template",7),n.YNc(14,p,6,6,"ng-template",7),n.YNc(15,m,6,8,"ng-template",7),n.YNc(16,C,6,8,"ng-template",7),n.qZA()()),2&f&&(n.Q6J("clrModalOpen",A.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!0),n.xp6(2),n.Oqu(A.dialogTitle),n.xp6(5),n.Oqu(A.dialogContent),n.xp6(1),n.Q6J("ngSwitch",A.buttons),n.xp6(1),n.Q6J("ngSwitchCase",0),n.xp6(1),n.Q6J("ngSwitchCase",1),n.xp6(1),n.Q6J("ngSwitchCase",2),n.xp6(1),n.Q6J("ngSwitchCase",3),n.xp6(1),n.Q6J("ngSwitchCase",4),n.xp6(1),n.Q6J("ngSwitchCase",5),n.xp6(1),n.Q6J("ngSwitchCase",6),n.xp6(1),n.Q6J("ngSwitchCase",7))},dependencies:[S.RF,S.n9,O.qvL,O.qAN,O.VLi,_.X$],styles:[".confirmation-icon-inline[_ngcontent-%COMP%]{display:inline-block}.confirmation-title[_ngcontent-%COMP%]{line-height:24px;font-size:22px;margin-top:0}.confirmation-content[_ngcontent-%COMP%]{font-size:14px;line-height:24px;display:inline-block;vertical-align:middle;width:80%;white-space:pre-wrap}.batchInfoUl[_ngcontent-%COMP%]{padding:20px;list-style-type:none}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{line-height:24px;border-bottom:1px solid #e8e8e8}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:first-child{padding-right:20px;width:240px;display:inline-block;color:#666;text-overflow:ellipsis;overflow:hidden;vertical-align:middle}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]:last-child{width:220px;display:inline-block;color:#666}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{display:inline-block;line-height:1.2em;font-size:.8em;color:#999}.batchInfoUl[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{cursor:pointer;text-decoration:underline}"]}),b})()},3819:(N,E,a)=>{a.d(E,{gB:()=>n,hm:()=>x,yb:()=>v});class n{constructor(){this.name="",this.state="",this.data={id:-1,name:"",errorInf:""},this.timeStamp=(new Date).getTime(),this.timeDiff="OPERATION.SECOND_AGO"}}function x(_,S,O,t){return _.state=S,_.data.errorInf=O,_.timeStamp=(new Date).getTime(),_}const v={progressing:"progressing",success:"success",failure:"failure",interrupt:"interrupt"}},312:(N,E,a)=>{a.d(E,{TX:()=>O,f9:()=>v,he:()=>S,yg:()=>_});var n=a(7579),x=a(4650);let v=(()=>{class t{constructor(){this.subjects=null,this.operationInfoSource=new n.x,this.operationInfo$=this.operationInfoSource.asObservable()}publishInfo(M){this.operationInfoSource.next(M)}}return t.\u0275fac=function(M){return new(M||t)},t.\u0275prov=x.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function _(t,g){let M=window.URL.createObjectURL(t),s=document.createElement("a");document.body.appendChild(s),s.setAttribute("style","display: none"),s.href=M,s.download=g,s.click(),window.URL.revokeObjectURL(M),s.remove()}var S=(()=>{return(t=S||(S={})).SUCCESS="success",t.FAILURE="failure",t.INTERRUPT="interrupt",t.PROGRESSING="progressing",S;var t})(),O=(()=>{return(t=O||(O={})).PENDING="Pending",t.RUNNING="Running",t.STOPPED="Stopped",t.ERROR="Error",t.SUCCESS="Success",t.SCHEDULED="Scheduled",O;var t})()},7632:(N,E,a)=>{a.d(E,{s:()=>g});var n=a(4650),x=a(7539),v=a(4006),_=a(6895),S=a(9375),O=a(5016);function t(M,s){if(1&M&&(n.TgZ(0,"div",6),n._uU(1),n.qZA()),2&M){const l=n.oxw();n.xp6(1),n.hij(" ",l.headerTitle," ")}}let g=(()=>{class M{constructor(l){this.clipboardSrv=l,this.inputSize=40,this.headerTitle="Copy Input",this.defaultValue="N/A",this.iconMode=!1,this.state=0,this.onCopySuccess=new n.vpe,this.onCopyError=new n.vpe}onSuccess(l){this.state=1,this.onCopySuccess.emit(l)}onError(l){this.state=2,this.onCopyError.emit(l)}reset(){this.state=0}setPullCommendShow(){this.iconMode=!1}get isCopied(){return 1===this.state&&this.clipboardSrv?.getCurrentCopiedText()===this.defaultValue}get hasCopyError(){return 2===this.state}}return M.\u0275fac=function(l){return new(l||M)(n.Y36(x.Yv))},M.\u0275cmp=n.Xpm({type:M,selectors:[["hbr-copy-input"]],inputs:{inputSize:"inputSize",headerTitle:"headerTitle",defaultValue:"defaultValue",iconMode:"iconMode"},outputs:{onCopySuccess:"onCopySuccess",onCopyError:"onCopyError"},decls:12,vars:12,consts:[["class","command-title",4,"ngIf"],["type","text","readonly","",1,"command-input",3,"size","ngModel","ngModelChange"],["inputTarget",""],["name","inputTarget1","rows","1",1,"inputTarget",3,"ngModel","cols","ngModelChange"],["inputTarget1",""],["shape","copy","size","24",1,"info-tips-icon",3,"ngxClipboard","cbOnSuccess","cbOnError"],[1,"command-title"]],template:function(l,p){if(1&l&&(n.TgZ(0,"div"),n.YNc(1,t,2,1,"div",0),n.TgZ(2,"div")(3,"span")(4,"input",1,2),n.NdJ("ngModelChange",function(C){return p.defaultValue=C}),n.qZA()(),n.TgZ(6,"span")(7,"textarea",3,4),n.NdJ("ngModelChange",function(C){return p.defaultValue=C}),n._uU(9,"            "),n.qZA()(),n.TgZ(10,"span")(11,"clr-icon",5),n.NdJ("cbOnSuccess",function(C){return p.onSuccess(C)})("cbOnError",function(C){return p.onError(C)}),n.qZA()()()()),2&l){const m=n.MAs(8);n.xp6(1),n.Q6J("ngIf",!p.iconMode),n.xp6(2),n.ekj("hide",p.iconMode),n.xp6(1),n.s9C("size",p.inputSize),n.Q6J("ngModel",p.defaultValue),n.xp6(3),n.s9C("cols",p.inputSize),n.Q6J("ngModel",p.defaultValue),n.xp6(4),n.ekj("is-success",p.isCopied)("is-error",p.hasCopyError),n.Q6J("ngxClipboard",m)}},dependencies:[v.Fj,v.JJ,v.On,_.O5,S.qvL,O.y],styles:[".commands-container[_ngcontent-%COMP%]{min-width:360px;max-width:720px;padding-left:24px}.h5-override[_ngcontent-%COMP%]{display:inline-block!important;margin-top:0!important;margin-bottom:12px}.commands-section[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:24px}.info-tips-icon[_ngcontent-%COMP%]:hover{cursor:pointer}.command-title[_ngcontent-%COMP%]{font-size:14px}.command-input[_ngcontent-%COMP%]{font-size:14px;font-weight:500;border:0}[_nghost-%COMP%]  .dropdown-menu{min-width:360px;max-width:720px}.btn-font[_ngcontent-%COMP%]{font-size:14px!important}.hide[_ngcontent-%COMP%]{display:none}.inputTarget[_ngcontent-%COMP%]{width:1px;min-width:0;padding:0;opacity:.01}.dropdown-width[_ngcontent-%COMP%]{min-width:600px}"]}),M})()}}]);