"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[3410],{3821:(A,f,n)=>{n.r(f),n.d(f,{ProjectModule:()=>V});var u=n(858),E=n(6296),g=n(7579),O=n(4128),s=n(268),L=n(8372);const m="down";var a=n(6742),l=n(3526),d=n(38),t=n(4650),j=n(5266),R=n(1992),I=n(8025),b=n(2443),P=n(9375),C=n(6895),S=n(2466);function M(i,r){if(1&i){const e=t.EpF();t.TgZ(0,"a",21),t.NdJ("click",function(){t.CHM(e);const c=t.oxw();return t.KtG(c.backToProject())}),t._uU(1),t.ALo(2,"translate"),t.qZA()}2&i&&(t.xp6(1),t.Oqu(t.lcZ(2,1,"PROJECT_DETAIL.PROJECTS")))}const x=function(){return["/harbor","sign-in"]};function N(i,r){1&i&&(t.TgZ(0,"a",22),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i&&(t.Q6J("routerLink",t.DdM(4,x)),t.xp6(1),t.hij(" ",t.lcZ(2,2,"SEARCH.BACK"),""))}function Q(i,r){1&i&&t._UZ(0,"clr-icon",23)}function W(i,r){1&i&&t._UZ(0,"clr-icon",24)}function U(i,r){1&i&&t._UZ(0,"div",25)}function D(i,r){if(1&i&&(t.TgZ(0,"span",26),t._uU(1),t.ALo(2,"translate"),t.qZA()),2&i){const e=t.oxw();t.xp6(1),t.Oqu(t.lcZ(2,1,e.roleName))}}function Z(i,r){1&i&&(t.TgZ(0,"div",27)(1,"span",28),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&i&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"PROJECT.PROXY_CACHE")))}function Y(i,r){if(1&i&&(t.TgZ(0,"div")(1,"h3",30)(2,"span",31),t._uU(3),t.qZA(),t.TgZ(4,"span"),t._uU(5),t.qZA()(),t.TgZ(6,"span",32),t._uU(7),t.ALo(8,"translate"),t.qZA(),t.TgZ(9,"span"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"span"),t._uU(13),t.qZA(),t.TgZ(14,"div")(15,"div",33)(16,"div",34),t._UZ(17,"progress",35),t.qZA()()()()),2&i){const e=t.oxw(2);t.xp6(3),t.Oqu(e.getSizeNumber()),t.xp6(2),t.Oqu(e.getSizeUnit()),t.xp6(2),t.Oqu(t.lcZ(8,11,"QUOTA.OF")),t.xp6(3),t.Oqu(-1===(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)?t.lcZ(11,13,"QUOTA.UNLIMITED"):e.getIntegerAndUnit(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage,null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage).partNumberHard),t.xp6(3),t.Oqu(-1===(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)?"":e.getIntegerAndUnit(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage,null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage).partCharacterHard),t.xp6(3),t.ekj("danger",-1!==(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)&&(null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage)/(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)>e.quotaDangerCoefficient)("warning",-1!==(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)&&(null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage)/(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)<=e.quotaDangerCoefficient&&(null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage)/(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)>=e.quotaWarningCoefficient),t.xp6(1),t.s9C("value",-1===(null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)?0:null==e.projectQuota||null==e.projectQuota.used?null:e.projectQuota.used.storage),t.s9C("max",null==e.projectQuota||null==e.projectQuota.hard?null:e.projectQuota.hard.storage)}}function y(i,r){if(1&i&&(t.TgZ(0,"div",13)(1,"div",14)(2,"div",15),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"div",16),t.YNc(6,Y,18,15,"div",29),t.qZA()()()),2&i){const e=t.oxw();t.xp6(3),t.hij(" ",t.lcZ(4,2,"QUOTA.QUOTA_USED")," "),t.xp6(3),t.Q6J("ngIf",e.projectQuota)}}function B(i,r){if(1&i&&(t.ynx(0),t.TgZ(1,"clr-tab")(2,"button",36)(3,"a",37),t._uU(4),t.ALo(5,"translate"),t.qZA()()(),t.BQk()),2&i){const e=t.oxw(),o=e.$implicit,c=e.index,p=t.oxw();t.xp6(2),t.ekj("clear-default-active",p.isDefaultTab(o,c)),t.s9C("id","project-"+o.linkName),t.s9C("routerLink",o.linkName),t.Q6J("clrTabLinkInOverflow",o.tabLinkInOverflow),t.xp6(2),t.Oqu(t.lcZ(5,6,o.showTabName))}}function H(i,r){if(1&i&&(t.ynx(0),t.YNc(1,B,6,8,"ng-container",29),t.BQk()),2&i){const e=r.$implicit;t.xp6(1),t.Q6J("ngIf",e.permissions())}}let K=(()=>{class i{constructor(e,o,c,p,z,F,w,k,G){this.projectService=e,this.route=o,this.router=c,this.sessionService=p,this.appConfigService=z,this.userPermissionService=F,this.errorHandler=w,this.cdf=k,this.event=G,this.hasQuotaReadPermission=!1,this.tabLinkNavList=[{linkName:"summary",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.SUMMARY",permissions:()=>this.hasProjectReadPermission},{linkName:"repositories",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.REPOSITORIES",permissions:()=>this.hasRepositoryListPermission},{linkName:"helm-charts",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.HELMCHART",permissions:()=>this.withHelmChart&&this.hasHelmChartsListPermission},{linkName:"members",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.USERS",permissions:()=>this.hasMemberListPermission},{linkName:"labels",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.LABELS",permissions:()=>this.hasLabelListPermission&&this.hasLabelCreatePermission&&!this.withAdmiral},{linkName:"scanner",tabLinkInOverflow:!1,showTabName:"SCANNER.SCANNER",permissions:()=>this.hasScannerReadPermission},{linkName:"p2p-provider",tabLinkInOverflow:!1,showTabName:"P2P_PROVIDER.P2P_PROVIDER",permissions:()=>this.hasP2pProviderReadPermission},{linkName:"tag-strategy",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.POLICY",permissions:()=>this.hasTagRetentionPermission||this.hasTagImmutablePermission},{linkName:"robot-account",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.ROBOT_ACCOUNTS",permissions:()=>this.hasRobotListPermission},{linkName:"webhook",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.WEBHOOKS",permissions:()=>this.hasWebhookListPermission},{linkName:"logs",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.LOGS",permissions:()=>this.hasLogListPermission},{linkName:"configs",tabLinkInOverflow:!1,showTabName:"PROJECT_DETAIL.CONFIG",permissions:()=>this.isSessionValid&&this.hasConfigurationListPermission}],this._subject=new g.x,this.isProxyCacheProject=!1,this.quotaDangerCoefficient=a.u1,this.quotaWarningCoefficient=a.HE,this.hasSignedIn=null!==this.sessionService.getCurrentUser(),this.route.data.subscribe($=>{this.currentProject=$.projectResolver,this.currentProject.registry_id&&(this.isProxyCacheProject=!0),this.isMember=this.currentProject.is_member,this.roleName=this.currentProject.role_name})}ngOnInit(){this.projectId=this.route.snapshot.params.id,this.getPermissionsList(this.projectId),this._subscription||(this._subscription=this._subject.pipe((0,L.b)(100)).subscribe(e=>{e===m?this.resetTabsForDownSize():this.resetTabsForUpSize()})),this.eventSub||(this.eventSub=this.event.subscribe(d.n.REFRESH_PROJECT_INFO,()=>{this.refreshProjectInfo()}))}ngAfterViewInit(){this.previousWindowWidth=window.innerWidth,setTimeout(()=>{this.resetTabsForDownSize()},0)}ngOnDestroy(){this._subscription&&(this._subscription.unsubscribe(),this._subscription=null),this.eventSub&&(this.eventSub.unsubscribe(),this.eventSub=null)}getPermissionsList(e){let o=[];o.push(this.userPermissionService.getPermission(e,s._W.PROJECT.KEY,s._W.PROJECT.VALUE.READ)),o.push(this.userPermissionService.getPermission(e,s._W.LOG.KEY,s._W.LOG.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.CONFIGURATION.KEY,s._W.CONFIGURATION.VALUE.READ)),o.push(this.userPermissionService.getPermission(e,s._W.MEMBER.KEY,s._W.MEMBER.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.LABEL.KEY,s._W.LABEL.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.REPOSITORY.KEY,s._W.REPOSITORY.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.HELM_CHART.KEY,s._W.HELM_CHART.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.ROBOT.KEY,s._W.ROBOT.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.LABEL.KEY,s._W.LABEL.VALUE.CREATE)),o.push(this.userPermissionService.getPermission(e,s._W.TAG_RETENTION.KEY,s._W.TAG_RETENTION.VALUE.READ)),o.push(this.userPermissionService.getPermission(e,s._W.IMMUTABLE_TAG.KEY,s._W.IMMUTABLE_TAG.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.WEBHOOK.KEY,s._W.WEBHOOK.VALUE.LIST)),o.push(this.userPermissionService.getPermission(e,s._W.SCANNER.KEY,s._W.SCANNER.VALUE.READ)),o.push(this.userPermissionService.getPermission(e,s._W.P2P_PROVIDER.KEY,s._W.P2P_PROVIDER.VALUE.READ)),o.push(this.userPermissionService.getPermission(e,s._W.QUOTA.KEY,s._W.QUOTA.VALUE.READ)),(0,O.D)(o).subscribe(c=>{[this.hasProjectReadPermission,this.hasLogListPermission,this.hasConfigurationListPermission,this.hasMemberListPermission,this.hasLabelListPermission,this.hasRepositoryListPermission,this.hasHelmChartsListPermission,this.hasRobotListPermission,this.hasLabelCreatePermission,this.hasTagRetentionPermission,this.hasTagImmutablePermission,this.hasWebhookListPermission,this.hasScannerReadPermission,this.hasP2pProviderReadPermission,this.hasQuotaReadPermission]=c,this.hasQuotaReadPermission&&this.getQuotaInfo()},c=>this.errorHandler.error(c))}getQuotaInfo(){this.projectService.getProjectSummary({projectNameOrId:this.projectId.toString()}).subscribe(e=>{e&&e.quota&&(this.projectQuota=e.quota)},e=>{this.errorHandler.error(e)})}get isSessionValid(){return null!=this.sessionService.getCurrentUser()}get withAdmiral(){return this.appConfigService.getConfig().with_admiral}get withHelmChart(){return this.appConfigService.getConfig().with_chartmuseum}backToProject(){window.sessionStorage&&window.sessionStorage.setItem("fromDetails","true"),this.router.navigate(["/harbor","projects"])}isDefaultTab(e,o){return this.route.snapshot.children[0].routeConfig.path!==e.linkName&&0===o}isTabLinkInOverFlow(){return this.tabLinkNavList.some(e=>e.tabLinkInOverflow&&this.route.snapshot.children[0].routeConfig.path===e.linkName)}onResize(e){this.previousWindowWidth&&this._subject.next(this.previousWindowWidth>e.target.innerWidth?m:"up"),this.previousWindowWidth=e.target.innerWidth}resetTabsForDownSize(){this.tabLinkNavList.filter(e=>!e.tabLinkInOverflow).forEach((e,o)=>{const c=document.getElementById("project-"+e.linkName);c&&c.getBoundingClientRect&&window.innerWidth-document.getElementById("project-"+e.linkName).getBoundingClientRect().right<80&&(this.tabLinkNavList[o].tabLinkInOverflow=!0)})}resetTabsForUpSize(){for(let e=0;e<this.tabLinkNavList.length;e++)this.tabLinkNavList[e].tabLinkInOverflow=!1;this.cdf.detectChanges(),this.resetTabsForDownSize()}getIntegerAndUnit(e,o){return(0,l.gv)(e,(0,l.d9)(a.NZ),o,(0,l.d9)(a.NZ))}getSizeNumber(){return this.projectQuota&&this.projectQuota.used&&this.projectQuota.used.storage?(0,l.Zj)(this.projectQuota.used.storage):0}getSizeUnit(){return this.projectQuota?(0,l.T2)(this.projectQuota.used.storage):null}refreshProjectInfo(){this.getQuotaInfo(),this.getProject()}getProject(){this.projectService.getProject({projectNameOrId:this.projectId.toString()}).subscribe(e=>{e&&(this.currentProject=e)})}}return i.\u0275fac=function(e){return new(e||i)(t.Y36(j.Y),t.Y36(u.gz),t.Y36(u.F0),t.Y36(R.m),t.Y36(I._),t.Y36(s.Hx),t.Y36(b.q),t.Y36(t.sBO),t.Y36(d.P))},i.\u0275cmp=t.Xpm({type:i,selectors:[["project-detail"]],hostBindings:function(e,o){1&e&&t.NdJ("resize",function(p){return o.onResize(p)},!1,t.Jf7)},decls:29,vars:18,consts:[[1,"back-icon"],["class","backStyle",3,"click",4,"ngIf"],["class","backStyle",3,"routerLink",4,"ngIf"],[1,"clr-row"],[1,"clr-col-5"],["sub-header-title","",1,"custom-h2","center"],["shape","cloud-traffic","size","30",4,"ngIf"],["shape","organization","size","30",4,"ngIf"],[1,"ml-05","project-name"],["class","divider filter-divider",4,"ngIf"],["class","role-label",4,"ngIf"],["class","clr-row mt-0 line-height-10",4,"ngIf"],[1,"clr-col-7","flex-end"],[1,"card"],[1,"card-block","container"],[1,"head"],[1,"storage-used","font-weight-700"],[1,"mt-0"],["class","card",4,"ngIf"],["id","project-tabs",1,"tabs"],[4,"ngFor","ngForOf"],[1,"backStyle",3,"click"],[1,"backStyle",3,"routerLink"],["shape","cloud-traffic","size","30"],["shape","organization","size","30"],[1,"divider","filter-divider"],[1,"role-label"],[1,"clr-row","mt-0","line-height-10"],[1,"proxy-cache"],[4,"ngIf"],[1,"mt-0","clr-display-inline-block"],[1,"size-number"],[1,"of"],[1,"progress-block","progress-min-width","progress-div"],[1,"progress","success"],["data-displayval","100%",3,"value","max"],["clrTabLink","","routerLinkActive","active","type","button",3,"clrTabLinkInOverflow","id","routerLink"],[1,"nav-link"]],template:function(e,o){1&e&&(t.TgZ(0,"span",0),t._uU(1,"<"),t.qZA(),t.YNc(2,M,3,3,"a",1),t.YNc(3,N,3,5,"a",2),t.TgZ(4,"div",3)(5,"div",4)(6,"h1",5),t.YNc(7,Q,1,0,"clr-icon",6),t.YNc(8,W,1,0,"clr-icon",7),t.TgZ(9,"span",8),t._uU(10),t.qZA(),t.YNc(11,U,1,0,"div",9),t.YNc(12,D,3,3,"span",10),t.qZA(),t.YNc(13,Z,4,3,"div",11),t.qZA(),t.TgZ(14,"div",12)(15,"div",13)(16,"div",14)(17,"div",15),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"div",16)(21,"div")(22,"h3",17),t._uU(23),t.ALo(24,"translate"),t.qZA()()()()(),t.YNc(25,y,7,4,"div",18),t.qZA()(),t.TgZ(26,"clr-tabs",19),t.YNc(27,H,2,1,"ng-container",20),t.qZA(),t._UZ(28,"router-outlet")),2&e&&(t.xp6(2),t.Q6J("ngIf",o.hasSignedIn),t.xp6(1),t.Q6J("ngIf",!o.hasSignedIn),t.xp6(4),t.Q6J("ngIf",o.isProxyCacheProject),t.xp6(1),t.Q6J("ngIf",!o.isProxyCacheProject),t.xp6(2),t.Oqu(o.currentProject.name),t.xp6(1),t.Q6J("ngIf",o.isMember),t.xp6(1),t.Q6J("ngIf",o.isMember),t.xp6(1),t.Q6J("ngIf",o.isProxyCacheProject),t.xp6(5),t.Oqu(t.lcZ(19,14,"PROJECT.ACCESS_LEVEL")),t.xp6(5),t.hij(" ",t.lcZ(24,16,"true"===(null==o.currentProject||null==o.currentProject.metadata?null:o.currentProject.metadata.public)?"PROJECT.PUBLIC":"PROJECT.PRIVATE")," "),t.xp6(2),t.Q6J("ngIf",o.hasQuotaReadPermission),t.xp6(1),t.ekj("in-overflow",o.isTabLinkInOverFlow()),t.xp6(1),t.Q6J("ngForOf",o.tabLinkNavList))},dependencies:[u.lC,u.rH,u.yS,u.Od,P.qvL,P.S4y,P.gKI,P.Iq$,P.dl,P.Qs7,C.sg,C.O5,S.X$],styles:[".sub-header-title[_ngcontent-%COMP%]{margin-top:12px;margin-bottom:12px}.sub-nav-bg-color[_ngcontent-%COMP%]{background-color:#fafafa}.subnav[_ngcontent-%COMP%]   .nav[_ngcontent-%COMP%]{padding-left:0}.role-label[_ngcontent-%COMP%]{font-size:14px;font-style:italic;letter-spacing:.01em;margin-top:8px}.backStyle[_ngcontent-%COMP%]{color:#007cbb;font-size:16px;cursor:pointer;padding:5px;border-radius:2px}button[_ngcontent-%COMP%]{outline:none}#project-tabs[_ngcontent-%COMP%]   .clear-default-active[_ngcontent-%COMP%]{box-shadow:none}#project-tabs[_ngcontent-%COMP%]   .clear-default-active[_ngcontent-%COMP%]:hover{box-shadow:0 -3px #0077b8 inset}.tabs[_ngcontent-%COMP%]   .nav-link[_ngcontent-%COMP%]{padding:0}.ml-05[_ngcontent-%COMP%]{margin-left:.5rem}.proxy-cache[_ngcontent-%COMP%]{margin-left:2.5rem;font-size:10px;font-weight:300;opacity:.8}.line-height-10[_ngcontent-%COMP%]{line-height:10px}.back-icon[_ngcontent-%COMP%]{margin-right:5px;color:#007cbb;font-size:16px}.flex-end[_ngcontent-%COMP%]{display:flex;justify-content:flex-end}.card[_ngcontent-%COMP%]{width:auto;min-width:10rem;margin-right:.5rem;margin-top:0;height:6rem}.head[_ngcontent-%COMP%]{margin-top:0;margin-bottom:.25rem;font-size:18px}.font-weight-700[_ngcontent-%COMP%]{font-weight:700}.storage-used[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;min-width:8rem}.size-number[_ngcontent-%COMP%]{font-size:1.5rem}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;height:100%}.margin-right-5px[_ngcontent-%COMP%]{margin-right:5px}.center[_ngcontent-%COMP%]{display:flex;align-items:center}.divider[_ngcontent-%COMP%]{height:24px;width:1px;margin-right:24px;margin-left:24px}.progress[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%], .progress-static[_ngcontent-%COMP%]   progress[_ngcontent-%COMP%]{max-height:.48rem}[_nghost-%COMP%]  .progress.warning>progress{color:orange}[_nghost-%COMP%]  .progress.warning>progress::-webkit-progress-value{background-color:orange}[_nghost-%COMP%]  .progress.warning>progress::-moz-progress-bar{background-color:orange}.of[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.project-name[_ngcontent-%COMP%]{text-overflow:ellipsis;max-width:20rem;overflow:hidden}"]}),i})();var h=n(197);const J=[{path:"",component:K,children:[{path:"summary",canActivate:[h.P],data:{permissionParam:{resource:s._W.PROJECT.KEY,action:s._W.PROJECT.VALUE.READ}},loadChildren:()=>n.e(7029).then(n.bind(n,7029)).then(i=>i.SummaryModule)},{path:"repositories",canActivate:[h.P],data:{permissionParam:{resource:s._W.REPOSITORY.KEY,action:s._W.REPOSITORY.VALUE.LIST}},loadChildren:()=>n.e(7687).then(n.bind(n,7687)).then(i=>i.RepositoryModule)},{path:"helm-charts",canActivate:[h.P],data:{permissionParam:{resource:s._W.HELM_CHART.KEY,action:s._W.HELM_CHART.VALUE.LIST}},loadChildren:()=>n.e(8564).then(n.bind(n,8564)).then(i=>i.HelmChartListModule)},{path:"members",canActivate:[h.P],data:{permissionParam:{resource:s._W.MEMBER.KEY,action:s._W.MEMBER.VALUE.LIST}},loadChildren:()=>Promise.all([n.e(4810),n.e(7512)]).then(n.bind(n,7512)).then(i=>i.MemberModule)},{path:"logs",canActivate:[h.P],data:{permissionParam:{resource:s._W.LOG.KEY,action:s._W.LOG.VALUE.LIST}},loadChildren:()=>n.e(2012).then(n.bind(n,2012)).then(i=>i.AuditLogModule)},{path:"labels",canActivate:[h.P],data:{permissionParam:{resource:s._W.LABEL.KEY,action:s._W.LABEL.VALUE.CREATE}},loadChildren:()=>Promise.all([n.e(6567),n.e(7898)]).then(n.bind(n,7898)).then(i=>i.ProjectLabelModule)},{path:"configs",canActivate:[h.P],data:{permissionParam:{resource:s._W.CONFIGURATION.KEY,action:s._W.CONFIGURATION.VALUE.READ}},loadChildren:()=>n.e(4768).then(n.bind(n,4768)).then(i=>i.ProjectConfigModule)},{path:"robot-account",canActivate:[h.P],data:{permissionParam:{resource:s._W.ROBOT.KEY,action:s._W.ROBOT.VALUE.LIST}},loadChildren:()=>Promise.all([n.e(2161),n.e(185)]).then(n.bind(n,185)).then(i=>i.ProjectRobotAccountModule)},{path:"tag-strategy",canActivate:[h.P],data:{permissionParam:{resource:s._W.TAG_RETENTION.KEY,action:s._W.TAG_RETENTION.VALUE.READ}},loadChildren:()=>Promise.all([n.e(668),n.e(1907),n.e(1860)]).then(n.bind(n,1860)).then(i=>i.TagFeatureIntegrationModule)},{path:"webhook",canActivate:[h.P],data:{permissionParam:{resource:s._W.WEBHOOK.KEY,action:s._W.WEBHOOK.VALUE.LIST}},loadChildren:()=>n.e(7359).then(n.bind(n,7359)).then(i=>i.WebhookModule)},{path:"scanner",canActivate:[h.P],data:{permissionParam:{resource:s._W.SCANNER.KEY,action:s._W.SCANNER.VALUE.READ}},loadChildren:()=>n.e(187).then(n.bind(n,187)).then(i=>i.ProjectScannerModule)},{path:"p2p-provider",canActivate:[h.P],data:{permissionParam:{resource:s._W.P2P_PROVIDER.KEY,action:s._W.P2P_PROVIDER.VALUE.READ}},loadChildren:()=>Promise.all([n.e(668),n.e(298),n.e(8592),n.e(4539)]).then(n.bind(n,4539)).then(i=>i.P2pProviderModule)},{path:"",redirectTo:"repositories",pathMatch:"full"}]}];let V=(()=>{class i{}return i.\u0275fac=function(e){return new(e||i)},i.\u0275mod=t.oAB({type:i}),i.\u0275inj=t.cJS({imports:[u.Bz.forChild(J),E.m]}),i})()},197:(A,f,n)=>{n.d(f,{P:()=>v});var u=n(9751),E=n(6742),g=n(4650),O=n(858),s=n(2443),L=n(268);let v=(()=>{class m{constructor(a,l,d){this.router=a,this.errorHandler=l,this.userPermission=d}canActivate(a,l){return this.checkPermission(a.parent.params.id,a.data.permissionParam)}canActivateChild(a,l){return this.canActivate(a,l)}checkPermission(a,l){return new u.y(d=>{this.userPermission.getPermission(a,l.resource,l.action).subscribe({next:t=>{t||this.router.navigate([E.ZB.HARBOR_DEFAULT]),d.next(t)},error:t=>{this.router.navigate([E.ZB.HARBOR_DEFAULT]),d.next(!1),this.errorHandler.error(t)}})})}}return m.\u0275fac=function(a){return new(a||m)(g.LFG(O.F0),g.LFG(s.q),g.LFG(L.Hx))},m.\u0275prov=g.Yz7({token:m,factory:m.\u0275fac,providedIn:"root"}),m})()}}]);