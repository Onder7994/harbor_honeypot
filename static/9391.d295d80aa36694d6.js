"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[9391],{9391:(J,C,a)=>{a.r(C),a.d(C,{DistributionModule:()=>Ne});var d=a(4128),U=a(9646),N=a(2843),l=a(3819),E=a(8746),S=a(4004),A=a(262),g=a(3526);let T=(()=>{class o{}return o.NONE="NONE",o.BASIC="BASIC",o.OAUTH="OAUTH",o.CUSTOM="CUSTOM",o})();var h=a(5832),f=a(8726),v=a(529),e=a(4650),x=a(298),R=a(9151),O=a(2466),H=a(5681),L=a(312),r=a(9375),M=a(6895),k=a(8348),P=a(8372),w=a(1884),B=a(9300),q=a(3900),y=a(7579),F=a(2421),m=a(4006);const Q=["instanceForm"];function Y(o,c){if(1&o&&(e.TgZ(0,"option",40),e._uU(1),e.qZA()),2&o){const n=c.$implicit;e.s9C("value",n.id),e.xp6(1),e.hij(" ",n.name," ")}}function K(o,c){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.NAME_EXISTS")))}function G(o,c){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.ITEM_REQUIRED")))}function z(o,c){if(1&o&&(e.TgZ(0,"clr-control-error"),e.YNc(1,K,3,3,"span",17),e.YNc(2,G,3,3,"span",17),e.qZA()),2&o){const n=e.oxw(),t=e.MAs(25);e.xp6(1),e.Q6J("ngIf",!((t.dirty||t.touched)&&t.invalid)&&n.isNameExisting),e.xp6(1),e.Q6J("ngIf",(t.dirty||t.touched)&&t.invalid)}}function j(o,c){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.ENDPOINT_EXISTS")))}function V(o,c){1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.ENDPOINT_FORMAT")))}function W(o,c){if(1&o&&(e.TgZ(0,"clr-control-error"),e.YNc(1,j,3,3,"span",17),e.YNc(2,V,3,3,"span",17),e.qZA()),2&o){const n=e.oxw(),t=e.MAs(41);e.xp6(1),e.Q6J("ngIf",!((t.dirty||t.touched)&&t.invalid)&&n.isEndpointExisting),e.xp6(1),e.Q6J("ngIf",(t.dirty||t.touched)&&t.invalid)}}function $(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"span")(1,"clr-input-container")(2,"label",41),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",42),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.authData.username=i)}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"clr-control-error"),e._uU(8),e.ALo(9,"translate"),e.qZA()(),e.TgZ(10,"clr-input-container")(11,"label",43),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"input",44),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.authData.password=i)}),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"clr-control-error"),e._uU(17),e.ALo(18,"translate"),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,8,"DISTRIBUTION.USERNAME")),e.xp6(2),e.s9C("placeholder",e.lcZ(6,10,"DISTRIBUTION.SETUP.USERNAME_PLACEHOLDER")),e.Q6J("ngModel",n.authData.username),e.xp6(3),e.hij(" ",e.lcZ(9,12,"TOOLTIP.ITEM_REQUIRED")," "),e.xp6(4),e.Oqu(e.lcZ(13,14,"DISTRIBUTION.PASSWORD")),e.xp6(2),e.s9C("placeholder",e.lcZ(15,16,"DISTRIBUTION.SETUP.PASSWORD_PLACEHOLDER")),e.Q6J("ngModel",n.authData.password),e.xp6(3),e.hij(" ",e.lcZ(18,18,"TOOLTIP.ITEM_REQUIRED")," ")}}function X(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"span")(1,"clr-input-container")(2,"label",45),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"input",46),e.NdJ("ngModelChange",function(i){e.CHM(n);const s=e.oxw();return e.KtG(s.authData.token=i)}),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"clr-control-error"),e._uU(8),e.ALo(9,"translate"),e.qZA()()()}if(2&o){const n=e.oxw();e.xp6(3),e.Oqu(e.lcZ(4,4,"DISTRIBUTION.TOKEN")),e.xp6(2),e.s9C("placeholder",e.lcZ(6,6,"DISTRIBUTION.SETUP.TOKEN_PLACEHOLDER")),e.Q6J("ngModel",n.authData.token),e.xp6(3),e.hij(" ",e.lcZ(9,8,"TOOLTIP.ITEM_REQUIRED")," ")}}function ee(o,c){1&o&&e._UZ(0,"span")}function te(o,c){1&o&&(e.TgZ(0,"clr-tooltip-content",47),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"P2P_PROVIDER.SKIP_CERT_VERIFY")," "))}const Z=function(){return{standalone:!0}};let ie=(()=>{class o{constructor(n,t,i,s){this.distributionService=n,this.msgHandler=t,this.translate=i,this.operationService=s,this.providers=[],this.opened=!1,this.editingMode=!1,this.authData={},this.saveBtnState=r.xp5.DEFAULT,this.refresh=new e.vpe,this.checkBtnState=r.xp5.DEFAULT,this.onTesting=!1,this._nameSubject=new y.x,this._endpointSubject=new y.x,this.isNameExisting=!1,this.isEndpointExisting=!1,this.checkNameOnGoing=!1,this.checkEndpointOngoing=!1}ngOnInit(){this.subscribeName(),this.subscribeEndpoint(),this.reset()}ngOnDestroy(){this._nameSubscription&&(this._nameSubscription.unsubscribe(),this._nameSubscription=null),this._endpointSubscription&&(this._endpointSubscription.unsubscribe(),this._endpointSubscription=null)}subscribeName(){this._nameSubscription||(this._nameSubscription=this._nameSubject.pipe((0,P.b)(500),(0,w.x)(),(0,B.h)(n=>(!this.editingMode||!this.originModelForEdit||this.originModelForEdit.name!==n)&&n.length>0),(0,q.w)(n=>(this.isNameExisting=!1,this.checkNameOnGoing=!0,this.distributionService.ListInstances({q:encodeURIComponent(`name=${n}`)}).pipe((0,E.x)(()=>this.checkNameOnGoing=!1))))).subscribe(n=>{n&&n.length>0&&(this.isNameExisting=!0)}))}subscribeEndpoint(){this._endpointSubscription||(this._endpointSubscription=this._endpointSubject.pipe((0,P.b)(500),(0,w.x)(),(0,B.h)(n=>(!this.editingMode||!this.originModelForEdit||this.originModelForEdit.endpoint!==n)&&this.instanceForm.control.get("endpoint").valid),(0,q.w)(n=>(this.isEndpointExisting=!1,this.checkEndpointOngoing=!0,this.distributionService.ListInstances({q:encodeURIComponent(`endpoint=${n}`)}).pipe((0,E.x)(()=>this.checkEndpointOngoing=!1))))).subscribe(n=>{n&&n.length>0&&(this.isEndpointExisting=!0)}))}inputName(){this._nameSubject.next(this.model.name)}inputEndpoint(){this._endpointSubject.next(this.model.endpoint)}get isValid(){return this.instanceForm&&this.instanceForm.valid}get title(){return this.editingMode?"DISTRIBUTION.EDIT_INSTANCE":"DISTRIBUTION.SETUP_NEW_INSTANCE"}authModeChange(){if(this.editingMode&&this.model.auth_mode===this.originModelForEdit.auth_mode)this.authData=(0,g.d9)(this.originModelForEdit.auth_info);else switch(this.model.auth_mode){case T.BASIC:this.authData={password:"",username:""};break;case T.OAUTH:this.authData={token:""};break;default:this.authData=null}}_open(){this.inlineAlert.close(),this.opened=!0}_close(){this.opened=!1,this.reset()}reset(){this.model={name:"",endpoint:"",enabled:!0,vendor:"",auth_mode:T.NONE,auth_info:this.authData},this.instanceForm.reset({enabled:!0})}cancel(){this._close()}submit(){if(this.editingMode){const n=new l.gB;n.name="DISTRIBUTION.UPDATE_INSTANCE",n.data.id=this.model.id,n.state=l.yb.progressing,n.data.name=this.model.name,this.operationService.publishInfo(n),this.saveBtnState=r.xp5.LOADING;const t=(0,g.d9)(this.originModelForEdit);t.vendor=this.model.vendor,t.name=this.model.name,t.endpoint=this.model.endpoint,t.insecure=this.model.insecure,t.enabled=this.model.enabled,t.auth_mode=this.model.auth_mode,t.description=this.model.description,t.auth_mode!==T.NONE?t.auth_info=this.authData:delete t.auth_info,this.distributionService.UpdateInstance({preheatInstanceName:this.model.name,instance:this.handleInstance(t)}).subscribe(i=>{this.translate.get("DISTRIBUTION.UPDATE_SUCCESS").subscribe(s=>{(0,l.hm)(n,l.yb.success),this.msgHandler.info(s)}),this.saveBtnState=r.xp5.SUCCESS,this._close(),this.refresh.emit()},i=>{const s=(0,h.Po)(i);this.translate.get("DISTRIBUTION.UPDATE_FAILED").subscribe(p=>{this.translate.get(s).subscribe(u=>{(0,l.hm)(n,l.yb.failure,p),this.inlineAlert.showInlineError(p+": "+u),this.saveBtnState=r.xp5.ERROR})}),this.msgHandler.handleErrorPopupUnauthorized(i)})}else{const n=new l.gB;n.name="DISTRIBUTION.CREATE_INSTANCE",n.state=l.yb.progressing,n.data.name=this.model.name,this.operationService.publishInfo(n),this.saveBtnState=r.xp5.LOADING,this.model.auth_mode!==T.NONE?this.model.auth_info=this.authData:delete this.model.auth_info,this.model.insecure=!!this.model.insecure,this.distributionService.CreateInstance({instance:this.model}).subscribe(t=>{this.translate.get("DISTRIBUTION.CREATE_SUCCESS").subscribe(i=>{(0,l.hm)(n,l.yb.success),this.msgHandler.info(i)}),this.saveBtnState=r.xp5.SUCCESS,this._close(),this.refresh.emit()},t=>{const i=(0,h.Po)(t);this.translate.get("DISTRIBUTION.CREATE_FAILED").subscribe(s=>{this.translate.get(i).subscribe(p=>{(0,l.hm)(n,l.yb.failure,s),this.inlineAlert.showInlineError(s+": "+p),this.saveBtnState=r.xp5.ERROR})}),this.msgHandler.handleErrorPopupUnauthorized(t)})}}openSetupModal(n,t){this.editingMode=n,this._open(),n?(this.model=(0,g.d9)(t),this.originModelForEdit=(0,g.d9)(t),this.originModelForEdit.insecure=!!t.insecure,this.model.insecure=!!t.insecure,this.authData=this.model.auth_info||{}):(this.reset(),this.providers&&this.providers.length&&this.providers.forEach(i=>{"dragonfly"===i.id&&(this.model.vendor=i.id)}))}hasChangesForEdit(){return!this.editingMode||this.model.vendor!==this.originModelForEdit.vendor||this.model.name!==this.originModelForEdit.name||this.model.description!==this.originModelForEdit.description||this.model.endpoint!==this.originModelForEdit.endpoint||this.model.enabled!=this.originModelForEdit.enabled||this.model.insecure!=this.originModelForEdit.insecure||this.model.auth_mode!==this.originModelForEdit.auth_mode||this.model.auth_mode===T.BASIC&&(this.originModelForEdit.auth_info.username!==this.authData.username||this.originModelForEdit.auth_info.password!==this.authData.password)||this.model.auth_mode===T.OAUTH&&this.originModelForEdit.auth_info.token!==this.authData.token}onTestEndpoint(){this.onTesting=!0,this.checkBtnState=r.xp5.LOADING;const n=(0,g.d9)(this.model);n.id=0,this.distributionService.PingInstances({instance:this.handleInstance(n)}).pipe((0,E.x)(()=>this.onTesting=!1)).subscribe(t=>{this.checkBtnState=r.xp5.SUCCESS,this.inlineAlert.showInlineSuccess({message:"SCANNER.TEST_PASS"})},t=>{this.inlineAlert.showInlineError("P2P_PROVIDER.TEST_FAILED"),this.checkBtnState=r.xp5.ERROR})}handleInstance(n){if(n){const t=(0,g.d9)(n);return delete t.hasCheckHealth,delete t.pingStatus,t}return n}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(x.L),e.Y36(R.d),e.Y36(O.sK),e.Y36(L.f9))},o.\u0275cmp=e.Xpm({type:o,selectors:[["dist-setup-modal"]],viewQuery:function(n,t){if(1&n&&(e.Gf(Q,7),e.Gf(F.l,5)),2&n){let i;e.iGM(i=e.CRH())&&(t.instanceForm=i.first),e.iGM(i=e.CRH())&&(t.inlineAlert=i.first)}},inputs:{providers:"providers"},outputs:{refresh:"refresh"},decls:93,vars:75,consts:[[3,"clrModalOpen","clrModalClosable","clrModalStaticBackdrop","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body"],[1,"clr-form","clr-form-horizontal"],["instanceForm","ngForm"],[1,"required"],["clrSelect","","name","provider","id","provider","required","",1,"width-280",3,"ngModel","ngModelChange"],["value","",1,"display-none"],[3,"value",4,"ngFor","ngForOf"],[1,"clr-form-control"],["for","name",1,"required","clr-control-label"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["required","","type","text","id","name","autocomplete","off","name","name",1,"width-280","clr-input",3,"ngModel","ngModelChange","input"],["nameNg","ngModel"],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline",3,"hidden"],[4,"ngIf"],["clrTextarea","","type","text","id","description","row","3",1,"width-280",3,"ngModel","ngModelOptions","ngModelChange"],["required","","pattern","^([hH][tT]{2}[pP]:\\/\\/|[hH][tT]{2}[pP][sS]:\\/\\/)(.*?)*$","type","text","id","endpoint","placeholder","http(s)://192.168.1.1","name","endpoint","autocomplete","off",1,"width-280","clr-input",3,"ngModel","ngModelChange","input"],["endpointNg","ngModel"],["clrInline",""],["clrRadio","","type","radio","name","auth_mode","id","none_mode","value","NONE",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","none_mode"],["clrRadio","","type","radio","name","auth_mode","id","basic_mode","value","BASIC",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","basic_mode"],["clrRadio","","type","radio","name","auth_mode","id","token_mode","value","OAUTH",3,"ngModel","ngModelOptions","ngModelChange","change"],["for","token_mode"],[1,"clr-control-label"],[1,"clr-control-container","padding-top-3"],["clrCheckbox","","id","enabled","name","enabled","type","checkbox",3,"ngModel","ngModelChange"],["for","enabled"],["name","insecure","clrCheckbox","","type","checkbox","id","insecure",3,"ngModel","ngModelChange"],["for","insecure"],["clrTooltipTrigger","","shape","info-circle","size","24",1,"color-57"],["clrPosition","top-left","clrSize","md",4,"clrIfOpen"],[1,"modal-footer"],["id","button-test","type","button",1,"btn","btn-outline",3,"clrLoading","disabled","click"],["type","button",1,"btn","btn-outline",3,"click"],["id","instance-ok","type","button",1,"btn","btn-primary",3,"clrLoading","disabled","click"],[3,"value"],["for","auth_data_username",1,"required","clr-control-label"],["clrInput","","required","","type","text","id","auth_data_username","name","auth_data_username","autocomplete","off",1,"width-280",3,"ngModel","placeholder","ngModelChange"],["for","auth_data_password",1,"required","clr-control-label"],["clrInput","","required","","type","password","id","auth_data_password","name","auth_data_password","autocomplete","off",1,"width-280",3,"ngModel","placeholder","ngModelChange"],["for","auth_data_token",1,"required","clr-control-label"],["clrInput","","required","","type","password","id","auth_data_token","name","auth_data_token","autocomplete","off",1,"width-280",3,"ngModel","placeholder","ngModelChange"],["clrPosition","top-left","clrSize","md"]],template:function(n,t){if(1&n&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(s){return t.opened=s}),e.TgZ(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2),e._UZ(5,"inline-alert",1),e.TgZ(6,"form",3,4)(8,"clr-select-container")(9,"label",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"select",6),e.NdJ("ngModelChange",function(s){return t.model.vendor=s}),e._UZ(13,"option",7),e.YNc(14,Y,2,2,"option",8),e.qZA(),e.TgZ(15,"clr-control-error"),e._uU(16),e.ALo(17,"translate"),e.qZA()(),e.TgZ(18,"div",9)(19,"label",10),e._uU(20),e.ALo(21,"translate"),e.qZA(),e.TgZ(22,"div",11)(23,"div",12)(24,"input",13,14),e.NdJ("ngModelChange",function(s){return t.model.name=s})("input",function(){return t.inputName()}),e.qZA(),e._UZ(26,"clr-icon",15)(27,"span",16),e.qZA(),e.YNc(28,z,3,2,"clr-control-error",17),e.qZA()(),e.TgZ(29,"clr-textarea-container")(30,"label"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"textarea",18),e.NdJ("ngModelChange",function(s){return t.model.description=s}),e.qZA()(),e.TgZ(34,"div",9)(35,"label",10),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"div",11)(39,"div",12)(40,"input",19,20),e.NdJ("ngModelChange",function(s){return t.model.endpoint=s})("input",function(){return t.inputEndpoint()}),e.qZA(),e._UZ(42,"clr-icon",15)(43,"span",16),e.qZA(),e.YNc(44,W,3,2,"clr-control-error",17),e.qZA()(),e.TgZ(45,"clr-radio-container",21)(46,"label"),e._uU(47),e.ALo(48,"translate"),e.qZA(),e.TgZ(49,"clr-radio-wrapper")(50,"input",22),e.NdJ("ngModelChange",function(s){return t.model.auth_mode=s})("change",function(){return t.authModeChange()}),e.qZA(),e.TgZ(51,"label",23),e._uU(52,"NONE"),e.qZA()(),e.TgZ(53,"clr-radio-wrapper")(54,"input",24),e.NdJ("ngModelChange",function(s){return t.model.auth_mode=s})("change",function(){return t.authModeChange()}),e.qZA(),e.TgZ(55,"label",25),e._uU(56,"Basic"),e.qZA()(),e.TgZ(57,"clr-radio-wrapper")(58,"input",26),e.NdJ("ngModelChange",function(s){return t.model.auth_mode=s})("change",function(){return t.authModeChange()}),e.qZA(),e.TgZ(59,"label",27),e._uU(60,"OAuth"),e.qZA()()(),e.YNc(61,$,19,20,"span",17),e.YNc(62,X,10,10,"span",17),e.YNc(63,ee,1,0,"span",17),e.TgZ(64,"div",9)(65,"label",28),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",29)(69,"clr-checkbox-wrapper")(70,"input",30),e.NdJ("ngModelChange",function(s){return t.model.enabled=s}),e.qZA(),e.TgZ(71,"label",31)(72,"span"),e._uU(73),e.ALo(74,"translate"),e.qZA()()(),e.TgZ(75,"clr-checkbox-wrapper")(76,"input",32),e.NdJ("ngModelChange",function(s){return t.model.insecure=s}),e.qZA(),e.TgZ(77,"label",33),e._uU(78),e.ALo(79,"translate"),e.TgZ(80,"clr-tooltip"),e._UZ(81,"clr-icon",34),e.YNc(82,te,3,3,"clr-tooltip-content",35),e.qZA()()()()()()(),e.TgZ(83,"div",36)(84,"button",37),e.NdJ("click",function(){return t.onTestEndpoint()}),e._uU(85),e.ALo(86,"translate"),e.qZA(),e.TgZ(87,"button",38),e.NdJ("click",function(){return t.cancel()}),e._uU(88),e.ALo(89,"translate"),e.qZA(),e.TgZ(90,"button",39),e.NdJ("click",function(){return t.submit()}),e._uU(91),e.ALo(92,"translate"),e.qZA()()()),2&n){const i=e.MAs(25),s=e.MAs(41);e.Q6J("clrModalOpen",t.opened)("clrModalClosable",!1)("clrModalStaticBackdrop",!0),e.xp6(2),e.Oqu(e.lcZ(3,45,t.title)),e.xp6(8),e.Oqu(e.lcZ(11,47,"DISTRIBUTION.PROVIDER")),e.xp6(2),e.Q6J("ngModel",t.model.vendor),e.xp6(2),e.Q6J("ngForOf",t.providers),e.xp6(2),e.hij(" ",e.lcZ(17,49,"TOOLTIP.ITEM_REQUIRED")," "),e.xp6(4),e.Oqu(e.lcZ(21,51,"DISTRIBUTION.NAME")),e.xp6(2),e.ekj("clr-error",(i.dirty||i.touched)&&i.invalid||t.isNameExisting),e.xp6(2),e.Q6J("ngModel",t.model.name),e.xp6(3),e.Q6J("hidden",!t.checkNameOnGoing),e.xp6(1),e.Q6J("ngIf",(i.dirty||i.touched)&&i.invalid||t.isNameExisting),e.xp6(3),e.Oqu(e.lcZ(32,53,"DISTRIBUTION.DESCRIPTION")),e.xp6(2),e.Q6J("ngModel",t.model.description)("ngModelOptions",e.DdM(71,Z)),e.xp6(3),e.Oqu(e.lcZ(37,55,"DISTRIBUTION.ENDPOINT")),e.xp6(2),e.ekj("clr-error",(s.dirty||s.touched)&&s.invalid||t.isEndpointExisting),e.xp6(2),e.Q6J("ngModel",t.model.endpoint),e.xp6(3),e.Q6J("hidden",!t.checkEndpointOngoing),e.xp6(1),e.Q6J("ngIf",(s.dirty||s.touched)&&s.invalid||t.isEndpointExisting),e.xp6(3),e.Oqu(e.lcZ(48,57,"DISTRIBUTION.AUTH_MODE")),e.xp6(3),e.Q6J("ngModel",t.model.auth_mode)("ngModelOptions",e.DdM(72,Z)),e.xp6(4),e.Q6J("ngModel",t.model.auth_mode)("ngModelOptions",e.DdM(73,Z)),e.xp6(4),e.Q6J("ngModel",t.model.auth_mode)("ngModelOptions",e.DdM(74,Z)),e.xp6(3),e.Q6J("ngIf","BASIC"===t.model.auth_mode),e.xp6(1),e.Q6J("ngIf","OAUTH"===t.model.auth_mode),e.xp6(1),e.Q6J("ngIf","NONE"===t.model.auth_mode),e.xp6(3),e.Oqu(e.lcZ(67,59,"SCANNER.OPTIONS")),e.xp6(4),e.Q6J("ngModel",t.model.enabled),e.xp6(3),e.Oqu(e.lcZ(74,61,"DISTRIBUTION.ENABLED")),e.xp6(3),e.Q6J("ngModel",t.model.insecure),e.xp6(2),e.hij("",e.lcZ(79,63,"SCANNER.SKIP")," "),e.xp6(6),e.Q6J("clrLoading",t.checkBtnState)("disabled",!t.isValid||t.onTesting||t.checkNameOnGoing||t.checkEndpointOngoing||t.isEndpointExisting||t.isNameExisting),e.xp6(1),e.hij(" ",e.lcZ(86,65,"SCANNER.TEST_CONNECTION")," "),e.xp6(3),e.hij(" ",e.lcZ(89,67,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("clrLoading",t.saveBtnState)("disabled",!t.isValid||!t.hasChangesForEdit()||t.checkNameOnGoing||t.checkEndpointOngoing),e.xp6(1),e.hij(" ",e.lcZ(92,69,"BUTTON.OK")," ")}},dependencies:[m._Y,m.YN,m.Kr,m.Fj,m.Wl,m.EJ,m._,m.JJ,m.JL,m.Q7,m.c5,m.On,m.F,r.qvL,r.qAN,r.VLi,r.cCV,r.nqY,r.MPb,r.MgK,r.VqA,r.KKC,r.PEh,r.xRP,r.G55,r.asN,r.DAq,r.EeQ,r.otW,r.dTv,r.XE5,r.LAP,r.Jmj,r.bMv,r.zDF,M.sg,M.O5,F.l,O.X$],styles:[".display-none[_ngcontent-%COMP%]{display:none}.width-280[_ngcontent-%COMP%]{width:280px}"]}),o})();var oe=a(3046);const se=["setupModal"];function re(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.operateInstances("enable",i.selectedRow))}),e._UZ(1,"clr-icon",32),e._uU(2,"\xa0 "),e.TgZ(3,"span",33),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&o){const n=e.oxw(2);e.Q6J("disabled",!(n.selectedRow&&1===n.selectedRow.length&&!n.selectedRow[0].enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.ENABLED_BUTTON"))}}function ae(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw(2);return e.KtG(i.operateInstances("disable",i.selectedRow))}),e._UZ(1,"clr-icon",34),e._uU(2,"\xa0 "),e.TgZ(3,"span",35),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&o){const n=e.oxw(2);e.Q6J("disabled",!(n.selectedRow&&1===n.selectedRow.length&&n.selectedRow[0].enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.DISABLED_BUTTON"))}}function le(o,c){if(1&o){const n=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"clr-dropdown")(2,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.editInstance())}),e._UZ(3,"clr-icon",26),e._uU(4,"\xa0 "),e.TgZ(5,"span",27),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,re,6,4,"button",28),e.YNc(9,ae,6,4,"button",28),e._UZ(10,"div",29),e.TgZ(11,"button",25),e.NdJ("click",function(){e.CHM(n);const i=e.oxw();return e.KtG(i.operateInstances("delete",i.selectedRow))}),e._UZ(12,"clr-icon",30),e._uU(13,"\xa0 "),e.TgZ(14,"span",31),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()}if(2&o){const n=e.oxw();e.xp6(2),e.Q6J("disabled",!(n.selectedRow&&1===n.selectedRow.length)),e.xp6(4),e.Oqu(e.lcZ(7,6,"BUTTON.EDIT")),e.xp6(2),e.Q6J("ngIf",n.selectedRow&&1===n.selectedRow.length&&!n.selectedRow[0].enabled),e.xp6(1),e.Q6J("ngIf",!(n.selectedRow&&1===n.selectedRow.length&&!n.selectedRow[0].enabled)),e.xp6(2),e.Q6J("disabled",n.selectedRow.length<1),e.xp6(4),e.Oqu(e.lcZ(16,8,"BUTTON.DELETE"))}}function ce(o,c){1&o&&e._UZ(0,"span",41)}function de(o,c){1&o&&(e.TgZ(0,"span",44),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.HEALTHY")))}function ue(o,c){1&o&&(e.TgZ(0,"span",45),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"SCANNER.UNHEALTHY")))}function pe(o,c){if(1&o&&(e.YNc(0,de,3,3,"span",42),e.YNc(1,ue,3,3,"ng-template",null,43,e.W1O)),2&o){const n=e.MAs(2),t=e.oxw().$implicit;e.Q6J("ngIf","Healthy"===t.pingStatus)("ngIfElse",n)}}function he(o,c){1&o&&(e.TgZ(0,"div",46),e._UZ(1,"clr-icon",47),e.TgZ(2,"span",48),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.ENABLED")))}function ge(o,c){1&o&&(e.TgZ(0,"div",46),e._UZ(1,"clr-icon",49),e.TgZ(2,"span",48),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&o&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"WEBHOOK.DISABLED")))}function _e(o,c){if(1&o&&(e.TgZ(0,"clr-dg-row",36)(1,"clr-dg-cell")(2,"span"),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.qZA(),e.TgZ(6,"clr-dg-cell",37)(7,"span"),e._uU(8),e.qZA()(),e.TgZ(9,"clr-dg-cell"),e.YNc(10,ce,1,0,"span",38),e.YNc(11,pe,3,2,"ng-template",null,39,e.W1O),e.qZA(),e.TgZ(13,"clr-dg-cell"),e.YNc(14,he,5,3,"div",40),e.YNc(15,ge,5,3,"div",40),e.qZA(),e.TgZ(16,"clr-dg-cell"),e._uU(17),e.qZA(),e.TgZ(18,"clr-dg-cell"),e._uU(19),e.ALo(20,"harborDatetime"),e.qZA(),e.TgZ(21,"clr-dg-cell"),e._uU(22),e.qZA()()),2&o){const n=c.$implicit,t=e.MAs(12),i=e.oxw();e.Q6J("clrDgItem",n),e.xp6(3),e.Oqu(n.name),e.xp6(2),e.Oqu(n.endpoint),e.xp6(3),e.Oqu(n.vendor),e.xp6(2),e.Q6J("ngIf",!n.hasCheckHealth)("ngIfElse",t),e.xp6(4),e.Q6J("ngIf",n.enabled),e.xp6(1),e.Q6J("ngIf",!n.enabled),e.xp6(2),e.Oqu(n.auth_mode),e.xp6(2),e.Oqu(e.xi3(20,11,i.fmtTime(n.setup_timestamp),"short")),e.xp6(3),e.Oqu(n.description)}}function me(o,c){if(1&o&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&o){e.oxw();const n=e.MAs(57);e.xp6(1),e.lnq("",n.firstItem+1," - ",n.lastItem+1," ",e.lcZ(2,3,"HELM_CHART.OF")," ")}}const Te=function(){return[15,25,50]};let Se=(()=>{class o{constructor(n,t,i,s,p){this.disService=n,this.msgHandler=t,this.translate=i,this.operationDialogService=s,this.operationService=p,this.instances=[],this.selectedRow=[],this.pageSize=(0,g.tb)(g.V2.DISTRIBUTION_INSTANCE_COMPONENT),this.currentPage=1,this.totalCount=0,this.loading=!0,this.providerMap={},this.providers=[],this.operationSubscription=s.confirmationConfirm$.subscribe(u=>{u&&19===u.source&&1===u.state&&this.operateInstance(u.data)})}get inProgress(){return this.loading}ngOnInit(){this.getProviders()}ngOnDestroy(){this.operationSubscription&&this.operationSubscription.unsubscribe(),this.chanSub&&this.chanSub.unsubscribe()}getProviders(){this.disService.ListProviders().subscribe(n=>{n&&n.length&&(this.providers=n,n.forEach(t=>{this.providerMap[t.id]=t}))},n=>this.msgHandler.error(n))}loadData(n){n&&n.page&&(this.pageSize=n.page.size,(0,g.Pe)(g.V2.DISTRIBUTION_INSTANCE_COMPONENT,this.pageSize)),this.selectedRow=[];const t={page:this.currentPage,pageSize:this.pageSize};this.queryString&&(t.q=encodeURIComponent(`name=~${this.queryString}`)),this.loading=!0,this.disService.ListInstancesResponse(t).pipe((0,E.x)(()=>this.loading=!1)).subscribe(i=>{this.totalCount=Number.parseInt(i.headers.get("x-total-count"),10),this.instances=i.body,this.pingInstances()},i=>this.msgHandler.error(i))}pingInstances(){this.instances&&this.instances.length&&this.instances.forEach((n,t)=>{this.disService.PingInstances({instance:this.handleInstance(n)}).pipe((0,E.x)(()=>this.instances[t].hasCheckHealth=!0)).subscribe(i=>{this.instances[t].pingStatus="Healthy"},i=>{this.instances[t].pingStatus="Unhealthy"})})}refresh(){this.queryString=null,this.currentPage=1,this.loadData()}doFilter(n){this.currentPage=1,this.queryString=n,this.loadData()}addInstance(){this.setupModal.openSetupModal(!1)}editInstance(){this.selectedRow&&1===this.selectedRow.length&&this.setupModal.openSetupModal(!0,(0,g.d9)(this.selectedRow[0]))}setAsDefault(){if(this.selectedRow&&1===this.selectedRow.length){const n=new l.gB;n.name="DISTRIBUTION.SET_AS_DEFAULT",n.data.id=this.selectedRow[0].id,n.state=l.yb.progressing,n.data.name=this.selectedRow[0].name,this.operationService.publishInfo(n);const t=(0,g.d9)(this.selectedRow[0]);t.default=!0,this.disService.UpdateInstance({instance:this.handleInstance(t),preheatInstanceName:this.selectedRow[0].name}).subscribe(()=>{this.translate.get("DISTRIBUTION.SET_DEFAULT_SUCCESS").subscribe(i=>{(0,l.hm)(n,l.yb.success),this.msgHandler.info(i)}),this.refresh()},i=>{const s=(0,h.Po)(i);this.translate.get("DISTRIBUTION.SET_DEFAULT_FAILED").subscribe(p=>{(0,l.hm)(n,l.yb.failure,p),this.translate.get(s).subscribe(u=>{this.msgHandler.error(p+": "+u)})})})}}operateInstances(n,t){let s,p,u,i=[];switch(n){case"delete":s="DISTRIBUTION.DELETION_TITLE",p="DISTRIBUTION.DELETION_SUMMARY",u=2;break;case"enable":s="DISTRIBUTION.ENABLE_TITLE",p="DISTRIBUTION.ENABLE_SUMMARY",u=4;break;case"disable":s="DISTRIBUTION.DISABLE_TITLE",p="DISTRIBUTION.DISABLE_SUMMARY",u=5;break;default:return}t&&t.length&&t.forEach(Oe=>{i.push(Oe.name)});let D=new f.c(s,p,i.join(","),{operation:n,instances:t},19,u);this.operationDialogService.openComfirmDialog(D)}operateInstance(n){let t=[];if(n.instances&&n.instances.length){switch(n.operation){case"delete":n.instances.forEach(i=>{t.push(this.deleteInstance(i))});break;case"enable":n.instances.forEach(i=>{t.push(this.enableInstance(i))});break;case"disable":n.instances.forEach(i=>{t.push(this.disableInstance(i))})}(0,d.D)(...t).subscribe(i=>{if("delete"===n.operation){let s,p=0;i&&i.length&&i.forEach(u=>{u instanceof v.UA&&(s=(0,h.Po)(u),p+=1)}),0===p?(this.translate.get("DISTRIBUTION.DELETED_SUCCESS").subscribe(u=>{this.msgHandler.info(u)}),this.selectedRow=[],this.refresh()):i&&i.length===p&&s?this.msgHandler.handleError(s):s&&(this.msgHandler.handleError(s),this.selectedRow=[],this.refresh())}else this.selectedRow=[],this.refresh()},i=>{this.msgHandler.error(i)})}}deleteInstance(n){let t=new l.gB;return t.name="DISTRIBUTION.DELETE_INSTANCE",t.data.id=n.id,t.state=l.yb.progressing,t.data.name=n.name,this.operationService.publishInfo(t),this.disService.DeleteInstance({preheatInstanceName:n.name}).pipe((0,S.U)(()=>{this.translate.get("DISTRIBUTION.DELETED_SUCCESS").subscribe(i=>{(0,l.hm)(t,l.yb.success)})}),(0,A.K)(i=>{const s=(0,h.Po)(i);return this.translate.get("DISTRIBUTION.DELETED_FAILED").subscribe(p=>{this.translate.get(s).subscribe(u=>{(0,l.hm)(t,l.yb.failure,p+": "+u)})}),(0,U.of)(i)}))}enableInstance(n){let t=new l.gB;t.name="DISTRIBUTION.ENABLE_INSTANCE",t.data.id=n.id,t.state=l.yb.progressing,t.data.name=n.name,this.operationService.publishInfo(t);const i=(0,g.d9)(n);return i.enabled=!0,this.disService.UpdateInstance({instance:this.handleInstance(i),preheatInstanceName:n.name}).pipe((0,S.U)(()=>{this.translate.get("DISTRIBUTION.ENABLE_SUCCESS").subscribe(s=>{(0,l.hm)(t,l.yb.success),this.msgHandler.info(s)})}),(0,A.K)(s=>{const p=(0,h.Po)(s);return this.translate.get("DISTRIBUTION.ENABLE_FAILED").subscribe(u=>{(0,l.hm)(t,l.yb.failure,u),this.translate.get(p).subscribe(D=>{this.msgHandler.error(u+": "+D)})}),(0,N._)(s)}))}disableInstance(n){let t=new l.gB;t.name="DISTRIBUTION.DISABLE_INSTANCE",t.data.id=n.id,t.state=l.yb.progressing,t.data.name=n.name,this.operationService.publishInfo(t);const i=(0,g.d9)(n);return i.enabled=!1,this.disService.UpdateInstance({instance:this.handleInstance(i),preheatInstanceName:n.name}).pipe((0,S.U)(()=>{this.translate.get("DISTRIBUTION.DISABLE_SUCCESS").subscribe(s=>{(0,l.hm)(t,l.yb.success),this.msgHandler.info(s)})}),(0,A.K)(s=>{const p=(0,h.Po)(s);return this.translate.get("DISTRIBUTION.DISABLE_FAILED").subscribe(u=>{(0,l.hm)(t,l.yb.failure,u),this.translate.get(p).subscribe(D=>{this.msgHandler.error(u+": "+D)})}),(0,N._)(s)}))}fmtTime(n){return(new Date).setTime(1e3*n)}showDefaultIcon(n,t){n&&n.target&&(n.target.src="kraken"===t?"images/kraken-logo-color.svg":"images/harbor-logo.svg")}handleInstance(n){if(n){const t=(0,g.d9)(n);return delete t.hasCheckHealth,delete t.pingStatus,t}return n}}return o.\u0275fac=function(n){return new(n||o)(e.Y36(x.L),e.Y36(R.d),e.Y36(O.sK),e.Y36(H.O),e.Y36(L.f9))},o.\u0275cmp=e.Xpm({type:o,selectors:[["dist-instances"]],viewQuery:function(n,t){if(1&n&&e.Gf(se,5),2&n){let i;e.iGM(i=e.CRH())&&(t.setupModal=i.first)}},decls:68,vars:60,consts:[[1,"row"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[1,"custom-h2"],[3,"clrDgLoading","clrDgSelected","clrDgRefresh","clrDgSelectedChange"],[1,"clr-row"],[1,"clr-col-7"],["id","new-instance","type","button",1,"btn","btn-secondary",3,"click"],["shape","plus","size","16"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["id","member-action"],["shape","caret down"],[4,"clrIfOpen"],[1,"clr-col-5"],[1,"action-head-pos"],[3,"withDivider","filterPlaceholder","filterEvt"],[1,"refresh-btn"],["shape","refresh","ng-disabled","inProgress",3,"hidden","click"],[1,"spinner","spinner-inline",3,"hidden"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPageSize","clrDgTotalItems","clrDgPage","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"providers","refresh"],["setupModal",""],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["shape","edit","size","16"],["id","distribution-edit"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[1,"dropdown-divider"],["shape","window-close","size","16"],["id","distribution-delete"],["shape","connect","size","16"],["id","distribution-enable"],["shape","disconnect","size","16"],["id","distribution-disable"],[3,"clrDgItem"],[1,"no-wrapper"],["class","spinner spinner-inline ml-2",4,"ngIf","ngIfElse"],["elseBlockLoading",""],["class","icon-wrap",4,"ngIf"],[1,"spinner","spinner-inline","ml-2"],["class","label label-success",4,"ngIf","ngIfElse"],["elseBlock",""],[1,"label","label-success"],[1,"label","label-danger"],[1,"icon-wrap"],["shape","check-circle","size","20",1,"is-success","enabled-icon"],[1,"margin-left-5px"],["shape","exclamation-triangle","size","20",1,"is-warning"]],template:function(n,t){1&n&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h2",2),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div")(6,"clr-datagrid",3),e.NdJ("clrDgRefresh",function(s){return t.loadData(s)})("clrDgSelectedChange",function(s){return t.selectedRow=s}),e.TgZ(7,"clr-dg-action-bar")(8,"div",4)(9,"div",5)(10,"button",6),e.NdJ("click",function(){return t.addInstance()}),e._UZ(11,"clr-icon",7),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"clr-dropdown",8)(15,"span",9),e._uU(16),e.ALo(17,"translate"),e._UZ(18,"clr-icon",10),e.qZA(),e.YNc(19,le,17,10,"clr-dropdown-menu",11),e.qZA()(),e.TgZ(20,"div",12)(21,"div",13)(22,"hbr-filter",14),e.NdJ("filterEvt",function(s){return t.doFilter(s)}),e.ALo(23,"translate"),e.qZA(),e.TgZ(24,"span",15)(25,"clr-icon",16),e.NdJ("click",function(){return t.refresh()}),e.qZA(),e._UZ(26,"span",17),e.qZA()()()()(),e.TgZ(27,"clr-dg-column"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"clr-dg-column"),e._uU(31),e.ALo(32,"translate"),e.qZA(),e.TgZ(33,"clr-dg-column"),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.TgZ(36,"clr-dg-column"),e._uU(37),e.ALo(38,"translate"),e.qZA(),e.TgZ(39,"clr-dg-column"),e._uU(40),e.ALo(41,"translate"),e.qZA(),e.TgZ(42,"clr-dg-column"),e._uU(43),e.ALo(44,"translate"),e.qZA(),e.TgZ(45,"clr-dg-column"),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.TgZ(48,"clr-dg-column"),e._uU(49),e.ALo(50,"translate"),e.qZA(),e.TgZ(51,"clr-dg-placeholder"),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.YNc(54,_e,23,14,"clr-dg-row",18),e.TgZ(55,"clr-dg-footer")(56,"clr-dg-pagination",19,20),e.NdJ("clrDgPageChange",function(s){return t.currentPage=s}),e.TgZ(58,"clr-dg-page-size",21),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.YNc(61,me,3,5,"span",22),e.TgZ(62,"span"),e._uU(63),e.ALo(64,"translate"),e.qZA()()()()()()(),e.TgZ(65,"div")(66,"dist-setup-modal",23,24),e.NdJ("refresh",function(){return t.refresh()}),e.qZA()()),2&n&&(e.xp6(3),e.hij(" ",e.lcZ(4,29,"SIDE_NAV.DISTRIBUTIONS.INSTANCES")," "),e.xp6(3),e.Q6J("clrDgLoading",t.inProgress)("clrDgSelected",t.selectedRow),e.xp6(6),e.hij("\xa0",e.lcZ(13,31,"DISTRIBUTION.ADD_ACTION")," "),e.xp6(2),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.Oqu(e.lcZ(17,33,"BUTTON.ACTIONS")),e.xp6(6),e.s9C("filterPlaceholder",e.lcZ(23,35,"DISTRIBUTION.FILTER_INSTANCE_PLACEHOLDER")),e.Q6J("withDivider",!0),e.xp6(3),e.Q6J("hidden",t.inProgress),e.xp6(1),e.Q6J("hidden",!1===t.inProgress),e.xp6(2),e.Oqu(e.lcZ(29,37,"DISTRIBUTION.NAME")),e.xp6(3),e.Oqu(e.lcZ(32,39,"DISTRIBUTION.ENDPOINT")),e.xp6(3),e.Oqu(e.lcZ(35,41,"DISTRIBUTION.PROVIDER")),e.xp6(3),e.Oqu(e.lcZ(38,43,"DISTRIBUTION.STATUS")),e.xp6(3),e.Oqu(e.lcZ(41,45,"DISTRIBUTION.ENABLED")),e.xp6(3),e.Oqu(e.lcZ(44,47,"SCANNER.AUTH")),e.xp6(3),e.Oqu(e.lcZ(47,49,"DISTRIBUTION.SETUP_TIMESTAMP")),e.xp6(3),e.Oqu(e.lcZ(50,51,"DISTRIBUTION.DESCRIPTION")),e.xp6(3),e.Oqu(e.lcZ(53,53,"DISTRIBUTION.NOT_FOUND")),e.xp6(2),e.Q6J("ngForOf",t.instances),e.xp6(2),e.Q6J("clrDgPageSize",t.pageSize)("clrDgTotalItems",t.totalCount)("clrDgPage",t.currentPage),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(59,Te)),e.xp6(1),e.Oqu(e.lcZ(60,55,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",t.totalCount),e.xp6(2),e.AsE("",t.totalCount," ",e.lcZ(64,57,"HELM_CHART.ITEMS"),""),e.xp6(3),e.Q6J("providers",t.providers))},dependencies:[r.C9t,r.Gwl,r.m4W,r.Z4N,r.fv_,r.dRQ,r.Ltv,r.YYR,r.F7K,r.PDs,r.KHL,r.Gcc,r.jND,r.Nh1,r.dml,r.K8c,r.qvL,r.nqY,r.f_W,r.zwp,r.ZUS,M.sg,M.O5,k.z,ie,O.X$,oe.Z],styles:[".refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.filter-pos[_ngcontent-%COMP%]{float:right;margin-right:24px;position:relative;top:10px}.action-head-pos[_ngcontent-%COMP%]{padding-top:12px;padding-right:18px;height:24px;display:flex;justify-content:flex-end}.no-wrapper[_ngcontent-%COMP%]{white-space:nowrap}.margin-top-5px[_ngcontent-%COMP%]{margin-top:5px}.height-24[_ngcontent-%COMP%]{height:24px}"]}),o})();var Ae=a(6296),De=a(858);const Ce=[{path:"instances",component:Se},{path:"",redirectTo:"instances",pathMatch:"full"}];let Ne=(()=>{class o{}return o.\u0275fac=function(n){return new(n||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[Ae.m,De.Bz.forChild(Ce)]}),o})()},8348:(J,C,a)=>{a.d(C,{z:()=>T});var d=a(4650),U=a(7579),N=a(8372),l=a(4006),E=a(6895),S=a(9375);const A=["inputElement"];function g(I,b){1&I&&d._UZ(0,"span",4)}let T=(()=>{class I{constructor(_){this.cd=_,this.placeHolder="",this.filterTerms=new U.x,this.isExpanded=!1,this.filterEvt=new d.vpe,this.openFlag=new d.vpe,this.readonly=null,this.expandMode=!1,this.withDivider=!1}set filterPlaceholder(_){this.placeHolder=_}ngOnInit(){this.filterTerms.pipe((0,N.b)(500)).subscribe(_=>{this.filterEvt.emit(_)})}valueChange(){this.filterTerms.next(this.currentValue&&this.currentValue.trim())}inputFocus(){this.openFlag.emit(this.isExpanded)}onClick(){this.expandMode||(this.isExpanded=!this.isExpanded,this.isExpanded&&(this.cd.detectChanges(),this.inputElement.nativeElement.focus()),this.openFlag.emit(this.isExpanded))}get isShowSearchBox(){return this.expandMode||!this.expandMode&&this.isExpanded}}return I.\u0275fac=function(_){return new(_||I)(d.Y36(d.sBO))},I.\u0275cmp=d.Xpm({type:I,selectors:[["hbr-filter"]],viewQuery:function(_,h){if(1&_&&d.Gf(A,5),2&_){let f;d.iGM(f=d.CRH())&&(h.inputElement=f.first)}},inputs:{readonly:"readonly",currentValue:"currentValue",filterPlaceholder:"filterPlaceholder",expandMode:"expandMode",withDivider:"withDivider",width:"width"},outputs:{filterEvt:"filterEvt",openFlag:"openFlag"},decls:5,vars:9,consts:[["shape","search","size","20",1,"search-btn",3,"click"],["type","text","autofocus","",1,"filter-input","clr-input",3,"hidden","placeholder","ngModel","keyup","focus","ngModelChange"],["inputElement",""],["class","filter-divider",4,"ngIf"],[1,"filter-divider"]],template:function(_,h){1&_&&(d.TgZ(0,"span")(1,"clr-icon",0),d.NdJ("click",function(){return h.onClick()}),d.qZA(),d.TgZ(2,"input",1,2),d.NdJ("keyup",function(){return h.valueChange()})("focus",function(){return h.inputFocus()})("ngModelChange",function(v){return h.currentValue=v}),d.qZA(),d.YNc(4,g,1,0,"span",3),d.qZA()),2&_&&(d.xp6(1),d.ekj("filter-icon",h.isShowSearchBox),d.xp6(1),d.Udp("width",h.width,"px"),d.s9C("placeholder",h.placeHolder),d.Q6J("hidden",!h.isShowSearchBox)("ngModel",h.currentValue),d.uIk("readOnly",h.readonly),d.xp6(2),d.Q6J("ngIf",h.withDivider))},dependencies:[l.Fj,l.JJ,l.On,E.O5,S.qvL],styles:[".filter-icon[_ngcontent-%COMP%]{position:relative;right:-20px}.filter-divider[_ngcontent-%COMP%]{display:inline-block;height:16px;width:1px;padding-top:12px;padding-bottom:12px;position:relative;top:9px;margin-right:6px;margin-left:6px}.search-btn[_ngcontent-%COMP%]{cursor:pointer}.search-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.filter-input[_ngcontent-%COMP%]{padding-left:24px}"]}),I})()}}]);