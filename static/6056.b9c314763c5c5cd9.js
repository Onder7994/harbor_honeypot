"use strict";(self.webpackChunkharbor_portal=self.webpackChunkharbor_portal||[]).push([[6056],{6056:(G,v,a)=>{a.r(v),a.d(v,{ReplicationModule:()=>Xt});var r=a(4006),h=a(6296),O=a(858),C=a(38),e=a(4650),I=a(1992),w=a(8025),F=a(8372),A=a(1884),E=a(3900),T=a(4004),d=a(262),f=a(8746),Z=a(5963),M=a(4128),j=a(2843),u=a(3526),m=a(3819),q=a(5832),k=a(8726),ue=a(8486),x=(()=>{return(i=x||(x={}))[i.NO_FLATTING=0]="NO_FLATTING",i[i.FLATTEN_LEVEl_1=1]="FLATTEN_LEVEl_1",i[i.FLATTEN_LEVEl_2=2]="FLATTEN_LEVEl_2",i[i.FLATTEN_LEVEl_3=3]="FLATTEN_LEVEl_3",i[i.FLATTEN_ALL=-1]="FLATTEN_ALL",x;var i})();const B={[x.NO_FLATTING]:"REPLICATION.NO_FLATTING",[x.FLATTEN_LEVEl_1]:"REPLICATION.FLATTEN_LEVEL_1",[x.FLATTEN_LEVEl_2]:"REPLICATION.FLATTEN_LEVEL_2",[x.FLATTEN_LEVEl_3]:"REPLICATION.FLATTEN_LEVEL_3",[x.FLATTEN_ALL]:"REPLICATION.FLATTEN_ALL"};var S=(()=>{return(i=S||(S={})).MATCHES="matches",i.EXCLUDES="excludes",S;var i})(),R=(()=>{return(i=R||(R={})).MB="Mbps",i.KB="Kbps",R;var i})(),D=(()=>{return(i=D||(D={})).TRIGGER="trigger",i.STATUS="status",D;var i})(),de=a(7579),$=a(2421),P=a(6742),X=a(268),ge=a(822),J=a(2443),L=a(2466),_e=a(5884),c=a(9375),b=a(6895),he=a(2589),me=a(6082);function fe(i,s){if(1&i&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw();e.xp6(1),e.Oqu(e.lcZ(2,1,t.ruleNameTooltip))}}function Te(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",75)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.PUSH_BASED")))}function Ce(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",75)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.PULL_BASED")))}function Oe(i,s){if(1&i&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.AsE(" ",t.name,"-",t.url," ")}}function Ae(i,s){if(1&i&&(e.TgZ(0,"span",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.noEndpointInfo))}}function Ee(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"span",86),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.goRegistry())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"REPLICATION.ENDPOINTS")))}function Re(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",76),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",7)(5,"div",77)(6,"select",78),e.NdJ("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.sourceChange(o))}),e._UZ(7,"option",79),e.YNc(8,Oe,2,3,"option",80),e.qZA()(),e.TgZ(9,"div",81),e.YNc(10,Ae,3,3,"span",82),e.YNc(11,Ee,3,3,"span",83),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"REPLICATION.SOURCE_REGISTRY")),e.xp6(4),e.Q6J("compareWith",t.equals),e.xp6(2),e.Q6J("ngForOf",t.sourceList),e.xp6(2),e.Q6J("ngIf",0!==t.noEndpointInfo.length),e.xp6(1),e.Q6J("ngIf",0!==t.noEndpointInfo.length)}}function Pe(i,s){1&i&&(e.TgZ(0,"div",97)(1,"select",98)(2,"option",99),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"option",100),e._uU(6),e.ALo(7,"translate"),e.qZA()()()),2&i&&(e.xp6(3),e.hij(" ",e.lcZ(4,2,"TAG_RETENTION.MAT")," "),e.xp6(3),e.hij(" ",e.lcZ(7,4,"TAG_RETENTION.EXC")," "))}const be=function(i,s){return{"width-name-resource":i,"width-tag-label":s}};function Ie(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",93),e.YNc(1,Pe,8,6,"div",94),e.TgZ(2,"div",8)(3,"input",95,96),e.NdJ("input",function(o){e.CHM(t);const l=e.oxw(2);return e.KtG(l.trimText(o))}),e.qZA()()()}if(2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Q6J("ngIf","tag"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.xp6(2),e.s9C("id","filter_"+(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.Q6J("ngClass",e.WLB(3,be,"tag"!==(null==n.supportedFilters[t]?null:n.supportedFilters[t].type),"tag"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)))}}function Ze(i,s){if(1&i&&(e.TgZ(0,"option",105),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.s9C("value",t),e.xp6(1),e.AsE(" ",t,"","chart"===t?" (chartmuseum)":""," ")}}function xe(i,s){if(1&i&&(e.TgZ(0,"div",101)(1,"select",102,103)(3,"option",104),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.YNc(6,Ze,2,3,"option",39),e.qZA()()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.s9C("id","select_"+(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.s9C("name",null==n.supportedFilters[t]?null:n.supportedFilters[t].type),e.xp6(3),e.hij(" ",e.lcZ(5,4,"REPLICATION.ALL")," "),e.xp6(2),e.Q6J("ngForOf",null==n.supportedFilters[t]?null:n.supportedFilters[t].values)}}function Le(i,s){if(1&i&&e._UZ(0,"hbr-label-piece",116),2&i){const t=e.oxw().$implicit,n=e.oxw(3);e.Q6J("hasIcon",!1)("label",n.getLabel(t))("labelWidth",84)}}function ve(i,s){if(1&i&&e.YNc(0,Le,1,3,"hbr-label-piece",115),2&i){const t=s.$implicit;e.Q6J("ngIf",s.index<1&&t)}}function Ne(i,s){1&i&&(e.TgZ(0,"span",117),e._uU(1,"\xb7\xb7\xb7"),e.qZA())}function Me(i,s){if(1&i&&(e.TgZ(0,"div",118),e._UZ(1,"input",119,120),e.qZA()),2&i){const t=s.$implicit,n=s.index,o=e.oxw(2).index,l=e.oxw();e.xp6(1),e.s9C("id","label_"+(null==l.supportedFilters[o]?null:l.supportedFilters[o].type)+"_"+t),e.s9C("name","label_"+(null==l.supportedFilters[o]?null:l.supportedFilters[o].type)+"_"+t),e.Q6J("formControlName",n)}}function Se(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",124),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(3).index,g=e.oxw();return e.KtG(g.stickLabel(l,p))}),e._UZ(1,"clr-icon",125)(2,"hbr-label-piece",126),e.qZA()}if(2&i){const t=s.$implicit;e.xp6(1),e.Udp("visibility",t.select?"visible":"hidden"),e.xp6(1),e.Q6J("label",t)("labelWidth",130)}}function ye(i,s){1&i&&(e.TgZ(0,"button",127)(1,"span",85),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"span",128),e._uU(5),e.ALo(6,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,2,"REPLICATION.NO_LABEL_INFO")),e.xp6(3),e.Oqu(e.lcZ(6,4,"CONFIG.LABEL")))}const Ue=function(){return{"max-height.px":230}};function we(i,s){if(1&i&&(e.TgZ(0,"clr-dropdown-menu",121),e.YNc(1,Se,3,4,"button",122),e.YNc(2,ye,7,6,"button",123),e.qZA()),2&i){const t=e.oxw(3);e.Q6J("ngStyle",e.DdM(3,Ue)),e.xp6(1),e.Q6J("ngForOf",t.supportedFilterLabels),e.xp6(1),e.Q6J("ngIf",!(null!=t.supportedFilterLabels&&t.supportedFilterLabels.length))}}function Fe(i,s){if(1&i&&(e.TgZ(0,"div",106)(1,"div",97)(2,"select",98)(3,"option",99),e._uU(4),e.ALo(5,"translate"),e.qZA(),e.TgZ(6,"option",100),e._uU(7),e.ALo(8,"translate"),e.qZA()()(),e.TgZ(9,"div",107)(10,"clr-dropdown",108)(11,"div",109)(12,"div",110),e.YNc(13,ve,1,1,"ng-template",111),e.YNc(14,Ne,2,0,"span",112),e.qZA(),e.YNc(15,Me,3,3,"div",113),e.qZA(),e.YNc(16,we,3,4,"clr-dropdown-menu",114),e.qZA()()()),2&i){const t=e.oxw().$implicit;e.xp6(4),e.hij(" ",e.lcZ(5,5,"TAG_RETENTION.MAT")," "),e.xp6(3),e.hij(" ",e.lcZ(8,7,"TAG_RETENTION.EXC")," "),e.xp6(6),e.Q6J("ngForOf",t.value.value),e.xp6(1),e.Q6J("ngIf",t.value.value.length>1),e.xp6(1),e.Q6J("ngForOf",t.value.value)}}function qe(i,s){if(1&i&&(e.TgZ(0,"div",129)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(2),e.Oqu(null==n.supportedFilters[t]?null:n.supportedFilters[t].values)}}function De(i,s){1&i&&(e.TgZ(0,"span",130),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.NAME_FILTER")))}function ke(i,s){1&i&&(e.TgZ(0,"span",130),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.TAG_FILTER")))}function Je(i,s){1&i&&(e.TgZ(0,"span",130),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.LABEL_FILTER")))}function Ye(i,s){1&i&&(e.TgZ(0,"span",130),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"TOOLTIP.RESOURCE_FILTER")))}function Qe(i,s){if(1&i&&(e.TgZ(0,"clr-tooltip-content",75),e.YNc(1,De,3,3,"span",61),e.YNc(2,ke,3,3,"span",61),e.YNc(3,Je,3,3,"span",61),e.YNc(4,Ye,3,3,"span",61),e.qZA()),2&i){const t=e.oxw().index,n=e.oxw();e.xp6(1),e.Q6J("ngIf","name"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.xp6(1),e.Q6J("ngIf","tag"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.xp6(1),e.Q6J("ngIf","label"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)),e.xp6(1),e.Q6J("ngIf","resource"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type))}}function Ge(i,s){if(1&i&&(e.TgZ(0,"div",87)(1,"div",88)(2,"label",30),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.YNc(5,Ie,5,6,"div",89),e.YNc(6,xe,7,6,"div",90),e.YNc(7,Fe,17,9,"div",91),e.YNc(8,qe,3,1,"div",92),e.TgZ(9,"clr-tooltip"),e._UZ(10,"clr-icon",19),e.YNc(11,Qe,5,4,"clr-tooltip-content",20),e.qZA()()()),2&i){const t=s.index,n=e.oxw();e.xp6(1),e.Q6J("formGroupName",t),e.xp6(2),e.hij("",e.lcZ(4,6,"REPLICATION."+(null==n.supportedFilters[t]?null:n.supportedFilters[t].type.toUpperCase())),":"),e.xp6(2),e.Q6J("ngIf","input"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].style)),e.xp6(1),e.Q6J("ngIf","radio"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].style)&&(null==n.supportedFilters[t]?null:n.supportedFilters[t].values.length)>1),e.xp6(1),e.Q6J("ngIf","label"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].type)&&"list"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].style)),e.xp6(1),e.Q6J("ngIf","radio"===(null==n.supportedFilters[t]?null:n.supportedFilters[t].style)&&(null==n.supportedFilters[t]?null:n.supportedFilters[t].values.length)<=1)}}function je(i,s){if(1&i&&(e.TgZ(0,"option",84),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("ngValue",t),e.xp6(1),e.AsE(" ",t.name,"-",t.url," ")}}function Be(i,s){if(1&i&&(e.TgZ(0,"label",85),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=e.oxw(2);e.xp6(1),e.Oqu(e.lcZ(2,1,t.noEndpointInfo))}}function ze(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"span",86),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.goRegistry())}),e._uU(1),e.ALo(2,"translate"),e.qZA()}2&i&&(e.xp6(1),e.Oqu(e.lcZ(2,1,"REPLICATION.ENDPOINTS")))}function He(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",5)(1,"label",6),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",131)(5,"div",77)(6,"select",132),e.NdJ("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.targetChange(o))}),e._UZ(7,"option",79),e.YNc(8,je,2,3,"option",80),e.qZA()(),e.TgZ(9,"div",81),e.YNc(10,Be,3,3,"label",82),e.YNc(11,ze,3,3,"span",83),e.qZA()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Oqu(e.lcZ(3,5,"REPLICATION.DEST_REGISTRY")),e.xp6(4),e.Q6J("compareWith",t.equals),e.xp6(2),e.Q6J("ngForOf",t.targetList),e.xp6(2),e.Q6J("ngIf",0!==t.noEndpointInfo.length),e.xp6(1),e.Q6J("ngIf",0!==t.noEndpointInfo.length)}}function Ke(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",133)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.DESTINATION_NAMESPACE")))}function Ve(i,s){1&i&&(e.TgZ(0,"clr-control-error",134),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.NAMESPACE_TOOLTIP")," "))}function We(i,s){if(1&i&&(e.TgZ(0,"option",105),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.key),e.xp6(1),e.hij(" ",e.lcZ(2,2,t.value)," ")}}function $e(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",135)(1,"div"),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div"),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"div"),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"div"),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"div"),e._uU(14),e.ALo(15,"translate"),e.qZA(),e.TgZ(16,"div"),e._uU(17),e.ALo(18,"translate"),e.qZA(),e.TgZ(19,"div"),e._uU(20),e.ALo(21,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,7,"REPLICATION.FLATTEN_LEVEL_TIP")," "),e.xp6(3),e.hij(" ",e.lcZ(6,9,"REPLICATION.FLATTEN_LEVEL_TIP_ALL")," "),e.xp6(3),e.hij(" ",e.lcZ(9,11,"REPLICATION.FLATTEN_LEVEL_TIP_NO")," "),e.xp6(3),e.hij(" ",e.lcZ(12,13,"REPLICATION.FLATTEN_LEVEL_TIP_1")," "),e.xp6(3),e.hij(" ",e.lcZ(15,15,"REPLICATION.FLATTEN_LEVEL_TIP_2")," "),e.xp6(3),e.hij(" ",e.lcZ(18,17,"REPLICATION.FLATTEN_LEVEL_TIP_3")," "),e.xp6(3),e.Oqu(e.lcZ(21,19,"REPLICATION.NOTE")))}function Xe(i,s){if(1&i&&(e.TgZ(0,"option",105),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t),e.xp6(1),e.hij(" ",e.lcZ(2,2,"REPLICATION."+t.toUpperCase())," ")}}function et(i,s){1&i&&(e.TgZ(0,"clr-control-error"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.CRON_ERROR_TIP")," "))}function tt(i,s){if(1&i&&(e.TgZ(0,"option",105),e._uU(1),e.qZA()),2&i){const t=s.$implicit;e.Q6J("value",t.UNIT),e.xp6(1),e.hij(" ",t.UNIT," ")}}function nt(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",133)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"REPLICATION.BANDWIDTH_TOOLTIP")))}function it(i,s){1&i&&(e.TgZ(0,"clr-control-error",130),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i&&(e.xp6(1),e.hij(" ",e.lcZ(2,1,"REPLICATION.BANDWIDTH_ERROR_TIP")," "))}function ot(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",75)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"TOOLTIP.OVERRIDE")))}function rt(i,s){1&i&&(e.TgZ(0,"clr-tooltip-content",75)(1,"span"),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"REPLICATION.COPY_BY_CHUNK_TIP")))}const z=function(){return{standalone:!0}},H="0 ",N=100,y=1024;let ee=(()=>{class i{constructor(t,n,o,l,p,g){this.fb=t,this.repService=n,this.endpointService=o,this.errorHandler=l,this.translateService=p,this.labelService=g,this.sourceList=[],this.targetList=[],this.noEndpointInfo="",this.isPushMode=!0,this.noSelectedEndpoint=!0,this.TRIGGER_TYPES={MANUAL:"manual",SCHEDULED:"scheduled",EVENT_BASED:"event_based"},this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP",this.headerTitle="REPLICATION.ADD_POLICY",this.inProgress=!1,this.onGoing=!1,this.inNameChecking=!1,this.isRuleNameValid=!0,this.nameChecker=new de.x,this.supportedFilterLabels=[],this.goToRegistry=new e.vpe,this.reload=new e.vpe,this.flattenLevelMap=B,this.speedUnits=[{UNIT:R.KB},{UNIT:R.MB}],this.selectedUnit=R.KB,this.copySpeedUnit=R.KB,this.showChunkOption=!1,this.createForm()}initRegistryInfo(t){this.inProgress=!0,this.endpointService.getRegistryInfo({id:t}).pipe((0,f.x)(()=>this.inProgress=!1)).subscribe({next:n=>{(this.isPushMode&&!t||!this.isPushMode)&&this.setFilterAndTrigger(n),t&&this.checkChunkOption(t,n)},error:n=>{this.inlineAlert.showInlineError(n)}})}getAllRegistries(){this.endpointService.listRegistriesResponse({page:1,pageSize:N}).subscribe(t=>{if(t.headers){const n=t.headers.get("X-Total-Count"),o=parseInt(n,0);let l=t.body||[];if(o<=N)this.targetList=t.body||[],this.sourceList=t.body||[];else{const p=Math.ceil(o/N),g=[];for(let _=2;_<=p;_++)g.push(this.endpointService.listRegistries({page:_,pageSize:N}));(0,M.D)(g).subscribe(_=>{_&&_.length&&(_.forEach(U=>{l=l.concat(U)}),this.sourceList=l,this.targetList=l)})}}},t=>{this.errorHandler.error(t)})}ngOnInit(){this.getAllLabels(),this.getAllRegistries(),this.nameChecker.pipe((0,F.b)(300)).pipe((0,A.x)()).subscribe(t=>{let n=this.ruleForm.controls.name;n&&(this.isRuleNameValid=n.valid,this.isRuleNameValid?(this.inNameChecking=!0,this.repService.getReplicationRules(0,t).subscribe(o=>{o.some(l=>l.name===t&&l.id!==this.policyId)&&(this.ruleNameTooltip="TOOLTIP.RULE_USER_EXISTING",this.isRuleNameValid=!1),this.inNameChecking=!1},()=>{this.inNameChecking=!1})):this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP")})}trimText(t){t.target.value&&(t.target.value=t.target.value.replace(/\s+/g,""))}equals(t,n){return t&&n?t.id===n.id:t===n}pushModeChange(){this.setFilter([]),this.initRegistryInfo(0),this.checkChunkOption(this.ruleForm?.get("dest_registry")?.value?.id)}pullModeChange(){let t=this.ruleForm.get("src_registry").value;t?(this.setFilter([]),this.initRegistryInfo(t.id)):this.checkChunkOption(0)}sourceChange(t){this.noSelectedEndpoint=!1;let n=this.ruleForm.get("src_registry").value;this.setFilter([]),this.initRegistryInfo(n.id)}ngOnDestroy(){this.confirmSub&&this.confirmSub.unsubscribe(),this.nameChecker&&this.nameChecker.unsubscribe()}get isValid(){if(this.ruleForm.controls.dest_namespace.value&&this.ruleForm.controls.dest_namespace.invalid||this.ruleForm.controls.speed.invalid)return!1;let p=!!this.ruleForm.value.trigger.trigger_settings.cron;return!(!this.ruleForm.controls.name.value||!this.ruleForm.controls.trigger.value.type||!this.isRuleNameValid||!this.isPushMode&&!this.ruleForm.controls.src_registry.value||this.isPushMode&&!this.ruleForm.controls.dest_registry.value||!(!this.isNotSchedule()&&p&&(0,u.n6)(this.ruleForm.value.trigger.trigger_settings.cron||"")||this.isNotSchedule()))}createForm(){this.ruleForm=this.fb.group({name:["",r.kI.required],description:"",src_registry:new r.p4,dest_registry:new r.p4,dest_namespace:"",dest_namespace_replace_count:-1,trigger:this.fb.group({type:"",trigger_settings:this.fb.group({cron:""})}),filters:this.fb.array([]),enabled:!0,deletion:!1,override:!0,speed:-1,copy_by_chunk:!1})}isNotSchedule(){return this.ruleForm.get("trigger").get("type").value!==this.TRIGGER_TYPES.SCHEDULED}isNotEventBased(){return this.ruleForm.get("trigger").get("type").value!==this.TRIGGER_TYPES.EVENT_BASED}formReset(){this.ruleForm.reset({name:"",description:"",trigger:{type:"",trigger_settings:{cron:""}},deletion:!1,enabled:!0,override:!0,dest_namespace_replace_count:x.FLATTEN_LEVEl_1,speed:-1,copy_by_chunk:!1}),this.isPushMode=!0,this.selectedUnit=R.KB}updateRuleFormAndCopyUpdateForm(t){this.isPushMode=0!==t.dest_registry.id,this.checkChunkOption(t.dest_registry.id||t.src_registry.id),setTimeout(()=>{let n=this.convertToInputValue(t.speed);t.trigger.trigger_settings=t.trigger.trigger_settings?t.trigger.trigger_settings:{cron:""},this.ruleForm.reset({name:t.name,description:t.description,dest_namespace:t.dest_namespace,dest_namespace_replace_count:t.dest_namespace_replace_count,src_registry:t.src_registry,dest_registry:t.dest_registry,trigger:t.trigger,deletion:t.deletion,enabled:t.enabled,override:t.override,speed:n,copy_by_chunk:t.copy_by_chunk});let o=this.getFilterArray(t);this.noSelectedEndpoint=!1,this.setFilter(o),this.copyUpdateForm=(0,u.d9)(this.ruleForm.value),this.copySpeedUnit=this.selectedUnit,this.copyUpdateForm.trigger=(0,u.d9)(t.trigger),this.copyUpdateForm.filters=null===this.copyUpdateForm.filters?[]:this.copyUpdateForm.filters},100)}get filters(){return this.ruleForm.get("filters")}setFilter(t){const n=t.map(l=>{if(l.type===P.vA.LABEL){let p=this.fb.group({type:P.vA.LABEL,decoration:l.decoration||S.MATCHES}),g=this.fb.array(l.value);return p.setControl("value",g),p}return this.fb.group(l.type===P.vA.TAG?{type:P.vA.TAG,decoration:l.decoration||S.MATCHES,value:l.value}:l)}),o=this.fb.array(n);this.ruleForm.setControl("filters",o)}initFilter(t){if(t===P.vA.LABEL){const n=this.fb.array([]),o=this.fb.group({type:t,decoration:S.MATCHES});return o.setControl("value",n),o}return this.fb.group(t===P.vA.TAG?{type:t,decoration:S.MATCHES,value:""}:{type:t,value:""})}targetChange(t){if(t&&t.target){if("-1"===t.target.value)return void(this.noSelectedEndpoint=!0);this.noSelectedEndpoint=!1,this.initRegistryInfo(this.ruleForm.get("dest_registry").value.id)}}checkRuleName(){let t=this.ruleForm.controls.name.value;t?this.nameChecker.next(t):this.ruleNameTooltip="REPLICATION.NAME_TOOLTIP"}hasFormChange(){return this.copySpeedUnit!==this.selectedUnit||!(0,u.Qr)(this.hasChanges())}onSubmit(){"scheduled"!==this.ruleForm.value.trigger.type&&this.ruleForm.get("trigger").get("trigger_settings").get("cron").setValue(""),this.inProgress=!0;let t=this.ruleForm.value;t.speed=this.convertToKB(t.speed),t.dest_namespace_replace_count=t.dest_namespace_replace_count?parseInt(t.dest_namespace_replace_count.toString(),10):0,this.isPushMode?t.src_registry=null:t.dest_registry=null;let n=t.filters;for(let o=n.length-1;o>=0;o--)(!n[o].value||n[o].value instanceof Array&&0===n[o].value.length)&&t.filters.splice(o,1);this.showChunkOption||(delete t?.copy_by_chunk,delete this.ruleForm?.value?.copy_by_chunk),this.policyId<0?this.repService.createReplicationRule(t).subscribe(()=>{this.translateService.get("REPLICATION.CREATED_SUCCESS").subscribe(o=>this.errorHandler.info(o)),this.inProgress=!1,this.reload.emit(!0),this.createForm(),this.close()},o=>{this.inProgress=!1,this.inlineAlert.showInlineError(o)}):this.repService.updateReplicationRule(this.policyId,this.ruleForm.value).subscribe(()=>{this.translateService.get("REPLICATION.UPDATED_SUCCESS").subscribe(o=>this.errorHandler.info(o)),this.inProgress=!1,this.reload.emit(!0),this.close()},o=>{this.inProgress=!1,this.inlineAlert.showInlineError(o)})}openCreateEditRule(t){this.formReset(),this.copyUpdateForm=(0,u.d9)(this.ruleForm.value),this.inlineAlert.close(),this.noSelectedEndpoint=!0,this.isRuleNameValid=!0,this.policyId=-1,this.createEditRuleOpened=!0,this.noEndpointInfo="",this.showChunkOption=!1,0===this.targetList.length&&(this.noEndpointInfo="REPLICATION.NO_ENDPOINT_INFO"),t?(this.supportedFilterLabels&&this.supportedFilterLabels.length&&this.supportedFilterLabels.forEach((n,o)=>{t.filters&&t.filters.length&&t.filters.forEach(l=>{l.type===P.vA.LABEL&&l.value&&l.value.length&&l.value.forEach(p=>{n.name===p&&(this.supportedFilterLabels[o].select=!0)})})}),this.onGoing=!0,this.policyId=+t.id,this.headerTitle="REPLICATION.EDIT_POLICY_TITLE",this.repService.getReplicationRule(t.id).subscribe(n=>{this.repService.getRegistryInfo(n.src_registry.id).pipe((0,f.x)(()=>this.onGoing=!1)).subscribe(l=>{this.setFilterAndTrigger(l),this.updateRuleFormAndCopyUpdateForm(n)},l=>{this.translateService.get("REPLICATION.UNREACHABLE_SOURCE_REGISTRY",{error:(0,q.Po)(l)}).subscribe(p=>{this.inlineAlert.showInlineError(p)})})},n=>{this.onGoing=!1,this.inlineAlert.showInlineError(n)})):(this.onGoing=!0,this.repService.getRegistryInfo(0).pipe((0,f.x)(()=>this.onGoing=!1)).subscribe(o=>{this.setFilterAndTrigger(o),this.copyUpdateForm=(0,u.d9)(this.ruleForm.value),this.supportedFilterLabels&&this.supportedFilterLabels.length&&this.supportedFilterLabels.forEach((l,p)=>{l.select=!1})},o=>{this.inlineAlert.showInlineError(o)}),this.headerTitle="REPLICATION.ADD_POLICY",this.copyUpdateForm=(0,u.d9)(this.ruleForm.value))}setFilterAndTrigger(t){this.supportedFilters=t.supported_resource_filters,this.filters.clear(),this.supportedFilters.forEach(n=>{this.filters.push(this.initFilter(n.type))}),this.supportedTriggers=t.supported_triggers,this.ruleForm.get("trigger").get("type").setValue(this.supportedTriggers[0])}close(){this.createEditRuleOpened=!1}confirmCancel(t){this.inlineAlert.close(),this.createForm(),this.close()}onCancel(){this.hasFormChange()?this.inlineAlert.showInlineConfirmation({message:"ALERT.FORM_CHANGE_CONFIRMATION"}):(this.createForm(),this.close())}goRegistry(){this.goToRegistry.emit()}hasChanges(){const t=(0,u.d9)(this.ruleForm.value),n=(0,u.d9)(this.copyUpdateForm);return!(0,u.Iq)(t,n)}getFilterArray(t){let n=[];for(let o=0;o<this.supportedFilters.length;o++){let l=!1;t.filters&&t.filters.forEach(p=>{this.supportedFilters[o].type===p.type&&(n.push(p),l=!0)}),l||n.push(this.supportedFilters[o].type===P.vA.LABEL?{type:this.supportedFilters[o].type,value:[]}:{type:this.supportedFilters[o].type,value:""})}return n}cronInputShouldShowError(){return!(!this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.touched&&!this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.dirty)&&(this.ruleForm?.get("trigger")?.get("trigger_settings")?.get("cron")?.invalid||!(0,u.n6)(this.ruleForm.get("trigger").get("trigger_settings").get("cron").value))}stickLabel(t,n){t.select=!t.select;let l=this.ruleForm.get("filters").controls[n],p=this.supportedFilterLabels.reduce((g,_)=>_.select?g.length?[...g,_.name]:[_.name]:g,[]);l.setControl("value",this.fb.array(p))}inputInvalid(t){"REPLICATION.ADD_POLICY"===this.headerTitle&&t&&t.target&&((!t.target.value||0!==(t.target.value&&t.target.value.indexOf(H)))&&(t.target.value=H),t.target.value=t.target.value.replace(/\s+/g," "),t.target.value&&t.target.value.split(/\s+/g).length>6&&(t.target.value=t.target.value.trim()))}changeTrigger(t){"REPLICATION.ADD_POLICY"===this.headerTitle&&t&&t.target&&t.target.value===this.TRIGGER_TYPES.SCHEDULED&&this.ruleForm.get("trigger").get("trigger_settings").get("cron").setValue(H)}getAllLabels(){this.labelService.ListLabelsResponse({pageSize:N,page:1,scope:"g"}).subscribe(t=>{if(t.headers){const n=t.headers.get("X-Total-Count"),o=parseInt(n,0);let l=t.body||[];if(o<=N)l&&l.length&&l.forEach(p=>{this.supportedFilterLabels.push({name:p.name,color:p.color?p.color:"#FFFFFF",select:!1,scope:"g"})});else{const p=Math.ceil(o/N),g=[];for(let _=2;_<=p;_++)g.push(this.labelService.ListLabels({page:_,pageSize:N,scope:"g"}));(0,M.D)(g).subscribe(_=>{_&&_.length&&(_.forEach(U=>{l=l.concat(U)}),l.forEach(U=>{this.supportedFilterLabels.push({name:U.name,color:U.color?U.color:"#FFFFFF",select:!1,scope:"g"})}))})}}})}convertToKB(t){return t?this.selectedUnit===R.KB?+t:t*y:-1}convertToInputValue(t){return t>=y&&t%y==0?(this.selectedUnit=R.MB,Math.ceil(t/y)):(this.selectedUnit=R.KB,t||-1)}getLabel(t){if(this.supportedFilterLabels?.length){let n;return this.supportedFilterLabels.forEach(o=>{o.name===t&&(n=o)}),n}}checkChunkOption(t,n){this.showChunkOption=!1,this.ruleForm.get("copy_by_chunk").reset(!1),n?this.showChunkOption=n.supported_copy_by_chunk:t&&this.endpointService.getRegistryInfo({id:t}).subscribe(o=>{o&&(this.showChunkOption=o.supported_copy_by_chunk)})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(r.QS),e.Y36(X.xZ),e.Y36(ge.k),e.Y36(J.q),e.Y36(L.sK),e.Y36(_e.Q))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-create-edit-rule"]],viewQuery:function(t,n){if(1&t&&e.Gf($.l,7),2&t){let o;e.iGM(o=e.CRH())&&(n.inlineAlert=o.first)}},inputs:{withAdmiral:"withAdmiral"},outputs:{goToRegistry:"goToRegistry",reload:"reload"},decls:151,vars:103,consts:[[3,"clrModalOpen","clrModalStaticBackdrop","clrModalClosable","clrModalOpenChange"],[1,"modal-title"],[1,"modal-body","modal-body-height"],[3,"confirmEvt"],["novalidate","",1,"clr-form","clr-form-horizontal",3,"formGroup"],[1,"clr-form-control"],[1,"clr-control-label","required"],[1,"clr-control-container"],[1,"clr-input-wrapper"],["type","text","id","ruleName","size","35","pattern","^[a-z0-9]+(?:[._-][a-z0-9]+)*$","required","","maxlength","255","formControlName","name","autocomplete","off",1,"clr-input","width-input",3,"keyup"],["ruleName",""],["shape","exclamation-circle",1,"clr-validate-icon"],[1,"spinner","spinner-inline","spinner-pos",3,"hidden"],[4,"ngIf"],["clrTextarea","","type","text","id","ruleDescription","row","3","formControlName","description",1,"width-input"],["clrInline",""],["clrRadio","","type","radio","id","push_base","name","replicationMode",3,"value","disabled","ngModel","ngModelOptions","ngModelChange","change"],["for","push_base"],[1,"mode-tooltip"],["clrTooltipTrigger","","shape","info-circle","size","24"],["clrPosition","top-left","clrSize","md",4,"clrIfOpen"],["clrRadio","","type","radio","id","pull_base","name","replicationMode",3,"value","disabled","ngModel","ngModelOptions","ngModelChange","change"],["for","pull_base"],["class","clr-form-control",4,"ngIf"],[1,"clr-control-label"],[1,"spinner","spinner-inline","spinner-position",3,"hidden"],["formArrayName","filters",1,"clr-control-container"],["class","filterSelect",4,"ngFor","ngForOf"],["for","dest_namespace",1,"clr-control-label"],[1,"clr-input-wrapper","flex"],[1,"sub-label"],["autocomplete","off","formControlName","dest_namespace","type","text","id","dest_namespace","pattern","^[a-z0-9]+(?:[/._-][a-z0-9]+)*$","maxlength","255",1,"clr-input","width-name-resource"],[1,"des-tooltip"],["clrPosition","top-left","clrSize","lg",4,"clrIfOpen"],["class","margin-left-90px",4,"ngIf"],[1,"clr-form-control","flattening"],["for","dest_namespace_replace_count",1,"clr-control-label"],[1,"clr-select-wrapper","flex"],["id","dest_namespace_replace_count","formControlName","dest_namespace_replace_count",1,"clr-select","width-name-resource"],[3,"value",4,"ngFor","ngForOf"],["class","flatten","clrPosition","top-left","clrSize","lg",4,"clrIfOpen"],["formGroupName","trigger"],[1,"select","clr-select-wrapper"],["id","ruleTrigger","formControlName","type",1,"clr-select","width-input",3,"change"],["formGroupName","trigger_settings",1,"clr-form-control"],[1,"flex",3,"hidden"],["for","targetCron",1,"required"],["autocomplete","off","type","text","name","targetCron","id","targetCron","required","","pattern","^0\\s(?!(\\*\\s)).+$","formControlName","cron",1,"form-control","cron-input","clr-input",3,"input"],["href","javascript:void(0)","role","tooltip","aria-haspopup","true",1,"tooltip","tooltip-lg","tooltip-top-left","top-7","cron-tooltip"],["shape","info-circle","size","24",1,"info-tips-icon"],[1,"tooltip-content","table-box"],[1,"clr-checkbox-wrapper","clr-form-control","mt-0",3,"hidden"],["type","checkbox","id","ruleDeletion","formControlName","deletion",1,"clr-checkbox",3,"checked"],["for","ruleDeletion"],[1,"clr-form-control","bandwidth"],["for","speed",1,"required","clr-control-label"],[1,"clr-checkbox-wrapper","speed"],["type","text","id","speed","name","speed","formControlName","speed","autocomplete","off","required","","pattern","(^-1$)|(^([1-9]+)([0-9]+)*$)","maxlength","5",1,"clr-input"],[1,"clr-select-wrapper","unit-select"],["id","speed_unit","name","speed_unit",1,"clr-select","unit-select",3,"ngModelOptions","ngModel","ngModelChange"],[1,"ml-10px"],["class","tooltip-content",4,"ngIf"],[1,"clr-control-container","clr-control-inline"],[1,"clr-checkbox-wrapper"],["type","checkbox","id","overridePolicy","formControlName","override",1,"clr-checkbox",3,"checked"],["for","overridePolicy",1,"clr-control-label"],[1,"override-tooltip"],[1,"clr-checkbox-wrapper",3,"hidden"],["type","checkbox","id","by-chunk","formControlName","copy_by_chunk",1,"clr-checkbox"],["for","by-chunk",1,"clr-control-label"],["type","checkbox","id","enablePolicy","formControlName","enabled",1,"clr-checkbox",3,"checked"],["for","enablePolicy",1,"clr-control-label"],[1,"modal-footer"],["type","button","id","ruleBtnCancel",1,"btn","btn-outline",3,"disabled","click"],["type","submit","id","ruleBtnOk",1,"btn","btn-primary",3,"clrLoading","disabled","click"],["clrPosition","top-left","clrSize","md"],[1,"required","clr-control-label"],[1,"clr-select-wrapper"],["id","src_registry_id","formControlName","src_registry",1,"clr-select","width-input",3,"compareWith","change"],[1,"display-none"],[3,"ngValue",4,"ngFor","ngForOf"],[1,"space-between"],["class","alert-label",4,"ngIf"],["class","alert-label go-link",3,"click",4,"ngIf"],[3,"ngValue"],[1,"alert-label"],[1,"alert-label","go-link",3,"click"],[1,"filterSelect"],[1,"flex",3,"formGroupName"],["class","flex",4,"ngIf"],["class","select resource-box clr-select-wrapper",4,"ngIf"],["class","select flex",4,"ngIf"],["class","resource-box",4,"ngIf"],[1,"flex"],["class","clr-select-wrapper mr-1",4,"ngIf"],["autocomplete","off","type","text","size","14","formControlName","value",1,"clr-input",3,"ngClass","id","input"],["filterValue",""],[1,"clr-select-wrapper","mr-1"],["formControlName","decoration",1,"clr-select","width-match-exclude"],["value","matches"],["value","excludes"],[1,"select","resource-box","clr-select-wrapper"],["formControlName","value",1,"clr-select","width-name-resource",3,"id","name"],["selectedValue",""],["value",""],[3,"value"],[1,"select","flex"],["formArrayName","value",1,"dropdown","clr-select-wrapper"],[1,"width-tag-label"],["clrDropdownTrigger","",1,"width-100","label-text"],[1,"label-container"],["ngFor","",3,"ngForOf"],["class","ellipsis color-white-dark",4,"ngIf"],["hidden","true",4,"ngFor","ngForOf"],["class","right-align","clrPosition","bottom-left",3,"ngStyle",4,"clrIfOpen"],["class","label-piece",3,"hasIcon","label","labelWidth",4,"ngIf"],[1,"label-piece",3,"hasIcon","label","labelWidth"],[1,"ellipsis","color-white-dark"],["hidden","true"],["type","text","placeholder","select labels",3,"formControlName","id","name"],["labelValue",""],["clrPosition","bottom-left",1,"right-align",3,"ngStyle"],["type","button","class","dropdown-item flex",3,"click",4,"ngFor","ngForOf"],["type","button","class","dropdown-item space-between no-labels",4,"ngIf"],["type","button",1,"dropdown-item","flex",3,"click"],["shape","check"],[3,"label","labelWidth"],["type","button",1,"dropdown-item","space-between","no-labels"],["routerLink","/harbor/labels",1,"alert-label","go-link"],[1,"resource-box"],[1,"tooltip-content"],[1,"form-select","clr-control-container"],["id","dest_registry","formControlName","dest_registry",1,"clr-select","width-input",3,"compareWith","change"],["clrPosition","top-left","clrSize","lg"],[1,"margin-left-90px"],["clrPosition","top-left","clrSize","lg",1,"flatten"]],template:function(t,n){1&t&&(e.TgZ(0,"clr-modal",0),e.NdJ("clrModalOpenChange",function(l){return n.createEditRuleOpened=l}),e.TgZ(1,"h3",1),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",2)(5,"inline-alert",3),e.NdJ("confirmEvt",function(l){return n.confirmCancel(l)}),e.qZA(),e.TgZ(6,"form",4)(7,"div",5)(8,"label",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"div",7)(12,"div",8)(13,"input",9,10),e.NdJ("keyup",function(){return n.checkRuleName()}),e.qZA(),e._UZ(15,"clr-icon",11)(16,"span",12),e.qZA(),e.YNc(17,fe,3,3,"clr-control-error",13),e.qZA()(),e.TgZ(18,"clr-textarea-container")(19,"label"),e._uU(20),e.ALo(21,"translate"),e.qZA(),e._UZ(22,"textarea",14),e.qZA(),e.TgZ(23,"clr-radio-container",15)(24,"label"),e._uU(25),e.ALo(26,"translate"),e.qZA(),e.TgZ(27,"clr-radio-wrapper")(28,"input",16),e.NdJ("ngModelChange",function(l){return n.isPushMode=l})("change",function(){return n.pushModeChange()}),e.qZA(),e.TgZ(29,"label",17),e._uU(30,"Push-based "),e.TgZ(31,"clr-tooltip",18),e._UZ(32,"clr-icon",19),e.YNc(33,Te,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(34,"clr-radio-wrapper")(35,"input",21),e.NdJ("ngModelChange",function(l){return n.isPushMode=l})("change",function(){return n.pullModeChange()}),e.qZA(),e.TgZ(36,"label",22),e._uU(37,"Pull-based "),e.TgZ(38,"clr-tooltip",18),e._UZ(39,"clr-icon",19),e.YNc(40,Ce,4,3,"clr-tooltip-content",20),e.qZA()()()(),e.YNc(41,Re,12,7,"div",23),e.TgZ(42,"div",5)(43,"label",24),e._uU(44),e.ALo(45,"translate"),e.qZA(),e._UZ(46,"span",25),e.TgZ(47,"div",26),e.YNc(48,Ge,12,8,"div",27),e.qZA()(),e.YNc(49,He,12,7,"div",23),e.TgZ(50,"div",5)(51,"label",28),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"div",7)(55,"div",29)(56,"label",30),e._uU(57),e.ALo(58,"translate"),e.qZA(),e._UZ(59,"input",31),e.TgZ(60,"clr-tooltip",32),e._UZ(61,"clr-icon",19),e.YNc(62,Ke,4,3,"clr-tooltip-content",33),e.qZA()(),e.YNc(63,Ve,3,3,"clr-control-error",34),e.qZA()(),e.TgZ(64,"div",35),e._UZ(65,"label",36),e.TgZ(66,"div",7)(67,"div",37)(68,"label",30),e._uU(69),e.ALo(70,"translate"),e.qZA(),e.TgZ(71,"select",38),e.YNc(72,We,3,4,"option",39),e.ALo(73,"keyvalue"),e.qZA(),e.TgZ(74,"clr-tooltip",32),e._UZ(75,"clr-icon",19),e.YNc(76,$e,22,21,"clr-tooltip-content",40),e.qZA()()()(),e.TgZ(77,"div",5)(78,"label",6),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"div",7)(82,"div",41)(83,"div",42)(84,"select",43),e.NdJ("change",function(l){return n.changeTrigger(l)}),e.YNc(85,Xe,3,4,"option",39),e.qZA()(),e.TgZ(86,"div",44)(87,"div",45)(88,"label",46),e._uU(89,"Cron String"),e.qZA(),e.TgZ(90,"div",7)(91,"div",8)(92,"input",47),e.NdJ("input",function(l){return n.inputInvalid(l)}),e.qZA()(),e.YNc(93,et,3,3,"clr-control-error",13),e.qZA(),e.TgZ(94,"a",48),e._UZ(95,"clr-icon",49),e.TgZ(96,"div",50),e._UZ(97,"cron-tooltip"),e.qZA()()()()(),e.TgZ(98,"div",51),e._UZ(99,"input",52),e.TgZ(100,"label",53),e._uU(101),e.ALo(102,"translate"),e.qZA()()()(),e.TgZ(103,"div",54)(104,"label",55),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"div",7)(108,"div",56),e._UZ(109,"input",57)(110,"clr-icon",11),e.qZA(),e.TgZ(111,"div",58)(112,"select",59),e.NdJ("ngModelChange",function(l){return n.selectedUnit=l}),e.YNc(113,tt,2,2,"option",39),e.qZA(),e.TgZ(114,"clr-tooltip",60),e._UZ(115,"clr-icon",19),e.YNc(116,nt,4,3,"clr-tooltip-content",33),e.qZA()(),e.YNc(117,it,3,3,"clr-control-error",61),e.qZA()(),e.TgZ(118,"div",5)(119,"label",24),e._uU(120),e.ALo(121,"translate"),e.qZA(),e.TgZ(122,"div",62)(123,"div",63),e._UZ(124,"input",64),e.TgZ(125,"label",65),e._uU(126),e.ALo(127,"translate"),e.TgZ(128,"clr-tooltip",66),e._UZ(129,"clr-icon",19),e.YNc(130,ot,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(131,"div",67),e._UZ(132,"input",68),e.TgZ(133,"label",69),e._uU(134),e.ALo(135,"translate"),e.TgZ(136,"clr-tooltip",66),e._UZ(137,"clr-icon",19),e.YNc(138,rt,4,3,"clr-tooltip-content",20),e.qZA()()(),e.TgZ(139,"div",67),e._UZ(140,"input",70),e.TgZ(141,"label",71),e._uU(142),e.ALo(143,"translate"),e.qZA()()()()()(),e.TgZ(144,"div",72)(145,"button",73),e.NdJ("click",function(){return n.onCancel()}),e._uU(146),e.ALo(147,"translate"),e.qZA(),e.TgZ(148,"button",74),e.NdJ("click",function(){return n.onSubmit()}),e._uU(149),e.ALo(150,"translate"),e.qZA()()()),2&t&&(e.Q6J("clrModalOpen",n.createEditRuleOpened)("clrModalStaticBackdrop",!0)("clrModalClosable",!1),e.xp6(2),e.Oqu(e.lcZ(3,64,n.headerTitle)),e.xp6(4),e.Q6J("formGroup",n.ruleForm),e.xp6(1),e.ekj("clr-error",n.ruleForm.controls.name.touched&&n.ruleForm.controls.name.invalid||!n.isRuleNameValid),e.xp6(2),e.Oqu(e.lcZ(10,66,"REPLICATION.NAME")),e.xp6(7),e.Q6J("hidden",!n.inNameChecking),e.xp6(1),e.Q6J("ngIf",n.ruleForm.controls.name.touched&&n.ruleForm.controls.name.invalid||!n.isRuleNameValid),e.xp6(3),e.Oqu(e.lcZ(21,68,"REPLICATION.DESCRIPTION")),e.xp6(5),e.Oqu(e.lcZ(26,70,"REPLICATION.REPLI_MODE")),e.xp6(3),e.Q6J("value",!0)("disabled",n.policyId>=0||n.onGoing)("ngModel",n.isPushMode)("ngModelOptions",e.DdM(100,z)),e.xp6(7),e.Q6J("value",!1)("disabled",n.policyId>=0||n.onGoing)("ngModel",n.isPushMode)("ngModelOptions",e.DdM(101,z)),e.xp6(6),e.Q6J("ngIf",!n.isPushMode),e.xp6(3),e.Oqu(e.lcZ(45,72,"REPLICATION.SOURCE_RESOURCE_FILTER")),e.xp6(2),e.Q6J("hidden",!1===n.onGoing),e.xp6(2),e.Q6J("ngForOf",n.filters.controls),e.xp6(1),e.Q6J("ngIf",n.isPushMode),e.xp6(3),e.Oqu(e.lcZ(53,74,"REPLICATION.DESTINATION")),e.xp6(2),e.ekj("clr-error",(n.ruleForm.controls.dest_namespace.dirty||n.ruleForm.controls.dest_namespace.touched)&&n.ruleForm.controls.dest_namespace.invalid),e.xp6(3),e.hij("",e.lcZ(58,76,"REPLICATION.NAMESPACE"),":"),e.xp6(6),e.Q6J("ngIf",(n.ruleForm.controls.dest_namespace.dirty||n.ruleForm.controls.dest_namespace.touched)&&n.ruleForm.controls.dest_namespace.invalid),e.xp6(6),e.hij("",e.lcZ(70,78,"REPLICATION.REPO_FLATTENING"),":"),e.xp6(2),e.uIk("disabled",n.ruleForm.controls.dest_namespace.invalid||!n.ruleForm.controls.dest_namespace.value?"disabled":null),e.xp6(1),e.Q6J("ngForOf",e.lcZ(73,80,n.flattenLevelMap)),e.xp6(7),e.Oqu(e.lcZ(80,82,"REPLICATION.TRIGGER_MODE")),e.xp6(6),e.Q6J("ngForOf",n.supportedTriggers),e.xp6(2),e.Q6J("hidden",n.isNotSchedule()),e.xp6(3),e.ekj("clr-error",n.cronInputShouldShowError()),e.xp6(3),e.Q6J("ngIf",n.cronInputShouldShowError()),e.xp6(5),e.Q6J("hidden",n.isNotEventBased()),e.xp6(1),e.Q6J("checked",!1),e.xp6(2),e.Oqu(e.lcZ(102,84,"REPLICATION.DELETE_REMOTE_IMAGES")),e.xp6(4),e.hij("",e.lcZ(106,86,"REPLICATION.BANDWIDTH")," "),e.xp6(2),e.ekj("clr-error",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(4),e.ekj("unit",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(1),e.Q6J("ngModelOptions",e.DdM(102,z))("ngModel",n.selectedUnit),e.xp6(1),e.Q6J("ngForOf",n.speedUnits),e.xp6(4),e.Q6J("ngIf",n.ruleForm.controls.speed.invalid&&(n.ruleForm.controls.speed.dirty||n.ruleForm.controls.speed.touched)),e.xp6(3),e.Oqu(e.lcZ(121,88,"SCANNER.OPTIONS")),e.xp6(4),e.Q6J("checked",!0),e.xp6(2),e.hij("",e.lcZ(127,90,"REPLICATION.OVERRIDE_INFO")," "),e.xp6(5),e.Q6J("hidden",!n.showChunkOption),e.xp6(3),e.hij("",e.lcZ(135,92,"REPLICATION.COPY_BY_CHUNK")," "),e.xp6(5),e.Q6J("hidden",n.policyId<0),e.xp6(1),e.Q6J("checked",!0),e.xp6(2),e.Oqu(e.lcZ(143,94,"REPLICATION.ENABLED_RULE")),e.xp6(3),e.Q6J("disabled",n.inProgress),e.xp6(1),e.hij(" ",e.lcZ(147,96,"BUTTON.CANCEL")," "),e.xp6(2),e.Q6J("clrLoading",n.inProgress)("disabled",n.inProgress||!n.isValid||!n.hasFormChange()),e.xp6(1),e.hij(" ",e.lcZ(150,98,"BUTTON.SAVE")," "))},dependencies:[r._Y,r.YN,r.Kr,r.Fj,r.Wl,r.EJ,r._,r.JJ,r.JL,r.Q7,r.nD,r.c5,r.On,r.sg,r.u,r.x0,r.CE,c.qvL,c.qAN,c.VLi,c.cCV,c.nqY,c.MPb,c.MgK,c.VqA,c.asN,c.DAq,c.EeQ,c.XE5,c.LAP,c.f_W,c.zwp,c.ZUS,c.Jmj,c.bMv,c.zDF,b.mk,b.sg,b.O5,b.PC,$.l,he._,me.q,O.rH,L.X$,b.Nd],styles:[".select[_ngcontent-%COMP%]   .optionMore[_ngcontent-%COMP%]{background-color:#bfbaba;height:1.6em;font-size:1.2em;cursor:pointer;text-align:center}.hideFilter[_ngcontent-%COMP%]{display:none}h4[_ngcontent-%COMP%]{color:#666}.alert-label[_ngcontent-%COMP%]{color:red;font-size:12px}.endpointSelect[_ngcontent-%COMP%]{width:270px;margin-right:10px}.filterSelect[_ngcontent-%COMP%]{position:relative;width:315px;margin-bottom:.25rem}.filterSelect[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{margin-left:10px}.padLeft0[_ngcontent-%COMP%]{padding-left:0}.schedule-style[_ngcontent-%COMP%]{display:inline-block}.floatSet[_ngcontent-%COMP%]{display:inline-block;width:82px;margin-right:4px}.projectInput[_ngcontent-%COMP%]{float:left;position:relative}.switchIcon[_ngcontent-%COMP%]{width:20px;height:20px;margin-top:10px;margin-left:10px;cursor:pointer}.addEndpoint[_ngcontent-%COMP%]{margin-top:.25em!important;padding-left:2px;padding-right:2px;min-width:58px;margin-right:0}.shadow[_ngcontent-%COMP%]{position:absolute;top:8px}.selectBox[_ngcontent-%COMP%]{position:absolute;width:100%;height:auto;margin-top:-.25rem;border:1px solid #ccc;background-color:#fff;border:1px solid rgba(0,0,0,.15);border-right-width:2px;border-bottom-width:2px;border-radius:6px;box-shadow:0 5px 10px #0003;z-index:100}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{list-style:none;padding:3px 20px;cursor:pointer}.selectBox[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]:hover{color:#262626;background-image:linear-gradient(180deg,#f5f5f5 0,#e8e8e8);background-repeat:repeat-x}.form-group-override[_ngcontent-%COMP%]{padding-left:200px}.form-group[_ngcontent-%COMP%] > label[_ngcontent-%COMP%]:first-child{font-size:14px;width:7rem}.form-group[_ngcontent-%COMP%]   .radio[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{margin-right:10px}.form-select[_ngcontent-%COMP%]{margin-right:120px}.go-link[_ngcontent-%COMP%]{line-height:1rem;cursor:pointer}.arrowSet[_ngcontent-%COMP%]{display:inline-block;position:absolute;right:50px;top:8px;transform:rotate(180deg)}clr-modal[_ngcontent-%COMP%]     div.modal-dialog{width:32rem}.deletedDiv[_ngcontent-%COMP%]{text-align:left;line-height:14px;color:red}.deletedDiv[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{margin-left:10px;text-decoration:underline;cursor:pointer;color:#00f}.modal-body-height[_ngcontent-%COMP%]{max-height:85vh}.filterSelect[_ngcontent-%COMP%]   .warning-icon[_ngcontent-%COMP%]{margin-left:-15px}.mr-t-11[_ngcontent-%COMP%]{margin-top:11px}.weekday-width[_ngcontent-%COMP%]{width:104px}.rule-width[_ngcontent-%COMP%]{width:100%}.form-cron[_ngcontent-%COMP%]{padding-left:3.8rem}.mode-tooltip[_ngcontent-%COMP%]{margin-left:5px}.override-box[_ngcontent-%COMP%]{flex-direction:row}.override-box[_ngcontent-%COMP%]   .override-tooltip[_ngcontent-%COMP%]{margin:3px 0 0 5px}.spinner-position[_ngcontent-%COMP%]{left:25%}.cron-tooltip[_ngcontent-%COMP%]{color:gray;cursor:default}.cron-tooltip[_ngcontent-%COMP%]   .table-box[_ngcontent-%COMP%]{width:20rem}.display-none[_ngcontent-%COMP%]{display:none}.width-100[_ngcontent-%COMP%]{width:100%}.label-text[_ngcontent-%COMP%]{position:relative;height:1.2rem;display:flex;align-items:center;justify-content:left;border-bottom:.05rem solid}.ellipsis[_ngcontent-%COMP%]{margin-left:.2rem;font-size:16px;font-weight:700}.space-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}.flex[_ngcontent-%COMP%]{display:flex}.sub-label[_ngcontent-%COMP%]{flex:0 0 5rem}.clr-control-label[_ngcontent-%COMP%]{width:8.6rem}.des-tooltip[_ngcontent-%COMP%]{margin-left:.5rem}[_nghost-%COMP%]  .flatten{width:23rem!important}.width-input[_ngcontent-%COMP%]{width:17rem}.width-name-resource[_ngcontent-%COMP%]{flex:0 0 12rem;width:12rem}.width-match-exclude[_ngcontent-%COMP%]{width:5rem}.width-tag-label[_ngcontent-%COMP%]{width:6rem}.right-align[_ngcontent-%COMP%]{min-width:204px;overflow-y:auto;transform:translate(-4.3rem) translateY(1.25rem)!important}.dropdown-item[_ngcontent-%COMP%]{min-height:26px}.no-labels[_ngcontent-%COMP%]{cursor:default;padding:0 .5rem}.unit[_ngcontent-%COMP%]{width:4.18rem!important}.speed[_ngcontent-%COMP%]{width:14rem;display:inline-block}.speed[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:12rem}.unit-select[_ngcontent-%COMP%]{width:3rem}.ml-10px[_ngcontent-%COMP%]{margin-left:10px}.label-piece[_ngcontent-%COMP%]{display:flex;left:.25rem}.label-container[_ngcontent-%COMP%]{position:absolute;display:flex;align-items:center}.clr-form-control[_ngcontent-%COMP%]{margin-top:1rem}.flattening[_ngcontent-%COMP%]{margin-top:.5rem}.bandwidth[_ngcontent-%COMP%]{margin-top:.25rem}"]}),i})();var Y=a(3824),lt=a(6344),te=a(7367),ne=a(312),st=a(7677),ie=a(4241);const ct=["toggleConfirmDialog"],at=["deletionConfirmDialog"];function pt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",20),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.openModal())}),e._UZ(1,"clr-icon",21),e._uU(2),e.ALo(3,"translate"),e.qZA()}2&i&&(e.xp6(2),e.hij("\xa0",e.lcZ(3,1,"REPLICATION.NEW_REPLICATION_RULE")," "))}function ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",22),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.replicateRule(o.selectedRow))}),e._UZ(1,"clr-icon",23),e._uU(2),e.ALo(3,"translate"),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("disabled",!t.selectedRow||!t.selectedRow.enabled),e.xp6(2),e.hij("\xa0",e.lcZ(3,2,"REPLICATION.REPLICATE")," ")}}function dt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.operateRule("enable",o.selectedRow))}),e._UZ(1,"clr-icon",31),e._uU(2,"\xa0 "),e.TgZ(3,"span",32),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!(t.selectedRow&&!t.selectedRow.enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.ENABLED_BUTTON"))}}function gt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.operateRule("disable",o.selectedRow))}),e._UZ(1,"clr-icon",33),e._uU(2,"\xa0 "),e.TgZ(3,"span",34),e._uU(4),e.ALo(5,"translate"),e.qZA()()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!(t.selectedRow&&t.selectedRow.enabled)),e.xp6(4),e.Oqu(e.lcZ(5,2,"WEBHOOK.DISABLED_BUTTON"))}}function _t(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"clr-dropdown-menu")(1,"clr-dropdown")(2,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.editRule(o.selectedRow))}),e._UZ(3,"clr-icon",25),e._uU(4,"\xa0 "),e.TgZ(5,"span",26),e._uU(6),e.ALo(7,"translate"),e.qZA()(),e.YNc(8,dt,6,4,"button",27),e.YNc(9,gt,6,4,"button",27),e._UZ(10,"div",28),e.TgZ(11,"button",24),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.deleteRule(o.selectedRow))}),e._UZ(12,"clr-icon",29),e._uU(13,"\xa0 "),e.TgZ(14,"span",30),e._uU(15),e.ALo(16,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(2),e.Q6J("disabled",!t.selectedRow),e.xp6(4),e.Oqu(e.lcZ(7,6,"BUTTON.EDIT")),e.xp6(2),e.Q6J("ngIf",t.selectedRow&&!t.selectedRow.enabled),e.xp6(1),e.Q6J("ngIf",!t.selectedRow||t.selectedRow&&t.selectedRow.enabled),e.xp6(2),e.Q6J("disabled",!t.selectedRow),e.xp6(4),e.Oqu(e.lcZ(16,8,"BUTTON.DELETE"))}}function ht(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"clr-icon",40),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"WEBHOOK.DISABLED")," "))}function mt(i,s){1&i&&(e.TgZ(0,"div"),e._UZ(1,"clr-icon",41),e._uU(2),e.ALo(3,"translate"),e.qZA()),2&i&&(e.xp6(2),e.hij(" ",e.lcZ(3,1,"WEBHOOK.ENABLED")," "))}function ft(i,s){1&i&&(e.TgZ(0,"clr-signpost-content")(1,"a",43),e._uU(2),e.ALo(3,"translate"),e.qZA()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"DESTINATION.DEPRECATED")))}function Tt(i,s){1&i&&(e.TgZ(0,"clr-signpost"),e._UZ(1,"clr-icon",42),e.YNc(2,ft,4,3,"clr-signpost-content",7),e.qZA())}function Ct(i,s){if(1&i&&(e.TgZ(0,"clr-signpost-content"),e._uU(1),e.qZA()),2&i){const t=e.oxw(2).$implicit;e.xp6(1),e.hij(" ",null==t||null==t.trigger||null==t.trigger.trigger_settings?null:t.trigger.trigger_settings.cron," ")}}function Ot(i,s){1&i&&(e.TgZ(0,"clr-signpost"),e.YNc(1,Ct,2,1,"clr-signpost-content",7),e.qZA())}function At(i,s){1&i&&e._UZ(0,"clr-icon",44)}function Et(i,s){if(1&i&&(e.TgZ(0,"clr-tooltip-content",45)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.xp6(2),e.Oqu(t.description)}}function Rt(i,s){if(1&i&&(e.TgZ(0,"clr-dg-row",35)(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",8)(4,"div"),e.YNc(5,ht,4,3,"div",17),e.YNc(6,mt,4,3,"div",17),e.qZA()(),e.TgZ(7,"clr-dg-cell",9)(8,"span",36),e._uU(9),e.qZA(),e.YNc(10,Tt,3,0,"clr-signpost",17),e.qZA(),e.TgZ(11,"clr-dg-cell",9),e._uU(12),e.qZA(),e.TgZ(13,"clr-dg-cell",10),e._uU(14),e.qZA(),e.TgZ(15,"clr-dg-cell"),e._uU(16),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"clr-dg-cell",37),e._uU(19),e.ALo(20,"translate"),e.YNc(21,Ot,2,0,"clr-signpost",17),e.qZA(),e.TgZ(22,"clr-dg-cell"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"clr-dg-cell"),e._uU(26),e.TgZ(27,"clr-tooltip"),e.YNc(28,At,1,0,"clr-icon",38),e.YNc(29,Et,3,1,"clr-tooltip-content",39),e.qZA()()()),2&i){const t=s.$implicit,n=e.oxw();e.Q6J("clrDgItem",t),e.xp6(2),e.Oqu(t.name),e.xp6(3),e.Q6J("ngIf",!(null!=t&&t.enabled)),e.xp6(1),e.Q6J("ngIf",null==t?null:t.enabled),e.xp6(3),e.Oqu(t.src_registry?t.src_registry.name:""),e.xp6(1),e.Q6J("ngIf",n.isHelmHub(t.src_registry)),e.xp6(2),e.hij(" ",t.src_registry&&t.src_registry.id>0?"pull-based":"push-based"," "),e.xp6(2),e.AsE(" ",t.dest_registry?t.dest_registry.name:""," : ",t.dest_namespace?t.dest_namespace:"-"," "),e.xp6(2),e.Oqu(e.lcZ(17,15,n.getFlattenLevelString(t.dest_namespace_replace_count))),e.xp6(3),e.hij(" ",e.lcZ(20,17,n.getTriggerTypeI18n(t.trigger))," "),e.xp6(2),e.Q6J("ngIf",null==t||null==t.trigger||null==t.trigger.trigger_settings?null:t.trigger.trigger_settings.cron),e.xp6(2),e.Oqu(e.lcZ(24,19,n.getBandwidthStr(t.speed))),e.xp6(3),e.hij(" ",t.description?n.trancatedDescription(t.description):"-"," "),e.xp6(2),e.Q6J("ngIf",t.description&&t.description.length>35)}}function Pt(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(44);e.xp6(1),e.lnq("",t.firstItem+1," - ",t.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF")," ")}}const bt=function(){return[5,15,30]};let oe=(()=>{class i{constructor(t,n,o,l,p){this.replicationService=t,this.translateService=n,this.errorHandlerEntity=o,this.operationService=l,this.scheduleService=p,this.selectOne=new e.vpe,this.editOne=new e.vpe,this.toggleOne=new e.vpe,this.hideJobs=new e.vpe,this.redirect=new e.vpe,this.openNewRule=new e.vpe,this.replicateManual=new e.vpe,this.rules=[],this.page=1,this.pageSize=(0,u.tb)(u.V2.LIST_REPLICATION_RULE_COMPONENT,5),this.totalCount=0,this.loading=!0,this.paused=!1}ngOnInit(){this.scheduleService.getSchedulePaused({jobType:lt.O4.ALL}).subscribe(t=>{this.paused=t?.paused})}getTriggerTypeI18n(t){return t?this.paused&&t?.type===Y.pA.SCHEDULED?Y.E3[Y.pA.SCHEDULED_PAUSED]:Y.E3[t?.type]:null}trancatedDescription(t){return t.length>35?t.substr(0,35):t}replicateRule(t){this.replicateManual.emit(t)}deletionConfirm(t){if(t&&5===t.source&&1===t.state&&this.deleteOpe(t.data),t&&17===t.source&&1===t.state){const n=(0,u.d9)(t.data);n.enabled=!t.data.enabled;const o=new m.gB;o.name=n.enabled?"REPLICATION.ENABLE_TITLE":"REPLICATION.DISABLE_TITLE",o.data.id=n.id,o.state=m.yb.progressing,o.data.name=n.name,this.operationService.publishInfo(o),this.replicationService.updateReplicationPolicy({id:n.id,policy:n}).subscribe({next:()=>{this.translateService.get(n.enabled?"REPLICATION.ENABLE_SUCCESS":"REPLICATION.DISABLE_SUCCESS").subscribe(l=>{(0,m.hm)(o,m.yb.success),this.errorHandlerEntity.info(l),this.refreshRule()})},error:l=>{const p=(0,q.Po)(l);this.translateService.get(n.enabled?"REPLICATION.ENABLE_FAILED":"REPLICATION.DISABLE_FAILED").subscribe(g=>{(0,m.hm)(o,m.yb.failure,g),this.errorHandlerEntity.error(p)})}})}}selectRule(t){t&&(this.selectedId=t.id||"",this.selectOne.emit(t))}redirectTo(t){this.redirect.emit(t)}openModal(){this.openNewRule.emit()}editRule(t){this.editOne.emit(t)}deleteRule(t){if(t){let n=new k.c("REPLICATION.DELETION_TITLE","REPLICATION.DELETION_SUMMARY",t.name,t,5,2);this.deletionConfirmDialog.open(n)}}deleteOpe(t){if(t){let n=[];n.push(this.delOperate(t)),(0,M.D)(...n).subscribe(o=>{this.selectedRow=null,this.refreshRule()},o=>{this.errorHandlerEntity.error(o)})}}delOperate(t){let n=new m.gB;return n.name="OPERATION.DELETE_REPLICATION",n.data.id=+t.id,n.state=m.yb.progressing,n.data.name=t.name,this.operationService.publishInfo(n),this.replicationService.deleteReplicationPolicy({id:t.id}).pipe((0,T.U)(()=>{this.translateService.get("BATCH.DELETED_SUCCESS").subscribe(o=>(0,m.hm)(n,m.yb.success))}),(0,d.K)(o=>{const l=(0,q.Po)(o);return this.translateService.get(l).subscribe(p=>(0,m.hm)(n,m.yb.failure,p)),(0,j._)(o)}))}operateRule(t,n){let o,l,p;switch(t){case"enable":o="REPLICATION.ENABLE_TITLE",l="REPLICATION.ENABLE_SUMMARY",p=4;break;case"disable":o="REPLICATION.DISABLE_TITLE",l="REPLICATION.DISABLE_SUMMARY",p=5;break;default:return}const g=new k.c(o,l,n.name,n,17,p);this.deletionConfirmDialog.open(g)}clrLoad(t){t&&t.page&&(this.pageSize=t.page.size,(0,u.Pe)(u.V2.LIST_REPLICATION_RULE_COMPONENT,this.pageSize)),this.loading=!0;const n={page:this.page,pageSize:this.pageSize,sort:(0,u.td)(t)};n.q=this.searchString?encodeURIComponent(`name=~${this.searchString}`):(0,u.Wz)(t),this.replicationService.listReplicationPoliciesResponse(n).pipe((0,f.x)(()=>this.loading=!1)).subscribe({next:o=>{if(this.hideJobs.emit(),o.headers){let l=o.headers.get("x-total-count");l&&(this.totalCount=parseInt(l,0))}this.rules=o.body},error:o=>{this.errorHandlerEntity.error(o)}})}refreshRule(){this.page=1,this.totalCount=0,this.selectedRow=null,this.searchString=null,this.clrLoad()}isHelmHub(t){return t&&t.type===ue.Cw}getFlattenLevelString(t){return null!==t&&B[t]?B[t]:t}getBandwidthStr(t){return t>=y?""+(t/y).toFixed(2)+R.MB:t>0&&t<y?""+t+R.KB:"REPLICATION.UNLIMITED"}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(te.x),e.Y36(L.sK),e.Y36(J.q),e.Y36(ne.f9),e.Y36(st.u))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-list-replication-rule"]],viewQuery:function(t,n){if(1&t&&(e.Gf(ct,5),e.Gf(at,5)),2&t){let o;e.iGM(o=e.CRH())&&(n.toggleConfirmDialog=o.first),e.iGM(o=e.CRH())&&(n.deletionConfirmDialog=o.first)}},inputs:{selectedId:"selectedId",withReplicationJob:"withReplicationJob",hasCreateReplicationPermission:"hasCreateReplicationPermission",hasUpdateReplicationPermission:"hasUpdateReplicationPermission",hasDeleteReplicationPermission:"hasDeleteReplicationPermission",hasExecuteReplicationPermission:"hasExecuteReplicationPermission",searchString:"searchString"},outputs:{selectOne:"selectOne",editOne:"editOne",toggleOne:"toggleOne",hideJobs:"hideJobs",redirect:"redirect",openNewRule:"openNewRule",replicateManual:"replicateManual"},decls:53,vars:54,consts:[[1,"list-rule"],[3,"clrDgLoading","clrDgSingleSelected","clrDgRefresh","clrDgSingleSelectedChange"],["type","button","id","new_replication_rule_id","class","btn btn-secondary",3,"click",4,"ngIf"],["type","button","id","replication_exe_id","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],["clrDropdownTrigger","",1,"btn","btn-link",3,"clrCloseMenuOnItemClick"],["id","rule-action"],["shape","caret down"],[4,"clrIfOpen"],[1,"status-width"],[1,"col-width"],[1,"min-width"],[3,"clrDgSortBy"],[3,"clrDgField"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[3,"confirmAction"],["deletionConfirmDialog",""],["type","button","id","new_replication_rule_id",1,"btn","btn-secondary",3,"click"],["shape","plus","size","16"],["type","button","id","replication_exe_id",1,"btn","btn-secondary",3,"disabled","click"],["shape","export","size","16"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],["shape","edit","size","16"],["id","edit_replication_rule_id"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[1,"dropdown-divider"],["shape","window-close","size","16"],["id","delete_replication_rule_id"],["size","16","shape","success-standard"],["id","rule-enable"],["size","16","shape","ban"],["id","rule-disable"],[3,"clrDgItem"],[1,"margin-right-2px"],[1,"trigger"],["clrTooltipTrigger","","shape","ellipsis-horizontal","size","18",4,"ngIf"],["clrPosition","bottom-right","clrSize","md",4,"clrIfOpen"],["shape","exclamation-triangle","size","18",1,"is-warning","text-alignment"],["shape","success-standard","size","18",1,"is-success","text-alignment"],["clrSignpostTrigger","","shape","error-standard",1,"color-red"],["rel","noopener noreferrer","href","https://helm.sh/blog/helm-hub-moving-to-artifact-hub","target","_blank"],["clrTooltipTrigger","","shape","ellipsis-horizontal","size","18"],["clrPosition","bottom-right","clrSize","md"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"clr-datagrid",1),e.NdJ("clrDgRefresh",function(l){return n.clrLoad(l)})("clrDgSingleSelectedChange",function(l){return n.selectedRow=l})("clrDgSingleSelectedChange",function(l){return n.selectRule(l)}),e.TgZ(2,"clr-dg-action-bar"),e.YNc(3,pt,4,3,"button",2),e.YNc(4,ut,4,4,"button",3),e.TgZ(5,"clr-dropdown",4)(6,"span",5),e._uU(7),e.ALo(8,"translate"),e._UZ(9,"clr-icon",6),e.qZA(),e.YNc(10,_t,17,10,"clr-dropdown-menu",7),e.qZA()(),e.TgZ(11,"clr-dg-column"),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"clr-dg-column",8),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"clr-dg-column",9),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"clr-dg-column",9),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"clr-dg-column",10),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"clr-dg-column"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.TgZ(29,"clr-dg-column"),e._uU(30),e.ALo(31,"translate"),e.qZA(),e.TgZ(32,"clr-dg-column",11),e._uU(33),e.ALo(34,"translate"),e.qZA(),e.TgZ(35,"clr-dg-column",12),e._uU(36),e.ALo(37,"translate"),e.qZA(),e.TgZ(38,"clr-dg-placeholder"),e._uU(39),e.ALo(40,"translate"),e.qZA(),e.YNc(41,Rt,30,21,"clr-dg-row",13),e.TgZ(42,"clr-dg-footer")(43,"clr-dg-pagination",14,15),e.NdJ("clrDgPageChange",function(l){return n.page=l}),e.TgZ(45,"clr-dg-page-size",16),e._uU(46),e.ALo(47,"translate"),e.qZA(),e.YNc(48,Pt,3,5,"span",17),e._uU(49),e.ALo(50,"translate"),e.qZA()()(),e.TgZ(51,"confirmation-dialog",18,19),e.NdJ("confirmAction",function(l){return n.deletionConfirm(l)}),e.qZA()()),2&t&&(e.xp6(1),e.Q6J("clrDgLoading",n.loading)("clrDgSingleSelected",n.selectedRow),e.xp6(2),e.Q6J("ngIf",n.hasCreateReplicationPermission),e.xp6(1),e.Q6J("ngIf",n.hasExecuteReplicationPermission),e.xp6(1),e.Q6J("clrCloseMenuOnItemClick",!1),e.xp6(2),e.Oqu(e.lcZ(8,27,"BUTTON.ACTIONS")),e.xp6(5),e.Oqu(e.lcZ(13,29,"REPLICATION.NAME")),e.xp6(3),e.Oqu(e.lcZ(16,31,"REPLICATION.STATUS")),e.xp6(3),e.Oqu(e.lcZ(19,33,"REPLICATION.SRC_REGISTRY")),e.xp6(3),e.Oqu(e.lcZ(22,35,"REPLICATION.REPLICATION_MODE")),e.xp6(3),e.Oqu(e.lcZ(25,37,"REPLICATION.DESTINATION_NAMESPACE")),e.xp6(3),e.Oqu(e.lcZ(28,39,"REPLICATION.DES_REPO_FLATTENING")),e.xp6(3),e.Oqu(e.lcZ(31,41,"REPLICATION.REPLICATION_TRIGGER")),e.xp6(2),e.Q6J("clrDgSortBy","speed"),e.xp6(1),e.Oqu(e.lcZ(34,43,"REPLICATION.BANDWIDTH")),e.xp6(2),e.Q6J("clrDgField","description"),e.xp6(1),e.Oqu(e.lcZ(37,45,"REPLICATION.DESCRIPTION")),e.xp6(3),e.Oqu(e.lcZ(40,47,"REPLICATION.PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.rules),e.xp6(2),e.Q6J("clrDgPage",n.page)("clrDgPageSize",n.pageSize)("clrDgTotalItems",n.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(53,bt)),e.xp6(1),e.Oqu(e.lcZ(47,49,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.totalCount),e.xp6(1),e.AsE("",n.totalCount," ",e.lcZ(50,51,"REPLICATION.ITEMS")," "))},dependencies:[c.C9t,c.Gwl,c.m4W,c.Z4N,c.fv_,c.dRQ,c.Ltv,c.YYR,c.F7K,c.PDs,c.KHL,c.Gcc,c.jND,c.Nh1,c.dml,c.K8c,c.qvL,c.nqY,c.f_W,c.zwp,c.ZUS,c.EuU,c.hQ,c.QH5,c.Jmj,c.bMv,c.zDF,b.sg,b.O5,ie.z,L.X$],styles:[".list-rule[_ngcontent-%COMP%]{padding-bottom:15px}.text-alignment[_ngcontent-%COMP%]{vertical-align:text-bottom}.min-width[_ngcontent-%COMP%]{width:236px}.col-width[_ngcontent-%COMP%]{width:140px}.status-width[_ngcontent-%COMP%]{width:130px}.icon-style[_ngcontent-%COMP%]{color:#c92100}.margin-right-2px[_ngcontent-%COMP%]{margin-right:2px}.trigger[_ngcontent-%COMP%]{width:180px}"]}),i})();var K=a(8348),re=a(3046);const It=["replicationConfirmDialog"],Zt=["StopConfirmDialog"];function xt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"div",15)(2,"h5",16),e._uU(3),e.ALo(4,"translate"),e.qZA(),e.TgZ(5,"div",17)(6,"div",18)(7,"div",19)(8,"clr-select-container")(9,"select",20),e.NdJ("change",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.doFilterJob(o))}),e.TgZ(10,"option",21),e._uU(11),e.ALo(12,"translate"),e.qZA(),e.TgZ(13,"option",22),e._uU(14),e.ALo(15,"translate"),e.qZA()()()(),e.TgZ(16,"hbr-filter",23),e.NdJ("openFlag",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.openFilter(o))})("filterEvt",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.doSearchExecutions(o))}),e.ALo(17,"translate"),e.qZA(),e.TgZ(18,"span",24)(19,"clr-icon",25),e.NdJ("click",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.refreshJobs())}),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(3),e.hij(" ",e.lcZ(4,7,"REPLICATION.REPLICATION_EXECUTIONS")," "),e.xp6(4),e.Q6J("hidden",!t.isOpenFilterTag),e.xp6(4),e.hij(" ",e.lcZ(12,9,"REPLICATION.REPLICATION_TRIGGER")," "),e.xp6(3),e.hij(" ",e.lcZ(15,11,"REPLICATION.STATUS")," "),e.xp6(2),e.s9C("filterPlaceholder",e.lcZ(17,13,"REPLICATION.FILTER_EXECUTIONS_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",t.currentTerm)}}function Lt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"button",36),e.NdJ("click",function(){e.CHM(t);const o=e.oxw(2);return e.KtG(o.openStopExecutionsDialog(o.selectedRow))}),e._uU(1),e.ALo(2,"translate"),e.qZA()}if(2&i){const t=e.oxw(2);e.Q6J("disabled",!t.canStop()||!(t.jobs&&t.jobs.length>0)||t.isStopOnGoing||!t.selectedRow.length),e.xp6(1),e.hij(" ",e.lcZ(2,2,"REPLICATION.STOPJOB")," ")}}function vt(i,s){1&i&&e._UZ(0,"clr-icon",41)}function Nt(i,s){if(1&i&&(e.TgZ(0,"clr-tooltip-content",42)(1,"span"),e._uU(2),e.qZA()()),2&i){const t=e.oxw().$implicit;e.Q6J("clrPosition","left"),e.xp6(2),e.Oqu(t.status_text)}}function Mt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"clr-dg-row",37)(1,"clr-dg-cell")(2,"a",38),e.NdJ("click",function(){const l=e.CHM(t).$implicit,p=e.oxw(2);return e.KtG(p.goToLink(l.id))}),e._uU(3),e.qZA()(),e.TgZ(4,"clr-dg-cell"),e._uU(5),e.TgZ(6,"clr-tooltip"),e.YNc(7,vt,1,0,"clr-icon",39),e.YNc(8,Nt,3,2,"clr-tooltip-content",40),e.qZA()(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.qZA(),e.TgZ(11,"clr-dg-cell"),e._uU(12),e.ALo(13,"harborDatetime"),e.qZA(),e.TgZ(14,"clr-dg-cell"),e._uU(15),e.qZA(),e.TgZ(16,"clr-dg-cell"),e._uU(17),e.ALo(18,"percent"),e.qZA(),e.TgZ(19,"clr-dg-cell"),e._uU(20),e.qZA()()}if(2&i){const t=s.$implicit,n=e.oxw(2);e.Q6J("clrDgItem",t),e.xp6(3),e.Oqu(t.id),e.xp6(2),e.hij(" ",n.getStatusStr(t.status)," "),e.xp6(2),e.Q6J("ngIf",t.status_text),e.xp6(3),e.Oqu(t.trigger),e.xp6(2),e.Oqu(e.xi3(13,9,t.start_time,"short")),e.xp6(3),e.Oqu(n.getDuration(t)),e.xp6(2),e.hij(" ",e.lcZ(18,12,"InProgress"===t.status||"Failed"===t.status?t.total>0?t.succeed/t.total:0:t.total>0?t.succeed/t.total:1)," "),e.xp6(3),e.Oqu(t.total)}}function St(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(32);e.xp6(1),e.lnq("",t.firstItem+1," - ",t.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF"),"")}}const yt=function(){return[15,25,50]};function Ut(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"div",6)(1,"clr-datagrid",26),e.NdJ("clrDgSelectedChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.selectedRow=o)})("clrDgRefresh",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.clrLoadJobs(!0,o))}),e.TgZ(2,"clr-dg-action-bar")(3,"div",27),e.YNc(4,Lt,3,4,"button",28),e.qZA()(),e.TgZ(5,"clr-dg-column",29),e._uU(6),e.ALo(7,"translate"),e.qZA(),e.TgZ(8,"clr-dg-column",30),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"clr-dg-column",30),e._uU(12),e.ALo(13,"translate"),e.qZA(),e.TgZ(14,"clr-dg-column",29),e._uU(15),e.ALo(16,"translate"),e.qZA(),e.TgZ(17,"clr-dg-column"),e._uU(18),e.ALo(19,"translate"),e.qZA(),e.TgZ(20,"clr-dg-column"),e._uU(21),e.ALo(22,"translate"),e.qZA(),e.TgZ(23,"clr-dg-column"),e._uU(24),e.ALo(25,"translate"),e.qZA(),e.TgZ(26,"clr-dg-placeholder"),e._uU(27),e.ALo(28,"translate"),e.qZA(),e.YNc(29,Mt,21,14,"clr-dg-row",31),e.TgZ(30,"clr-dg-footer")(31,"clr-dg-pagination",32,33),e.NdJ("clrDgPageChange",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.currentPage=o)}),e.TgZ(33,"clr-dg-page-size",34),e._uU(34),e.ALo(35,"translate"),e.qZA(),e.YNc(36,St,3,5,"span",35),e._uU(37),e.ALo(38,"translate"),e.qZA()()()()}if(2&i){const t=e.oxw();e.xp6(1),e.Q6J("clrDgSelected",t.selectedRow)("clrDgLoading",t.jobsLoading),e.xp6(3),e.Q6J("ngIf",t.isSystemAdmin),e.xp6(1),e.Q6J("clrDgSortBy","id"),e.xp6(1),e.Oqu(e.lcZ(7,24,"REPLICATION.ID")),e.xp6(2),e.Q6J("clrDgField","status"),e.xp6(1),e.Oqu(e.lcZ(10,26,"REPLICATION.STATUS")),e.xp6(2),e.Q6J("clrDgField","trigger"),e.xp6(1),e.Oqu(e.lcZ(13,28,"REPLICATION.REPLICATION_TRIGGER")),e.xp6(2),e.Q6J("clrDgSortBy",t.creationTimeComparator),e.xp6(1),e.Oqu(e.lcZ(16,30,"REPLICATION.CREATION_TIME")),e.xp6(3),e.Oqu(e.lcZ(19,32,"REPLICATION.DURATION")),e.xp6(3),e.Oqu(e.lcZ(22,34,"REPLICATION.SUCCESS_RATE")),e.xp6(3),e.Oqu(e.lcZ(25,36,"REPLICATION.TOTAL")),e.xp6(3),e.Oqu(e.lcZ(28,38,"REPLICATION.JOB_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",t.jobs),e.xp6(2),e.Q6J("clrDgPage",t.currentPage)("clrDgPageSize",t.pageSize)("clrDgTotalItems",t.totalCount),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(44,yt)),e.xp6(1),e.Oqu(e.lcZ(35,40,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",t.showPaginationIndex),e.xp6(1),e.AsE(" ",t.totalCount," ",e.lcZ(38,42,"REPLICATION.ITEMS")," ")}}function wt(i,s){if(1&i){const t=e.EpF();e.TgZ(0,"hbr-create-edit-rule",43),e.NdJ("goToRegistry",function(){e.CHM(t);const o=e.oxw();return e.KtG(o.goRegistry())})("reload",function(o){e.CHM(t);const l=e.oxw();return e.KtG(l.reloadRules(o))}),e.qZA()}if(2&i){const t=e.oxw();e.Q6J("withAdmiral",t.withAdmiral)}}const se="InProgress",qt=[{key:"all",description:"REPLICATION.ALL_STATUS"},{key:"1",description:"REPLICATION.ENABLED"},{key:"0",description:"REPLICATION.DISABLED"}];class Dt{constructor(){this.ruleName="",this.trigger="",this.status="",this.page=1}}const V={Succeed:"Succeeded"};let kt=(()=>{class i{constructor(t,n,o,l,p){this.router=t,this.errorHandlerEntity=n,this.replicationService=o,this.operationService=l,this.translateService=p,this.openCreateRule=new e.vpe,this.openEdit=new e.vpe,this.goToRegistry=new e.vpe,this.search=new Dt,this.ruleStatus=qt,this.defaultFilter="trigger",this.selectedRow=[],this.hiddenJobList=!0,this.creationTimeComparator=new u.sH("start_time","date"),this.updateTimeComparator=new u.sH("end_time","date"),this.currentPage=1,this.totalCount=0,this.pageSize=(0,u.tb)(u.V2.LIST_REPLICATION_RULE_COMPONENT_EXECUTIONS),this.jobsLoading=!1}get showPaginationIndex(){return this.totalCount>0}ngOnInit(){this.searchSub||(this.searchSub=this.filterComponent.filterTerms.pipe((0,F.b)(500),(0,A.x)(),(0,E.w)(t=>(this.listReplicationRule.loading=!0,this.listReplicationRule.page=1,this.replicationService.listReplicationPoliciesResponse({page:this.listReplicationRule.page,pageSize:this.listReplicationRule.pageSize,q:t?encodeURIComponent(`name=~${t}`):null})))).subscribe({next:t=>{if(this.hideJobs(),t.headers){let n=t.headers.get("x-total-count");n&&(this.listReplicationRule.totalCount=parseInt(n,0))}this.listReplicationRule.selectedRow=null,this.listReplicationRule.rules=t.body,this.listReplicationRule.loading=!1},error:t=>{this.errorHandlerEntity.error(t),this.listReplicationRule.loading=!1}})),this.currentRuleStatus=this.ruleStatus[0]}ngOnDestroy(){this.timerDelay&&this.timerDelay.unsubscribe(),this.searchSub&&(this.searchSub.unsubscribe(),this.searchSub=null)}openModal(){this.createEditPolicyComponent.openCreateEditRule()}openEditRule(t){t&&this.createEditPolicyComponent.openCreateEditRule(t)}goRegistry(){this.goToRegistry.emit()}goToLink(t){this.router.navigate(["harbor","replications",t,"tasks"])}clrLoadJobs(t,n){if(!n||!n.page||!this.search.ruleId)return;this.pageSize=n.page.size,(0,u.Pe)(u.V2.LIST_REPLICATION_RULE_COMPONENT_EXECUTIONS,this.pageSize),this.currentState=n;let o=(0,u.wy)(n);o<=0&&(o=1);const l={policyId:+this.search.ruleId,page:o,pageSize:this.pageSize,sort:(0,u.td)(n)};this.defaultFilter===D.TRIGGER&&this.currentTerm&&(l.trigger=this.currentTerm),this.defaultFilter===D.STATUS&&this.currentTerm&&(l.status=this.currentTerm),t&&(this.jobsLoading=!0),this.selectedRow=[],this.replicationService.listReplicationExecutionsResponse(l).subscribe(p=>{this.totalCount=Number.parseInt(p.headers.get("x-total-count"),10),this.jobs=p.body,this.timerDelay||(this.timerDelay=(0,Z.H)(P.ib,P.ib).subscribe(()=>{let g=0;this.jobs.forEach(_=>{_.status===se&&g++}),g>0?this.clrLoadJobs(!1,this.currentState):(this.timerDelay.unsubscribe(),this.timerDelay=null)})),this.jobs=(0,u.Dd)(this.jobs,n),this.jobs=(0,u.Pq)(this.jobs,n),this.jobsLoading=!1},p=>{this.jobsLoading=!1,this.errorHandlerEntity.error(p)})}doSearchExecutions(t){this.currentTerm=t.trim(),this.jobsLoading=!0,this.currentPage=1,this.jobsLoading=!0,this.loadFirstPage()}loadFirstPage(){let t=this.currentState;t||(t={page:{}}),t.page.size=this.pageSize,t.page.from=0,t.page.to=this.pageSize-1,this.clrLoadJobs(!0,t)}selectOneRule(t){t&&t.id&&(this.hiddenJobList=!1,this.search.ruleId=t.id||"",this.loadFirstPage())}replicateManualRule(t){if(t){let n=new k.c("REPLICATION.REPLICATION_TITLE","REPLICATION.REPLICATION_SUMMARY",t.name,t,7,6);this.replicationConfirmDialog.open(n)}}confirmReplication(t){if(t&&7===t.source&&1===t.state){let n=t.data;n&&(0,M.D)(this.replicationOperate(n)).subscribe(o=>{this.selectOneRule(n)},o=>{this.errorHandlerEntity.error(o)})}}replicationOperate(t){let n=new m.gB;return n.name="OPERATION.REPLICATION",n.data.id=t.id,n.state=m.yb.progressing,n.data.name=t.name,this.operationService.publishInfo(n),this.replicationService.startReplication({execution:{policy_id:t.id}}).pipe((0,T.U)(o=>{this.translateService.get("BATCH.REPLICATE_SUCCESS").subscribe(l=>(0,m.hm)(n,m.yb.success))}),(0,d.K)(o=>{const l=(0,q.Po)(o);return this.translateService.get(l).subscribe(p=>(0,m.hm)(n,m.yb.failure,p)),(0,j._)(o)}))}doFilterJob(t){this.defaultFilter=t.target.value,this.doSearchJobs(this.currentTerm)}doSearchJobs(t){!t||(this.currentTerm=t.trim(),this.currentPage=1,this.loadFirstPage())}hideJobs(){this.search.ruleId=0,this.jobs=[],this.hiddenJobList=!0}openStopExecutionsDialog(t){let n=t.map(l=>l.id).join(","),o=new k.c("REPLICATION.STOP_TITLE","REPLICATION.STOP_SUMMARY",n,t,15,7);this.StopConfirmDialog.open(o)}canStop(){if(this.selectedRow?.length){let t=!0;return this.selectedRow.forEach(n=>{n.status!==se&&(t=!1)}),t}return!1}confirmStop(t){t&&1===t.state&&15===t.source&&this.StopExecutions(t.data)}StopExecutions(t){if(!(t&&t.length<1)&&(this.isStopOnGoing=!0,this.jobs&&this.jobs.length)){let n=t.map(o=>this.StopOperate(o));(0,M.D)(n).pipe((0,f.x)(()=>{this.refreshJobs(),this.isStopOnGoing=!1})).subscribe({next:o=>{this.errorHandlerEntity.info("REPLICATION.TRIGGER_STOP_SUCCESS")},error:o=>{this.errorHandlerEntity.error(o)}})}}StopOperate(t){let n=new m.gB;return n.name="OPERATION.STOP_EXECUTIONS",n.data.id=t.id,n.state=m.yb.progressing,n.data.name=t.id,this.operationService.publishInfo(n),this.replicationService.stopReplication({id:t.id}).pipe((0,T.U)(o=>{(0,m.hm)(n,m.yb.success)}),(0,d.K)(o=>{const l=(0,q.Po)(o);return this.translateService.get(l).subscribe(p=>(0,m.hm)(n,m.yb.failure,p)),(0,j._)(o)}))}reloadRules(t){t&&(this.search.ruleName="",this.filterComponent.currentValue="",this.listReplicationRule.refreshRule())}refreshRules(){this.search.ruleName="",this.filterComponent.currentValue?(this.filterComponent.currentValue="",this.filterComponent.filterTerms.next("")):this.listReplicationRule.refreshRule()}refreshJobs(){this.currentTerm="",this.currentPage=1,this.clrLoadJobs(!0,{page:{from:0,to:this.pageSize-1,size:this.pageSize}})}openFilter(t){this.isOpenFilterTag=t}getDuration(t){if(!t)return;let n=new Date(t.start_time).getTime(),l=new Date(t.end_time).getTime()-n,p=l/1e3,g=Math.floor(p/60),_=Math.floor(p%60);return g>0?0===_?g+"m":g+"m"+_+"s":_>0?_+"s":_<=0&&l>0?l+"ms":"-"}getStatusStr(t){return V&&V[t]?V[t]:t}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.F0),e.Y36(J.q),e.Y36(te.x),e.Y36(ne.f9),e.Y36(L.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["hbr-replication"]],viewQuery:function(t,n){if(1&t&&(e.Gf(oe,5),e.Gf(ee,5),e.Gf(It,5),e.Gf(Zt,5),e.Gf(K.z,7)),2&t){let o;e.iGM(o=e.CRH())&&(n.listReplicationRule=o.first),e.iGM(o=e.CRH())&&(n.createEditPolicyComponent=o.first),e.iGM(o=e.CRH())&&(n.replicationConfirmDialog=o.first),e.iGM(o=e.CRH())&&(n.StopConfirmDialog=o.first),e.iGM(o=e.CRH())&&(n.filterComponent=o.first)}},inputs:{projectId:"projectId",projectName:"projectName",isSystemAdmin:"isSystemAdmin",withAdmiral:"withAdmiral",withReplicationJob:"withReplicationJob",hasCreateReplicationPermission:"hasCreateReplicationPermission",hasUpdateReplicationPermission:"hasUpdateReplicationPermission",hasDeleteReplicationPermission:"hasDeleteReplicationPermission",hasExecuteReplicationPermission:"hasExecuteReplicationPermission"},outputs:{openCreateRule:"openCreateRule",openEdit:"openEdit",goToRegistry:"goToRegistry"},decls:19,vars:15,consts:[[1,"replication-row"],[1,"row","flex-items-xs-between","rightPos"],[1,"flex-xs-middle","option-right"],["id","filter-rules",3,"withDivider","filterPlaceholder","currentValue"],[1,"refresh-btn",3,"click"],["shape","refresh"],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12"],[3,"withReplicationJob","hasCreateReplicationPermission","hasUpdateReplicationPermission","hasDeleteReplicationPermission","hasExecuteReplicationPermission","searchString","replicateManual","selectOne","hideJobs","openNewRule","editOne"],["listReplicationRule",""],[1,"col-lg-12","col-md-12","col-sm-12","col-xs-12","jobList",3,"hidden"],["class","col-lg-12 col-md-12 col-sm-12 col-xs-12",4,"ngIf"],[3,"withAdmiral","goToRegistry","reload",4,"ngIf"],[3,"confirmAction"],["replicationConfirmDialog",""],["StopConfirmDialog",""],[1,"row","flex-items-xs-between","jobsRow"],[1,"flex-items-xs-bottom","option-left-down"],[1,"row","flex-items-xs-between","flex-items-xs-bottom","fiter-task"],[1,"execution-select"],[1,"select","filter-tag",3,"hidden"],["clrSelect","",3,"change"],["value","trigger"],["value","status"],["id","filter-executions",3,"withDivider","filterPlaceholder","currentValue","openFlag","filterEvt"],[1,"refresh-btn"],["shape","refresh",3,"click"],[3,"clrDgSelected","clrDgLoading","clrDgSelectedChange","clrDgRefresh"],[1,"btn-group"],["type","button","class","btn btn-secondary",3,"disabled","click",4,"ngIf"],[3,"clrDgSortBy"],[3,"clrDgField"],[3,"clrDgItem",4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgPageSize","clrDgTotalItems","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],["type","button",1,"btn","btn-secondary",3,"disabled","click"],[3,"clrDgItem"],["href","javascript:void(0)",3,"click"],["clrTooltipTrigger","","shape","info-circle","size","20",4,"ngIf"],["clrSize","md",3,"clrPosition",4,"clrIfOpen"],["clrTooltipTrigger","","shape","info-circle","size","20"],["clrSize","md",3,"clrPosition"],[3,"withAdmiral","goToRegistry","reload"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"div")(2,"div",1)(3,"div",2),e._UZ(4,"hbr-filter",3),e.ALo(5,"translate"),e.TgZ(6,"span",4),e.NdJ("click",function(){return n.refreshRules()}),e._UZ(7,"clr-icon",5),e.qZA()()()(),e.TgZ(8,"div",6)(9,"hbr-list-replication-rule",7,8),e.NdJ("replicateManual",function(l){return n.replicateManualRule(l)})("selectOne",function(l){return n.selectOneRule(l)})("hideJobs",function(){return n.hideJobs()})("openNewRule",function(){return n.openModal()})("editOne",function(l){return n.openEditRule(l)}),e.qZA()(),e.TgZ(11,"div",9),e.YNc(12,xt,20,15,"div",10),e.YNc(13,Ut,39,45,"div",10),e.qZA(),e.YNc(14,wt,1,1,"hbr-create-edit-rule",11),e.TgZ(15,"confirmation-dialog",12,13),e.NdJ("confirmAction",function(l){return n.confirmReplication(l)}),e.qZA(),e.TgZ(17,"confirmation-dialog",12,14),e.NdJ("confirmAction",function(l){return n.confirmStop(l)}),e.qZA()()),2&t&&(e.xp6(4),e.s9C("filterPlaceholder",e.lcZ(5,13,"REPLICATION.FILTER_POLICIES_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",n.search.ruleName),e.xp6(5),e.Q6J("withReplicationJob",n.withReplicationJob)("hasCreateReplicationPermission",n.hasCreateReplicationPermission)("hasUpdateReplicationPermission",n.hasUpdateReplicationPermission)("hasDeleteReplicationPermission",n.hasDeleteReplicationPermission)("hasExecuteReplicationPermission",n.hasExecuteReplicationPermission)("searchString",null==n.filterComponent?null:n.filterComponent.currentValue),e.xp6(2),e.Q6J("hidden",n.hiddenJobList),e.xp6(1),e.Q6J("ngIf",n.withReplicationJob),e.xp6(1),e.Q6J("ngIf",n.withReplicationJob),e.xp6(1),e.Q6J("ngIf",n.isSystemAdmin))},dependencies:[r.YN,r.Kr,c.C9t,c.Gwl,c.m4W,c.Z4N,c.fv_,c.dRQ,c.Ltv,c.YYR,c.F7K,c.PDs,c.KHL,c.Gcc,c.jND,c.Nh1,c.dml,c.K8c,c.qvL,c.nqY,c.otW,c.dTv,c.Jmj,c.bMv,c.zDF,b.sg,b.O5,K.z,ie.z,oe,ee,L.X$,b.Zx,re.Z],styles:[".refresh-btn[_ngcontent-%COMP%]{cursor:pointer}.refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.option-left[_ngcontent-%COMP%]{padding-left:16px}.option-right[_ngcontent-%COMP%]{padding-right:16px}.execution-select[_ngcontent-%COMP%]{padding-right:50px;height:24px;display:flex;justify-content:flex-end;padding-top:25px}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.execution-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]   .clr-form-control[_ngcontent-%COMP%]{margin-top:0}.execution-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.execution-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.rightPos[_ngcontent-%COMP%]{position:absolute;right:35px;margin-top:20px;z-index:100;height:32px}.select-status[_ngcontent-%COMP%]{float:left;margin-top:6px;margin-right:5px}.row-right[_ngcontent-%COMP%]{margin-left:564px}.fiter-task[_ngcontent-%COMP%]{margin-left:.4rem;margin-top:.05rem}.replication-row[_ngcontent-%COMP%]{position:relative}.jobList[_ngcontent-%COMP%]{padding-left:0}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]{height:60px;display:flex}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]   .option-left-down[_ngcontent-%COMP%]{margin-top:36px}.jobList[_ngcontent-%COMP%]   .jobsRow[_ngcontent-%COMP%]   .option-right-down[_ngcontent-%COMP%]{padding-right:16px;margin-top:24px}clr-datagrid[_ngcontent-%COMP%]     .datagrid-table{position:static}.flex-items-xs-between[_ngcontent-%COMP%]{display:flex;justify-content:space-between}"]}),i})();const ce="/harbor/replications";let Jt=(()=>{class i{constructor(t,n,o,l,p){this.router=t,this.session=n,this.appConfigService=o,this.activeRoute=l,this.event=p}ngOnInit(){this.scrollSub||(this.scrollSub=this.event.subscribe(C.n.SCROLL,t=>{t&&ce===t.url&&(this.scrollTop=t.scrollTop)})),this.routerSub||(this.routerSub=this.router.events.subscribe(t=>{t instanceof O.m2&&this.event.publish(C.n.SCROLL_TO_POSITION,t&&ce===t.url?this.scrollTop:0)}))}ngOnDestroy(){this.routerSub&&(this.routerSub.unsubscribe(),this.routerSub=null),this.scrollSub&&(this.scrollSub.unsubscribe(),this.scrollSub=null)}goRegistry(){this.router.navigate(["harbor","registries"])}get isSystemAdmin(){let t=this.session.getCurrentUser();return null!=t&&t.has_admin_role}get withAdmiral(){return this.appConfigService.getConfig().with_admiral}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(O.F0),e.Y36(I.m),e.Y36(w._),e.Y36(O.gz),e.Y36(C.P))},i.\u0275cmp=e.Xpm({type:i,selectors:[["total-replication"]],decls:5,vars:10,consts:[[1,"custom-h2"],[1,"content-top"],[3,"withReplicationJob","isSystemAdmin","withAdmiral","hasCreateReplicationPermission","hasUpdateReplicationPermission","hasDeleteReplicationPermission","hasExecuteReplicationPermission","goToRegistry"]],template:function(t,n){1&t&&(e.TgZ(0,"h2",0),e._uU(1),e.ALo(2,"translate"),e.qZA(),e.TgZ(3,"div",1)(4,"hbr-replication",2),e.NdJ("goToRegistry",function(){return n.goRegistry()}),e.qZA()()),2&t&&(e.xp6(1),e.Oqu(e.lcZ(2,8,"SIDE_NAV.SYSTEM_MGMT.REPLICATION")),e.xp6(3),e.Q6J("withReplicationJob",!0)("isSystemAdmin",n.isSystemAdmin)("withAdmiral",n.withAdmiral)("hasCreateReplicationPermission",!0)("hasUpdateReplicationPermission",!0)("hasDeleteReplicationPermission",!0)("hasExecuteReplicationPermission",!0))},dependencies:[kt,L.X$],styles:[".option-right[_ngcontent-%COMP%]{padding-right:16px;margin-top:36px;margin-bottom:11px}.content-top[_ngcontent-%COMP%]{margin-top:4px}"]}),i})();var ae=a(9590);function Yt(i,s){1&i&&(e.TgZ(0,"div",45),e._UZ(1,"span",46),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.IN_PROGRESS")))}function Qt(i,s){1&i&&(e.TgZ(0,"div",47),e._UZ(1,"clr-icon",48),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.SUCCESS")))}function Gt(i,s){1&i&&(e.TgZ(0,"div",49),e._UZ(1,"clr-icon",50),e.TgZ(2,"span"),e._uU(3),e.ALo(4,"translate"),e.qZA()()),2&i&&(e.xp6(3),e.Oqu(e.lcZ(4,1,"REPLICATION.FAILURE")))}function jt(i,s){if(1&i&&(e.TgZ(0,"a",52),e._UZ(1,"clr-icon",53),e.qZA()),2&i){const t=e.oxw().$implicit,n=e.oxw();e.Q6J("href",n.viewLog(t.id),e.LSH)}}function Bt(i,s){if(1&i&&(e.TgZ(0,"clr-dg-row")(1,"clr-dg-cell"),e._uU(2),e.qZA(),e.TgZ(3,"clr-dg-cell",37),e._uU(4),e.qZA(),e.TgZ(5,"clr-dg-cell"),e._uU(6),e.qZA(),e.TgZ(7,"clr-dg-cell"),e._uU(8),e.qZA(),e.TgZ(9,"clr-dg-cell"),e._uU(10),e.qZA(),e.TgZ(11,"clr-dg-cell"),e._uU(12),e.qZA(),e.TgZ(13,"clr-dg-cell"),e._uU(14),e.ALo(15,"harborDatetime"),e.qZA(),e.TgZ(16,"clr-dg-cell"),e._uU(17),e.ALo(18,"harborDatetime"),e.qZA(),e.TgZ(19,"clr-dg-cell"),e.YNc(20,jt,2,1,"a",51),e.qZA()()),2&i){const t=s.$implicit,n=e.oxw();e.xp6(2),e.Oqu(t.id),e.xp6(2),e.Oqu(t.resource_type),e.xp6(2),e.Oqu(t.src_resource),e.xp6(2),e.Oqu(t.dst_resource),e.xp6(2),e.Oqu(t.operation),e.xp6(2),e.Oqu(n.getStatusStr(t.status)),e.xp6(2),e.Oqu(e.xi3(15,9,t.start_time,"short")),e.xp6(3),e.Oqu(e.xi3(18,12,t.end_time,"short")),e.xp6(3),e.Q6J("ngIf","Initialized"!==t.status)}}function zt(i,s){if(1&i&&(e.TgZ(0,"span"),e._uU(1),e.ALo(2,"translate"),e.qZA()),2&i){e.oxw();const t=e.MAs(122);e.xp6(1),e.lnq("",t.firstItem+1," - ",t.lastItem+1," ",e.lcZ(2,3,"REPLICATION.OF")," ")}}const Ht=function(){return[15,25,50]},W="InProgress",Q={Succeed:"Succeeded"};let Vt=(()=>{class i{constructor(t,n,o,l,p){this.translate=t,this.router=n,this.replicationService=o,this.errorHandler=l,this.route=p,this.inProgress=!1,this.currentPage=1,this.pageSize=(0,u.tb)(u.V2.REPLICATION_TASKS_COMPONENT),this.loading=!0,this.defaultFilter="resourceType",this.taskItem=[],this.tasksCopy=[],this.startTimeComparator=new u.sH("start_time","date"),this.endTimeComparator=new u.sH("end_time","date")}ngOnInit(){this.searchTask="",this.executionId=this.route.snapshot.params.id;const t=this.route.snapshot.data;t&&(this.execution=t.replicationTasksRoutingResolver,this.clrLoadPage())}getExecutionDetail(){this.inProgress=!0,this.executionId&&this.replicationService.getReplicationExecution({id:+this.executionId}).pipe((0,f.x)(()=>this.inProgress=!1)).subscribe(t=>{this.execution=t,this.clrLoadPage()},t=>{this.errorHandler.error(t)})}clrLoadPage(){this.timerDelay||(this.timerDelay=(0,Z.H)(P.ib,P.ib).subscribe(()=>{this.execution.status===W?this.getExecutionDetail():(this.timerDelay.unsubscribe(),this.timerDelay=null)}))}get trigger(){return this.execution&&this.execution.trigger?this.execution.trigger:""}get startTime(){return this.execution&&this.execution.start_time?this.execution.start_time:null}get successNum(){return this.execution&&this.execution.succeed}get failedNum(){return this.execution&&this.execution.failed}get progressNum(){return this.execution&&this.execution.in_progress}get stoppedNum(){return this.execution&&this.execution.stopped}stopJob(){this.stopOnGoing=!0,this.replicationService.stopReplication({id:+this.executionId}).subscribe(t=>{this.stopOnGoing=!1,this.getExecutionDetail(),this.translate.get("REPLICATION.STOP_SUCCESS",{param:this.executionId}).subscribe(n=>{this.errorHandler.info(n)})},t=>{this.errorHandler.error(t)})}viewLog(t){return u.S$+"/replication/executions/"+this.executionId+"/tasks/"+t+"/log"}ngOnDestroy(){this.timerDelay&&this.timerDelay.unsubscribe(),this.tasksTimeout&&(clearTimeout(this.tasksTimeout),this.tasksTimeout=null)}clrLoadTasks(t,n){if(!n||!n.page||!this.executionId)return;n&&n.page&&n.page.size&&(this.pageSize=n.page.size,(0,u.Pe)(u.V2.REPLICATION_TASKS_COMPONENT,this.pageSize));const o={id:+this.executionId,page:this.currentPage,pageSize:this.pageSize,sort:(0,u.td)(n)};this.searchTask&&""!==this.searchTask&&(o[this.defaultFilter]=this.searchTask===Q.Succeed&&"status"===this.defaultFilter?"Succeed":this.searchTask),t&&(this.loading=!0),this.replicationService.listReplicationTasksResponse(o).pipe((0,f.x)(()=>{this.loading=!1})).subscribe(l=>{if(l.headers){let g=l.headers.get("X-Total-Count");g&&(this.totalCount=parseInt(g,0))}this.tasks=l.body,this.tasks=(0,u.Dd)(this.tasks,n),this.tasks=(0,u.Pq)(this.tasks,n);let p=0;this.tasks?.length&&this.tasks.forEach(g=>{g.status===W&&p++}),(p>0||this.execution?.status===W)&&(this.tasksTimeout||(this.tasksTimeout=setTimeout(()=>{this.clrLoadTasks(!1,{page:{}})},P.ib)))},l=>{this.errorHandler.error(l)})}onBack(){this.router.navigate(["harbor","replications"])}selectFilter(t){this.defaultFilter=t.target.value,this.doSearch(this.searchTask)}refreshTasks(){this.currentPage=1,this.clrLoadTasks(!0,{page:{}})}doSearch(t){this.currentPage=1,this.searchTask=t.trim(),this.clrLoadTasks(!0,{page:{}})}openFilter(t){this.isOpenFilterTag=t}getStatusStr(t){return Q&&Q[t]?Q[t]:t}canStop(){return this.execution&&"InProgress"===this.execution.status}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(L.sK),e.Y36(O.F0),e.Y36(ae.xZ),e.Y36(J.q),e.Y36(O.gz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["replication-tasks"]],decls:129,vars:109,consts:[[1,"replication-tasks"],[1,"overview-section"],[1,"title-wrapper"],[1,"onback",3,"click"],[1,"title-block"],[1,"custom-h2","h2-style"],[1,"id-divider"],[1,"margin-top-16px"],["class","status-progress",4,"ngIf"],["class","status-success",4,"ngIf"],["class","status-failed",4,"ngIf"],[1,"button-stop"],[1,"btn","btn-primary",3,"disabled","click"],[1,"spinner","spinner-inline",3,"hidden"],[1,"execution-block"],[1,"executions-detail"],[1,"flex-block"],[1,"execution-detail-label"],[1,"detail-row"],[1,"num-success","common-style"],[1,"detail-span"],[1,"execution-details"],[1,"num-failed","common-style"],[1,"num-progress","common-style"],[1,"num-stopped","common-style"],[1,"tasks-detail"],[1,"modal-title"],[1,"row","flex-items-xs-between","flex-items-xs-bottom"],[1,"action-select"],[1,"select","filter-tag","clr-select-wrapper",3,"hidden"],[1,"clr-select",3,"change"],["value","resourceType"],["value","status"],[3,"withDivider","filterPlaceholder","currentValue","openFlag","filterEvt"],[1,"refresh-btn"],["shape","refresh",3,"click"],[3,"clrDgLoading","clrDgRefresh"],[1,"resource-width"],[3,"clrDgField"],[3,"clrDgSortBy"],[4,"ngFor","ngForOf"],[3,"clrDgPage","clrDgTotalItems","clrDgPageSize","clrDgPageChange"],["pagination",""],[3,"clrPageSizeOptions"],[4,"ngIf"],[1,"status-progress"],[1,"spinner","spinner-inline"],[1,"status-success"],["size","18","shape","success-standard",1,"color-green"],[1,"status-failed"],["size","18","shape","error-standard",1,"color-red"],["rel","noopener noreferrer","target","_blank",3,"href",4,"ngIf"],["rel","noopener noreferrer","target","_blank",3,"href"],["shape","list"]],template:function(t,n){1&t&&(e.TgZ(0,"div",0)(1,"section",1)(2,"div",2)(3,"div")(4,"a",3),e.NdJ("click",function(){return n.onBack()}),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"div",4)(8,"div")(9,"h2",5),e._uU(10),e.ALo(11,"translate"),e.qZA(),e._UZ(12,"span",6),e.TgZ(13,"h2",5),e._uU(14),e.qZA()(),e.TgZ(15,"div",7),e.YNc(16,Yt,5,3,"div",8),e.YNc(17,Qt,5,3,"div",9),e.YNc(18,Gt,5,3,"div",10),e.qZA(),e.TgZ(19,"div",11)(20,"button",12),e.NdJ("click",function(){return n.stopJob()}),e._uU(21),e.ALo(22,"translate"),e.qZA(),e._UZ(23,"span",13),e.qZA()()(),e.TgZ(24,"div",14)(25,"div",15)(26,"div")(27,"label"),e._uU(28),e.ALo(29,"translate"),e.qZA(),e.TgZ(30,"span"),e._uU(31),e.ALo(32,"translate"),e.qZA()(),e.TgZ(33,"div")(34,"label"),e._uU(35),e.ALo(36,"translate"),e.qZA(),e.TgZ(37,"span"),e._uU(38),e.ALo(39,"harborDatetime"),e.qZA()()(),e.TgZ(40,"div",16)(41,"section",17)(42,"section",18),e._UZ(43,"div",19),e.TgZ(44,"label",20),e._uU(45),e.ALo(46,"translate"),e.qZA(),e.TgZ(47,"div",21),e._uU(48),e.qZA()(),e.TgZ(49,"section",18),e._UZ(50,"div",22),e.TgZ(51,"label",20),e._uU(52),e.ALo(53,"translate"),e.qZA(),e.TgZ(54,"div",21),e._uU(55),e.qZA()(),e.TgZ(56,"section",18),e._UZ(57,"div",23),e.TgZ(58,"label",20),e._uU(59),e.ALo(60,"translate"),e.qZA(),e.TgZ(61,"div",21),e._uU(62),e.qZA()(),e.TgZ(63,"section",18),e._UZ(64,"div",24),e.TgZ(65,"label",20),e._uU(66),e.ALo(67,"translate"),e.qZA(),e.TgZ(68,"div",21),e._uU(69),e.qZA()()()()()(),e.TgZ(70,"div",25)(71,"h3",26),e._uU(72),e.ALo(73,"translate"),e.qZA(),e.TgZ(74,"div",27)(75,"div",28)(76,"div",29)(77,"select",30),e.NdJ("change",function(l){return n.selectFilter(l)}),e.TgZ(78,"option",31),e._uU(79),e.ALo(80,"translate"),e.qZA(),e.TgZ(81,"option",32),e._uU(82),e.ALo(83,"translate"),e.qZA()()(),e.TgZ(84,"hbr-filter",33),e.NdJ("openFlag",function(l){return n.openFilter(l)})("filterEvt",function(l){return n.doSearch(l)}),e.ALo(85,"translate"),e.qZA(),e.TgZ(86,"span",34)(87,"clr-icon",35),e.NdJ("click",function(){return n.refreshTasks()}),e.qZA()()()(),e.TgZ(88,"clr-datagrid",36),e.NdJ("clrDgRefresh",function(l){return n.clrLoadTasks(!0,l)}),e.TgZ(89,"clr-dg-column"),e._uU(90),e.ALo(91,"translate"),e.qZA(),e.TgZ(92,"clr-dg-column",37),e._uU(93),e.ALo(94,"translate"),e.qZA(),e.TgZ(95,"clr-dg-column",38),e._uU(96),e.ALo(97,"translate"),e.qZA(),e.TgZ(98,"clr-dg-column",38),e._uU(99),e.ALo(100,"translate"),e.qZA(),e.TgZ(101,"clr-dg-column",38),e._uU(102),e.ALo(103,"translate"),e.qZA(),e.TgZ(104,"clr-dg-column"),e._uU(105),e.ALo(106,"translate"),e.qZA(),e.TgZ(107,"clr-dg-column",39),e._uU(108),e.ALo(109,"translate"),e.qZA(),e.TgZ(110,"clr-dg-column",39),e._uU(111),e.ALo(112,"translate"),e.qZA(),e.TgZ(113,"clr-dg-column"),e._uU(114),e.ALo(115,"translate"),e.qZA(),e.TgZ(116,"clr-dg-placeholder"),e._uU(117),e.ALo(118,"translate"),e.qZA(),e.YNc(119,Bt,21,15,"clr-dg-row",40),e.TgZ(120,"clr-dg-footer")(121,"clr-dg-pagination",41,42),e.NdJ("clrDgPageChange",function(l){return n.currentPage=l}),e.TgZ(123,"clr-dg-page-size",43),e._uU(124),e.ALo(125,"translate"),e.qZA(),e.YNc(126,zt,3,5,"span",44),e._uU(127),e.ALo(128,"translate"),e.qZA()()()()()),2&t&&(e.xp6(5),e.hij("<",e.lcZ(6,53,"PROJECT_DETAIL.REPLICATION"),""),e.xp6(5),e.hij(" ",e.lcZ(11,55,"REPLICATION.REPLICATION_EXECUTION")," "),e.xp6(4),e.Oqu(n.executionId),e.xp6(2),e.Q6J("ngIf",n.execution&&"InProgress"===n.execution.status),e.xp6(1),e.Q6J("ngIf",n.execution&&"Succeed"===n.execution.status),e.xp6(1),e.Q6J("ngIf",n.execution&&"Failed"===n.execution.status),e.xp6(2),e.Q6J("disabled",n.stopOnGoing||!n.canStop()),e.xp6(1),e.hij(" ",e.lcZ(22,57,"REPLICATION.STOPJOB")," "),e.xp6(2),e.Q6J("hidden",!1===n.inProgress),e.xp6(5),e.hij("",e.lcZ(29,59,"REPLICATION.TRIGGER_MODE")," :"),e.xp6(3),e.Oqu(e.lcZ(32,61,n.trigger)),e.xp6(4),e.hij("",e.lcZ(36,63,"REPLICATION.CREATION_TIME")," :"),e.xp6(3),e.Oqu(e.xi3(39,65,n.startTime,"short")),e.xp6(7),e.Oqu(e.lcZ(46,68,"REPLICATION.SUCCESS")),e.xp6(3),e.Oqu(n.successNum),e.xp6(4),e.Oqu(e.lcZ(53,70,"REPLICATION.FAILURE")),e.xp6(3),e.Oqu(n.failedNum),e.xp6(4),e.Oqu(e.lcZ(60,72,"REPLICATION.IN_PROGRESS")),e.xp6(3),e.Oqu(n.progressNum),e.xp6(4),e.Oqu(e.lcZ(67,74,"REPLICATION.STOPPED")),e.xp6(3),e.Oqu(n.stoppedNum),e.xp6(3),e.Oqu(e.lcZ(73,76,"P2P_PROVIDER.TASKS")),e.xp6(4),e.Q6J("hidden",!n.isOpenFilterTag),e.xp6(3),e.hij(" ",e.lcZ(80,78,"REPLICATION.RESOURCE_TYPE")," "),e.xp6(3),e.hij(" ",e.lcZ(83,80,"REPLICATION.STATUS")," "),e.xp6(2),e.s9C("filterPlaceholder",e.lcZ(85,82,"REPLICATION.FILTER_PLACEHOLDER")),e.Q6J("withDivider",!0)("currentValue",n.searchTask),e.xp6(4),e.Q6J("clrDgLoading",n.loading),e.xp6(2),e.Oqu(e.lcZ(91,84,"REPLICATION.TASK_ID")),e.xp6(3),e.Oqu(e.lcZ(94,86,"REPLICATION.RESOURCE_TYPE")),e.xp6(2),e.Q6J("clrDgField","src_resource"),e.xp6(1),e.Oqu(e.lcZ(97,88,"REPLICATION.SOURCE")),e.xp6(2),e.Q6J("clrDgField","dst_resource"),e.xp6(1),e.Oqu(e.lcZ(100,90,"REPLICATION.DESTINATION")),e.xp6(2),e.Q6J("clrDgField","operation"),e.xp6(1),e.Oqu(e.lcZ(103,92,"REPLICATION.OPERATION")),e.xp6(3),e.Oqu(e.lcZ(106,94,"REPLICATION.STATUS")),e.xp6(2),e.Q6J("clrDgSortBy",n.startTimeComparator),e.xp6(1),e.Oqu(e.lcZ(109,96,"REPLICATION.CREATION_TIME")),e.xp6(2),e.Q6J("clrDgSortBy",n.endTimeComparator),e.xp6(1),e.Oqu(e.lcZ(112,98,"REPLICATION.END_TIME")),e.xp6(3),e.Oqu(e.lcZ(115,100,"REPLICATION.LOGS")),e.xp6(3),e.Oqu(e.lcZ(118,102,"P2P_PROVIDER.TASKS_PLACEHOLDER")),e.xp6(2),e.Q6J("ngForOf",n.tasks),e.xp6(2),e.Q6J("clrDgPage",n.currentPage)("clrDgTotalItems",n.totalCount)("clrDgPageSize",n.pageSize),e.xp6(2),e.Q6J("clrPageSizeOptions",e.DdM(108,Ht)),e.xp6(1),e.Oqu(e.lcZ(125,104,"PAGINATION.PAGE_SIZE")),e.xp6(2),e.Q6J("ngIf",n.totalCount),e.xp6(1),e.AsE("",n.totalCount," ",e.lcZ(128,106,"REPLICATION.ITEMS")," "))},dependencies:[r.YN,r.Kr,c.C9t,c.m4W,c.Z4N,c.fv_,c.dRQ,c.Ltv,c.YYR,c.F7K,c.PDs,c.KHL,c.Gcc,c.jND,c.Nh1,c.dml,c.K8c,c.qvL,c.MgK,b.sg,b.O5,K.z,L.X$,re.Z],styles:[".replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .onback[_ngcontent-%COMP%]{color:#007cbb;font-size:14px;cursor:pointer}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]{display:flex;align-items:center}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:first-child{min-width:250px;margin-right:5px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2){width:150px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]:nth-child(2)   span[_ngcontent-%COMP%]{color:#007cbb;font-size:12px;margin-left:10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .id-divider[_ngcontent-%COMP%]{display:inline-block;height:25px;width:2px;background-color:#ccc;margin:0 20px -2px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .title-wrapper[_ngcontent-%COMP%]   .title-block[_ngcontent-%COMP%]   .h2-style[_ngcontent-%COMP%]{display:inline-block}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]{margin-top:24px;display:flex;flex-wrap:wrap}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]{margin-right:10px;text-align:left}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]{display:flex;height:27px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .common-style[_ngcontent-%COMP%]{width:12px;height:12px;margin-top:16px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-success[_ngcontent-%COMP%]{background-color:#308700}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-failed[_ngcontent-%COMP%]{background-color:#c92101}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-progress[_ngcontent-%COMP%]{background-color:#1c5898}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .num-stopped[_ngcontent-%COMP%]{background-color:#a1a1a1}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .detail-span[_ngcontent-%COMP%]{flex:0 0 100px;margin:10px 0 0 10px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .execution-detail-label[_ngcontent-%COMP%]   .detail-row[_ngcontent-%COMP%]   .execution-details[_ngcontent-%COMP%]{width:200px;margin:8px 35px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]{width:400px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:inline-block;width:120px}.replication-tasks[_ngcontent-%COMP%]   .overview-section[_ngcontent-%COMP%]   .execution-block[_ngcontent-%COMP%]   .executions-detail[_ngcontent-%COMP%] > div[_ngcontent-%COMP%]{margin-top:10px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]{margin-top:65px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]{padding-right:18px;height:24px;display:flex;justify-content:flex-end}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .filter-tag[_ngcontent-%COMP%]{float:left;margin-top:8px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]{cursor:pointer;margin-top:7px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   .action-select[_ngcontent-%COMP%]   .refresh-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   clr-datagrid[_ngcontent-%COMP%]{margin-top:20px}.replication-tasks[_ngcontent-%COMP%]   .tasks-detail[_ngcontent-%COMP%]   clr-datagrid[_ngcontent-%COMP%]   .resource-width[_ngcontent-%COMP%]{width:150px}.margin-top-16px[_ngcontent-%COMP%]{margin-top:16px}.button-stop[_ngcontent-%COMP%]{margin-top:16px;margin-left:-5px}"]}),i})(),Wt=(()=>{class i{constructor(t,n){this.replicationService=t,this.router=n}resolve(t,n){let o=t.params.id;return o||(o=t.queryParams.project_id),this.replicationService.getReplicationExecution({id:+o}).pipe((0,T.U)(l=>(l||this.router.navigate(["/harbor","projects"]),l)),(0,d.K)(l=>(this.router.navigate(["/harbor","projects"]),null)))}}return i.\u0275fac=function(t){return new(t||i)(e.LFG(ae.xZ),e.LFG(O.F0))},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var pe=a(2554);const $t=[{path:"",component:Jt,data:{reuse:!0,routeConfigId:pe.j.REPLICATION_PAGE}},{path:":id/tasks",component:Vt,resolve:{replicationTasksRoutingResolver:Wt},data:{routeConfigId:pe.j.REPLICATION_TASKS_PAGE}}];let Xt=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({providers:[X.en],imports:[h.m,r.UX,O.Bz.forChild($t)]}),i})()},2589:(G,v,a)=>{a.d(v,{_:()=>O});var r=a(4650),h=a(2466);let O=(()=>{class C{constructor(){}}return C.\u0275fac=function(I){return new(I||C)},C.\u0275cmp=r.Xpm({type:C,selectors:[["cron-tooltip"]],decls:86,vars:51,consts:[[1,"table","table-noborder","table-style","table-tag"],[1,"table-title","tag-thead"],[1,"tag-header-color"],[1,"tag-thead"],[1,"tag-tbody"],[1,"tag-tr"],[1,"tag-body-color"]],template:function(I,w){1&I&&(r.TgZ(0,"table",0)(1,"caption",1)(2,"span",2),r._uU(3),r.ALo(4,"translate"),r.qZA()(),r.TgZ(5,"thead",3)(6,"tr")(7,"th",2),r._uU(8),r.ALo(9,"translate"),r.qZA(),r.TgZ(10,"th",2),r._uU(11),r.ALo(12,"translate"),r.qZA(),r.TgZ(13,"th",2),r._uU(14),r.ALo(15,"translate"),r.qZA(),r.TgZ(16,"th",2),r._uU(17),r.ALo(18,"translate"),r.qZA()()(),r.TgZ(19,"tbody",4)(20,"tr",5)(21,"td",6),r._uU(22),r.ALo(23,"translate"),r.qZA(),r.TgZ(24,"td",6),r._uU(25),r.ALo(26,"translate"),r.qZA(),r.TgZ(27,"td",6),r._uU(28,"0-59"),r.qZA(),r.TgZ(29,"td",6),r._uU(30,"* / , -"),r.qZA()(),r.TgZ(31,"tr",5)(32,"td",6),r._uU(33),r.ALo(34,"translate"),r.qZA(),r.TgZ(35,"td",6),r._uU(36),r.ALo(37,"translate"),r.qZA(),r.TgZ(38,"td",6),r._uU(39,"0-59"),r.qZA(),r.TgZ(40,"td",6),r._uU(41,"* / , -"),r.qZA()(),r.TgZ(42,"tr",5)(43,"td",6),r._uU(44),r.ALo(45,"translate"),r.qZA(),r.TgZ(46,"td",6),r._uU(47),r.ALo(48,"translate"),r.qZA(),r.TgZ(49,"td",6),r._uU(50,"0-23"),r.qZA(),r.TgZ(51,"td",6),r._uU(52,"* / , -"),r.qZA()(),r.TgZ(53,"tr",5)(54,"td",6),r._uU(55),r.ALo(56,"translate"),r.qZA(),r.TgZ(57,"td",6),r._uU(58),r.ALo(59,"translate"),r.qZA(),r.TgZ(60,"td",6),r._uU(61,"1-31"),r.qZA(),r.TgZ(62,"td",6),r._uU(63,"* / , - ?"),r.qZA()(),r.TgZ(64,"tr",5)(65,"td",6),r._uU(66),r.ALo(67,"translate"),r.qZA(),r.TgZ(68,"td",6),r._uU(69),r.ALo(70,"translate"),r.qZA(),r.TgZ(71,"td",6),r._uU(72,"1-12 or JAN-DEC"),r.qZA(),r.TgZ(73,"td",6),r._uU(74,"* / , -"),r.qZA()(),r.TgZ(75,"tr",5)(76,"td",6),r._uU(77),r.ALo(78,"translate"),r.qZA(),r.TgZ(79,"td",6),r._uU(80),r.ALo(81,"translate"),r.qZA(),r.TgZ(82,"td",6),r._uU(83,"0-6 or SUN-SAT"),r.qZA(),r.TgZ(84,"td",6),r._uU(85,"* / , - ?"),r.qZA()()()()),2&I&&(r.xp6(3),r.hij(" ",r.lcZ(4,17,"REPLICATION.CRON_TITLE")," "),r.xp6(5),r.hij(" ",r.lcZ(9,19,"REPLICATION.FIELD_NAME")," "),r.xp6(3),r.hij(" ",r.lcZ(12,21,"REPLICATION.MANDATORY")," "),r.xp6(3),r.hij(" ",r.lcZ(15,23,"REPLICATION.ALLOWED_VALUES")," "),r.xp6(3),r.hij(" ",r.lcZ(18,25,"REPLICATION.ALLOWED_CHARACTERS")," "),r.xp6(5),r.hij(" ",r.lcZ(23,27,"REPLICATION.SECONDS")," "),r.xp6(3),r.Oqu(r.lcZ(26,29,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(34,31,"REPLICATION.MINUTES")," "),r.xp6(3),r.Oqu(r.lcZ(37,33,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(45,35,"REPLICATION.HOURS")," "),r.xp6(3),r.Oqu(r.lcZ(48,37,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(56,39,"REPLICATION.DAY_MONTH")," "),r.xp6(3),r.Oqu(r.lcZ(59,41,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(67,43,"REPLICATION.MONTH")," "),r.xp6(3),r.Oqu(r.lcZ(70,45,"REPLICATION.YES")),r.xp6(8),r.hij(" ",r.lcZ(78,47,"REPLICATION.DAY_WEEK")," "),r.xp6(3),r.Oqu(r.lcZ(81,49,"REPLICATION.YES")))},dependencies:[h.X$],styles:[".table-style[_ngcontent-%COMP%]{margin-top:0;border-top-left-radius:0;border-top-right-radius:0;color:#fff}.table-style[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]{border-top-left-radius:.125rem;border-top-right-radius:.125rem}.table-style[_ngcontent-%COMP%]   .table-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:16px}"]}),C})()},8348:(G,v,a)=>{a.d(v,{z:()=>A});var r=a(4650),h=a(7579),O=a(8372),C=a(4006),e=a(6895),I=a(9375);const w=["inputElement"];function F(E,T){1&E&&r._UZ(0,"span",4)}let A=(()=>{class E{constructor(d){this.cd=d,this.placeHolder="",this.filterTerms=new h.x,this.isExpanded=!1,this.filterEvt=new r.vpe,this.openFlag=new r.vpe,this.readonly=null,this.expandMode=!1,this.withDivider=!1}set filterPlaceholder(d){this.placeHolder=d}ngOnInit(){this.filterTerms.pipe((0,O.b)(500)).subscribe(d=>{this.filterEvt.emit(d)})}valueChange(){this.filterTerms.next(this.currentValue&&this.currentValue.trim())}inputFocus(){this.openFlag.emit(this.isExpanded)}onClick(){this.expandMode||(this.isExpanded=!this.isExpanded,this.isExpanded&&(this.cd.detectChanges(),this.inputElement.nativeElement.focus()),this.openFlag.emit(this.isExpanded))}get isShowSearchBox(){return this.expandMode||!this.expandMode&&this.isExpanded}}return E.\u0275fac=function(d){return new(d||E)(r.Y36(r.sBO))},E.\u0275cmp=r.Xpm({type:E,selectors:[["hbr-filter"]],viewQuery:function(d,f){if(1&d&&r.Gf(w,5),2&d){let Z;r.iGM(Z=r.CRH())&&(f.inputElement=Z.first)}},inputs:{readonly:"readonly",currentValue:"currentValue",filterPlaceholder:"filterPlaceholder",expandMode:"expandMode",withDivider:"withDivider",width:"width"},outputs:{filterEvt:"filterEvt",openFlag:"openFlag"},decls:5,vars:9,consts:[["shape","search","size","20",1,"search-btn",3,"click"],["type","text","autofocus","",1,"filter-input","clr-input",3,"hidden","placeholder","ngModel","keyup","focus","ngModelChange"],["inputElement",""],["class","filter-divider",4,"ngIf"],[1,"filter-divider"]],template:function(d,f){1&d&&(r.TgZ(0,"span")(1,"clr-icon",0),r.NdJ("click",function(){return f.onClick()}),r.qZA(),r.TgZ(2,"input",1,2),r.NdJ("keyup",function(){return f.valueChange()})("focus",function(){return f.inputFocus()})("ngModelChange",function(M){return f.currentValue=M}),r.qZA(),r.YNc(4,F,1,0,"span",3),r.qZA()),2&d&&(r.xp6(1),r.ekj("filter-icon",f.isShowSearchBox),r.xp6(1),r.Udp("width",f.width,"px"),r.s9C("placeholder",f.placeHolder),r.Q6J("hidden",!f.isShowSearchBox)("ngModel",f.currentValue),r.uIk("readOnly",f.readonly),r.xp6(2),r.Q6J("ngIf",f.withDivider))},dependencies:[C.Fj,C.JJ,C.On,e.O5,I.qvL],styles:[".filter-icon[_ngcontent-%COMP%]{position:relative;right:-20px}.filter-divider[_ngcontent-%COMP%]{display:inline-block;height:16px;width:1px;padding-top:12px;padding-bottom:12px;position:relative;top:9px;margin-right:6px;margin-left:6px}.search-btn[_ngcontent-%COMP%]{cursor:pointer}.search-btn[_ngcontent-%COMP%]:hover{color:#007cbb}.filter-input[_ngcontent-%COMP%]{padding-left:24px}"]}),E})()},6082:(G,v,a)=>{a.d(v,{q:()=>F});var r=a(6742),h=a(4650),O=a(6895),C=a(9375);function e(A,E){1&A&&h._UZ(0,"clr-icon",4)}function I(A,E){1&A&&h._UZ(0,"clr-icon",5)}const w=function(A,E,T){return{"background-color":A,color:E,border:T}};let F=(()=>{class A{constructor(){this.hasIcon=!0}ngOnChanges(){if(this.label){let T=this.label.color;T||(T="#FFFFFF"),this.labelColor=r.oW.find(d=>d.color===T)}}}return A.\u0275fac=function(T){return new(T||A)},A.\u0275cmp=h.Xpm({type:A,selectors:[["hbr-label-piece"]],inputs:{label:"label",labelWidth:"labelWidth",hasIcon:"hasIcon"},features:[h.TTD],decls:6,vars:10,consts:[[1,"label",3,"ngStyle"],["shape","organization",4,"ngIf"],["shape","administrator",4,"ngIf"],[1,"label-name"],["shape","organization"],["shape","administrator"]],template:function(T,d){1&T&&(h.TgZ(0,"label",0)(1,"span"),h.YNc(2,e,1,0,"clr-icon",1),h.YNc(3,I,1,0,"clr-icon",2),h.qZA(),h.TgZ(4,"span",3),h._uU(5),h.qZA()()),2&T&&(h.Udp("max-width",d.labelWidth,"px"),h.Q6J("ngStyle",h.kEZ(6,w,null==d.labelColor?null:d.labelColor.color,null==d.labelColor?null:d.labelColor.textColor,"#FFFFFF"===(null==d.labelColor?null:d.labelColor.color)?"1px solid #A1A1A1":"none")),h.xp6(2),h.Q6J("ngIf",d.hasIcon&&"p"===d.label.scope),h.xp6(1),h.Q6J("ngIf",d.hasIcon&&"g"===d.label.scope),h.xp6(2),h.Oqu(d.label.name))},dependencies:[O.O5,O.PC,C.qvL,C.MgK],styles:[".label[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:inherit}.label[_ngcontent-%COMP%]   clr-icon[_ngcontent-%COMP%]{margin-right:3px;margin-top:3px}.label-name[_ngcontent-%COMP%]{min-width:0;overflow:hidden;text-overflow:ellipsis}"]}),A})()}}]);